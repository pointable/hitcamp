!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("component-classes/index.js",function(a,b,c){function d(a){if(!a)throw new Error("A DOM element reference is required");this.el=a,this.list=a.classList}var e=b("indexof"),f=/\s+/,g=Object.prototype.toString;c.exports=function(a){return new d(a)},d.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array(),c=e(b,a);return~c||b.push(a),this.el.className=b.join(" "),this},d.prototype.remove=function(a){if("[object RegExp]"==g.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array(),c=e(b,a);return~c&&b.splice(c,1),this.el.className=b.join(" "),this},d.prototype.removeMatching=function(a){for(var b=this.array(),c=0;c<b.length;c++)a.test(b[c])&&this.remove(b[c]);return this},d.prototype.toggle=function(a,b){return this.list?("undefined"!=typeof b?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this):("undefined"!=typeof b?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a),this)},d.prototype.array=function(){var a=this.el.className.replace(/^\s+|\s+$/g,""),b=a.split(f);return""===b[0]&&b.shift(),b},d.prototype.has=d.prototype.contains=function(a){return this.list?this.list.contains(a):!!~e(this.array(),a)}}),a.register("segmentio-extend/index.js",function(a,b,c){c.exports=function(a){for(var b,c=Array.prototype.slice.call(arguments,1),d=0;b=c[d];d++)if(b)for(var e in b)a[e]=b[e];return a}}),a.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),a.register("component-event/index.js",function(a){var b=window.addEventListener?"addEventListener":"attachEvent",c=window.removeEventListener?"removeEventListener":"detachEvent",d="addEventListener"!==b?"on":"";a.bind=function(a,c,e,f){return a[b](d+c,e,f||!1),e},a.unbind=function(a,b,e,f){return a[c](d+b,e,f||!1),e}}),a.register("timoxley-to-array/index.js",function(a,b,c){function d(a){return"[object Array]"===Object.prototype.toString.call(a)}c.exports=function(a){if("undefined"==typeof a)return[];if(null===a)return[null];if(a===window)return[window];if("string"==typeof a)return[a];if(d(a))return a;if("number"!=typeof a.length)return[a];if("function"==typeof a&&a instanceof Function)return[a];for(var b=[],c=0;c<a.length;c++)(Object.prototype.hasOwnProperty.call(a,c)||c in a)&&b.push(a[c]);return b.length?b:[]}}),a.register("javve-events/index.js",function(a,b){var c=b("event"),d=b("to-array");a.bind=function(a,b,e,f){a=d(a);for(var g=0;g<a.length;g++)c.bind(a[g],b,e,f)},a.unbind=function(a,b,e,f){a=d(a);for(var g=0;g<a.length;g++)c.unbind(a[g],b,e,f)}}),a.register("javve-get-by-class/index.js",function(a,b,c){c.exports=function(){return document.getElementsByClassName?function(a,b,c){return c?a.getElementsByClassName(b)[0]:a.getElementsByClassName(b)}:document.querySelector?function(a,b,c){return b="."+b,c?a.querySelector(b):a.querySelectorAll(b)}:function(a,b,c){var d=[],e="*";null==a&&(a=document);for(var f=a.getElementsByTagName(e),g=f.length,h=new RegExp("(^|\\s)"+b+"(\\s|$)"),i=0,j=0;g>i;i++)if(h.test(f[i].className)){if(c)return f[i];d[j]=f[i],j++}return d}}()}),a.register("javve-get-attribute/index.js",function(a,b,c){c.exports=function(a,b){var c=a.getAttribute&&a.getAttribute(b)||null;if(!c)for(var d=a.attributes,e=d.length,f=0;e>f;f++)void 0!==b[f]&&b[f].nodeName===b&&(c=b[f].nodeValue);return c}}),a.register("javve-natural-sort/index.js",function(a,b,c){c.exports=function(a,b,c){var d,e,f=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,g=/(^[ ]*|[ ]*$)/g,h=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,i=/^0x[0-9a-f]+$/i,j=/^0/,c=c||{},k=function(a){return c.insensitive&&(""+a).toLowerCase()||""+a},l=k(a).replace(g,"")||"",m=k(b).replace(g,"")||"",n=l.replace(f,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),o=m.replace(f,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=parseInt(l.match(i))||1!=n.length&&l.match(h)&&Date.parse(l),q=parseInt(m.match(i))||p&&m.match(h)&&Date.parse(m)||null,r=c.desc?-1:1;if(q){if(q>p)return-1*r;if(p>q)return 1*r}for(var s=0,t=Math.max(n.length,o.length);t>s;s++){if(d=!(n[s]||"").match(j)&&parseFloat(n[s])||n[s]||0,e=!(o[s]||"").match(j)&&parseFloat(o[s])||o[s]||0,isNaN(d)!==isNaN(e))return isNaN(d)?1:-1;if(typeof d!=typeof e&&(d+="",e+=""),e>d)return-1*r;if(d>e)return 1*r}return 0}}),a.register("javve-to-string/index.js",function(a,b,c){c.exports=function(a){return a=void 0===a?"":a,a=null===a?"":a,a=a.toString()}}),a.register("component-type/index.js",function(a,b,c){var d=Object.prototype.toString;c.exports=function(a){switch(d.call(a)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===a?"null":void 0===a?"undefined":a!==a?"nan":a&&1===a.nodeType?"element":typeof a.valueOf()}}),a.register("list.js/index.js",function(a,b,c){!function(a,d){"use strict";var e=a.document,f=b("get-by-class"),g=b("extend"),h=b("indexof"),i=function(a,c,i){var j,k=this,l=b("./src/item")(k),m=b("./src/add-async")(k),n=b("./src/parse")(k);j={start:function(){k.listClass="list",k.searchClass="search",k.sortClass="sort",k.page=200,k.i=1,k.items=[],k.visibleItems=[],k.matchingItems=[],k.searched=!1,k.filtered=!1,k.handlers={updated:[]},k.plugins={},k.helpers={getByClass:f,extend:g,indexOf:h},g(k,c),k.listContainer="string"==typeof a?e.getElementById(a):a,k.listContainer&&(k.list=f(k.listContainer,k.listClass,!0),k.templater=b("./src/templater")(k),k.search=b("./src/search")(k),k.filter=b("./src/filter")(k),k.sort=b("./src/sort")(k),this.items(),k.update(),this.plugins())},items:function(){n(k.list),i!==d&&k.add(i)},plugins:function(){for(var a=0;a<k.plugins.length;a++){var b=k.plugins[a];k[b.name]=b,b.init(k)}}},this.add=function(a,b){if(b)return m(a,b),void 0;var c=[],e=!1;a[0]===d&&(a=[a]);for(var f=0,g=a.length;g>f;f++){var h=null;a[f]instanceof l?(h=a[f],h.reload()):(e=k.items.length>k.page?!0:!1,h=new l(a[f],d,e)),k.items.push(h),c.push(h)}return k.update(),c},this.show=function(a,b){return this.i=a,this.page=b,k.update(),k},this.remove=function(a,b,c){for(var d=0,e=0,f=k.items.length;f>e;e++)k.items[e].values()[a]==b&&(k.templater.remove(k.items[e],c),k.items.splice(e,1),f--,e--,d++);return k.update(),d},this.get=function(a,b){for(var c=[],d=0,e=k.items.length;e>d;d++){var f=k.items[d];f.values()[a]==b&&c.push(f)}return c},this.size=function(){return k.items.length},this.clear=function(){return k.templater.clear(),k.items=[],k},this.on=function(a,b){return k.handlers[a].push(b),k},this.off=function(a,b){var c=k.handlers[a],d=h(c,b);return d>-1&&c.splice(d,1),k},this.trigger=function(a){for(var b=k.handlers[a].length;b--;)k.handlers[a][b](k);return k},this.reset={filter:function(){for(var a=k.items,b=a.length;b--;)a[b].filtered=!1;return k},search:function(){for(var a=k.items,b=a.length;b--;)a[b].found=!1;return k}},this.update=function(){var a=k.items,b=a.length;k.visibleItems=[],k.matchingItems=[],k.templater.clear();for(var c=0;b>c;c++)a[c].matching()&&k.matchingItems.length+1>=k.i&&k.visibleItems.length<k.page?(a[c].show(),k.visibleItems.push(a[c]),k.matchingItems.push(a[c])):a[c].matching()?(k.matchingItems.push(a[c]),a[c].hide()):a[c].hide();return k.trigger("updated"),k},j.start()};c.exports=i}(window)}),a.register("list.js/src/search.js",function(a,b,c){var d=b("events"),e=b("get-by-class"),f=b("to-string");c.exports=function(a){var b,c,g,h,i={resetList:function(){a.i=1,a.templater.clear(),h=void 0},setOptions:function(a){2==a.length&&a[1]instanceof Array?c=a[1]:2==a.length&&"function"==typeof a[1]?h=a[1]:3==a.length&&(c=a[1],h=a[2])},setColumns:function(){c=void 0===c?i.toArray(a.items[0].values()):c},setSearchString:function(a){a=f(a).toLowerCase(),a=a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),g=a},toArray:function(a){var b=[];for(var c in a)b.push(c);return b}},j={list:function(){for(var b=0,c=a.items.length;c>b;b++)j.item(a.items[b])},item:function(a){a.found=!1;for(var b=0,d=c.length;d>b;b++)if(j.values(a.values(),c[b]))return a.found=!0,void 0},values:function(a,c){return a.hasOwnProperty(c)&&(b=f(a[c]).toLowerCase(),""!==g&&b.search(g)>-1)?!0:!1},reset:function(){a.reset.search(),a.searched=!1}},k=function(b){return a.trigger("searchStart"),i.resetList(),i.setSearchString(b),i.setOptions(arguments),i.setColumns(),""===g?j.reset():(a.searched=!0,h?h(g,c):j.list()),a.update(),a.trigger("searchComplete"),a.visibleItems};return a.handlers.searchStart=a.handlers.searchStart||[],a.handlers.searchComplete=a.handlers.searchComplete||[],d.bind(e(a.listContainer,a.searchClass),"keyup",function(b){var c=b.target||b.srcElement,d=""===c.value&&!a.searched;d||k(c.value)}),d.bind(e(a.listContainer,a.searchClass),"input",function(a){var b=a.target||a.srcElement;""===b.value&&k("")}),a.helpers.toString=f,k}}),a.register("list.js/src/sort.js",function(a,b,c){var d=b("natural-sort"),e=b("classes"),f=b("events"),g=b("get-by-class"),h=b("get-attribute");c.exports=function(a){a.sortFunction=a.sortFunction||function(a,b,c){return c.desc="desc"==c.order?!0:!1,d(a.values()[c.valueName],b.values()[c.valueName],c)};var b={els:void 0,clear:function(){for(var a=0,c=b.els.length;c>a;a++)e(b.els[a]).remove("asc"),e(b.els[a]).remove("desc")},getOrder:function(a){var b=h(a,"data-order");return"asc"==b||"desc"==b?b:e(a).has("desc")?"asc":e(a).has("asc")?"desc":"asc"},getInSensitive:function(a,b){var c=h(a,"data-insensitive");b.insensitive="true"===c?!0:!1},setOrder:function(a){for(var c=0,d=b.els.length;d>c;c++){var f=b.els[c];if(h(f,"data-sort")===a.valueName){var g=h(f,"data-order");"asc"==g||"desc"==g?g==a.order&&e(f).add(a.order):e(f).add(a.order)}}}},c=function(){a.trigger("sortStart"),options={};var c=arguments[0].currentTarget||arguments[0].srcElement||void 0;c?(options.valueName=h(c,"data-sort"),b.getInSensitive(c,options),options.order=b.getOrder(c)):(options=arguments[1]||options,options.valueName=arguments[0],options.order=options.order||"asc",options.insensitive="undefined"==typeof options.insensitive?!0:options.insensitive),b.clear(),b.setOrder(options),options.sortFunction=options.sortFunction||a.sortFunction,a.items.sort(function(a,b){return options.sortFunction(a,b,options)}),a.update(),a.trigger("sortComplete")};return a.handlers.sortStart=a.handlers.sortStart||[],a.handlers.sortComplete=a.handlers.sortComplete||[],b.els=g(a.listContainer,a.sortClass),f.bind(b.els,"click",c),a.on("searchStart",b.clear),a.on("filterStart",b.clear),a.helpers.classes=e,a.helpers.naturalSort=d,a.helpers.events=f,a.helpers.getAttribute=h,c}}),a.register("list.js/src/item.js",function(a,b,c){c.exports=function(a){return function(b,c,d){var e=this;this._values={},this.found=!1,this.filtered=!1;var f=function(b,c,d){if(void 0===c)d?e.values(b,d):e.values(b);else{e.elm=c;var f=a.templater.get(e,b);e.values(f)}};this.values=function(b,c){if(void 0===b)return e._values;for(var d in b)e._values[d]=b[d];c!==!0&&a.templater.set(e,e.values())},this.show=function(){a.templater.show(e)},this.hide=function(){a.templater.hide(e)},this.matching=function(){return a.filtered&&a.searched&&e.found&&e.filtered||a.filtered&&!a.searched&&e.filtered||!a.filtered&&a.searched&&e.found||!a.filtered&&!a.searched},this.visible=function(){return e.elm.parentNode==a.list?!0:!1},f(b,c,d)}}}),a.register("list.js/src/templater.js",function(a,b,c){var d=b("get-by-class"),e=function(a){function b(b){if(void 0===b){for(var c=a.list.childNodes,d=0,e=c.length;e>d;d++)if(void 0===c[d].data)return c[d];return null}if(-1!==b.indexOf("<")){var f=document.createElement("div");return f.innerHTML=b,f.firstChild}return document.getElementById(a.item)}var c=b(a.item),e=this;this.get=function(a,b){e.create(a);for(var c={},f=0,g=b.length;g>f;f++){var h=d(a.elm,b[f],!0);c[b[f]]=h?h.innerHTML:""}return c},this.set=function(a,b){if(!e.create(a))for(var c in b)if(b.hasOwnProperty(c)){var f=d(a.elm,c,!0);f&&("IMG"===f.tagName&&""!==b[c]?f.src=b[c]:f.innerHTML=b[c])}},this.create=function(a){if(void 0!==a.elm)return!1;var b=c.cloneNode(!0);return b.removeAttribute("id"),a.elm=b,e.set(a,a.values()),!0},this.remove=function(b){a.list.removeChild(b.elm)},this.show=function(b){e.create(b),a.list.appendChild(b.elm)},this.hide=function(b){void 0!==b.elm&&b.elm.parentNode===a.list&&a.list.removeChild(b.elm)},this.clear=function(){if(a.list.hasChildNodes())for(;a.list.childNodes.length>=1;)a.list.removeChild(a.list.firstChild)}};c.exports=function(a){return new e(a)}}),a.register("list.js/src/filter.js",function(a,b,c){c.exports=function(a){return a.handlers.filterStart=a.handlers.filterStart||[],a.handlers.filterComplete=a.handlers.filterComplete||[],function(b){if(a.trigger("filterStart"),a.i=1,a.reset.filter(),void 0===b)a.filtered=!1;else{a.filtered=!0;for(var c=a.items,d=0,e=c.length;e>d;d++){var f=c[d];f.filtered=b(f)?!0:!1}}return a.update(),a.trigger("filterComplete"),a.visibleItems}}}),a.register("list.js/src/add-async.js",function(a,b,c){c.exports=function(a){return function(b,c,d){var e=b.splice(0,100);d=d||[],d=d.concat(a.add(e)),b.length>0?setTimeout(function(){addAsync(b,c,d)},10):(a.update(),c(d))}}}),a.register("list.js/src/parse.js",function(a,b,c){c.exports=function(a){var c=b("./item")(a),d=function(a){for(var b=a.childNodes,c=[],d=0,e=b.length;e>d;d++)void 0===b[d].data&&c.push(b[d]);return c},e=function(b,d){for(var e=0,f=b.length;f>e;e++)a.items.push(new c(d,b[e]))},f=function(b,c){var d=b.splice(0,100);e(d,c),b.length>0?setTimeout(function(){init.items.indexAsync(b,c)},10):a.update()};return function(){var b=d(a.list),c=a.valueNames;a.indexAsync?f(b,c):e(b,c)}}}),a.alias("component-classes/index.js","list.js/deps/classes/index.js"),a.alias("component-classes/index.js","classes/index.js"),a.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),a.alias("segmentio-extend/index.js","list.js/deps/extend/index.js"),a.alias("segmentio-extend/index.js","extend/index.js"),a.alias("component-indexof/index.js","list.js/deps/indexof/index.js"),a.alias("component-indexof/index.js","indexof/index.js"),a.alias("javve-events/index.js","list.js/deps/events/index.js"),a.alias("javve-events/index.js","events/index.js"),a.alias("component-event/index.js","javve-events/deps/event/index.js"),a.alias("timoxley-to-array/index.js","javve-events/deps/to-array/index.js"),a.alias("javve-get-by-class/index.js","list.js/deps/get-by-class/index.js"),a.alias("javve-get-by-class/index.js","get-by-class/index.js"),a.alias("javve-get-attribute/index.js","list.js/deps/get-attribute/index.js"),a.alias("javve-get-attribute/index.js","get-attribute/index.js"),a.alias("javve-natural-sort/index.js","list.js/deps/natural-sort/index.js"),a.alias("javve-natural-sort/index.js","natural-sort/index.js"),a.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),a.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),a.alias("javve-to-string/index.js","to-string/index.js"),a.alias("javve-to-string/index.js","javve-to-string/index.js"),a.alias("component-type/index.js","list.js/deps/type/index.js"),a.alias("component-type/index.js","type/index.js"),"object"==typeof exports?module.exports=a("list.js"):"function"==typeof define&&define.amd?define(function(){return a("list.js")}):this.List=a("list.js")}();/*! jsUri v1.1.1 | https://github.com/derek-watson/jsUri */
var Query=function(a){"use strict";var b=function(a){var b=[],c,d,e,f;if(typeof a=="undefined"||a===null||a==="")return b;a.indexOf("?")===0&&(a=a.substring(1)),d=a.toString().split(/[&;]/);for(c=0;c<d.length;c++)e=d[c],f=e.split("="),b.push([f[0],f[1]]);return b},c=b(a),d=function(){var a="",b,d;for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=d.join("=");return a.length>0?"?"+a:a},e=function(a){a=decodeURIComponent(a),a=a.replace("+"," ");return a},f=function(a){var b,d;for(d=0;d<c.length;d++){b=c[d];if(e(a)===e(b[0]))return b[1]}},g=function(a){var b=[],d,f;for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var d=[],f,g,h,i;for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(arguments.length===1&&!h||arguments.length===2&&!h&&!i)&&d.push(g);c=d;return this},i=function(a,b,d){arguments.length===3&&d!==-1?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]);return this},j=function(a,b,d){var f=-1,g,j;if(arguments.length===3){for(g=0;g<c.length;g++){j=c[g];if(e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++){j=c[g];if(e(j[0])===e(a)){f=g;break}}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},Uri=function(a){"use strict";var b=!1,c=function(a){var c={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=c[b?"strict":"loose"].exec(a),g={},h=14;while(h--)g[d[h]]=f[h]||"";g[e.name]={},g[d[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)});return g},d=c(a||""),e=new Query(d.query),f=function(a){typeof a!="undefined"&&(d.protocol=a);return d.protocol},g=null,h=function(a){typeof a!="undefined"&&(g=a);return g===null?d.source.indexOf("//")!==-1:g},i=function(a){typeof a!="undefined"&&(d.userInfo=a);return d.userInfo},j=function(a){typeof a!="undefined"&&(d.host=a);return d.host},k=function(a){typeof a!="undefined"&&(d.port=a);return d.port},l=function(a){typeof a!="undefined"&&(d.path=a);return d.path},m=function(a){typeof a!="undefined"&&(e=new Query(a));return e},n=function(a){typeof a!="undefined"&&(d.anchor=a);return d.anchor},o=function(a){f(a);return this},p=function(a){h(a);return this},q=function(a){i(a);return this},r=function(a){j(a);return this},s=function(a){k(a);return this},t=function(a){l(a);return this},u=function(a){m(a);return this},v=function(a){n(a);return this},w=function(a){return m().getParamValue(a)},x=function(a){return m().getParamValues(a)},y=function(a,b){arguments.length===2?m().deleteParam(a,b):m().deleteParam(a);return this},z=function(a,b,c){arguments.length===3?m().addParam(a,b,c):m().addParam(a,b);return this},A=function(a,b,c){arguments.length===3?m().replaceParam(a,b,c):m().replaceParam(a,b);return this},B=function(){var a="",b=function(a){return a!==null&&a!==""};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):h()&&b(j())&&(a+="//"),b(i())&&b(j())&&(a+=i(),i().indexOf("@")!==i().length-1&&(a+="@")),b(j())&&(a+=j(),b(k())&&(a+=":"+k())),b(l())?a+=l():b(j())&&(b(m().toString())||b(n()))&&(a+="/"),b(m().toString())&&(m().toString().indexOf("?")!==0&&(a+="?"),a+=m().toString()),b(n())&&(n().indexOf("#")!==0&&(a+="#"),a+=n());return a},C=function(){return new Uri(B())};return{protocol:f,hasAuthorityPrefix:h,userInfo:i,host:j,port:k,path:l,query:m,anchor:n,setProtocol:o,setHasAuthorityPrefix:p,setUserInfo:q,setHost:r,setPort:s,setPath:t,setQuery:u,setAnchor:v,getQueryParamValue:w,getQueryParamValues:x,deleteQueryParam:y,addQueryParam:z,replaceQueryParam:A,toString:B,clone:C}},jsUri=Uri;"use strict";if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e}}var IMGPreloader=function(a){this._unprocessedImagesByHost={};this._processingImagesByHost={};this._concurrentConnectionsPerHost=100};IMGPreloader.prototype.processQueue=function a(){var a,b=0,c;for(a in this._unprocessedImagesByHost){if(!this._unprocessedImagesByHost.hasOwnProperty(a)){continue}if(this._processingImagesByHost[a]===undefined){this._processingImagesByHost[a]=[]}if(this._processingImagesByHost[a].length<this._concurrentConnectionsPerHost){for(;b<this._concurrentConnectionsPerHost-this._processingImagesByHost[a].length;b++){c=this._unprocessedImagesByHost[a].shift();if(c!==undefined){this._processingImagesByHost[a].push(c);var d=new Image;d.src=c;if(d.complete===true){this.removeProcessedItem(c);this.processQueue()}else{d.addEventListener("load",function(a){this.removeProcessedItem(a.target.src);this.processQueue()}.bind(this));d.addEventListener("error",function(a){this.removeProcessedItem(a.target.src,true);this.processQueue()}.bind(this))}}}}}};IMGPreloader.prototype.removeProcessedItem=function b(a,c){var d=0;var e=new Uri(a);var f=e.host();var g=this._processingImagesByHost[f];if(!g){return}var h=g.length;for(;d<h;d++){if(g[d]===a){g.splice(d,1)}}};IMGPreloader.prototype.cleanQueue=function c(){var a;for(a in this._unprocessedImagesByHost){if(this._unprocessedImagesByHost.hasOwnProperty(a)&&this._unprocessedImagesByHost[a].length===0){delete this._unprocessedImagesByHost[a]}}};IMGPreloader.prototype.push=function d(a){if(a){var b=new Uri(a);if(this._unprocessedImagesByHost[b.host()]===undefined){this._unprocessedImagesByHost[b.host()]=[]}this._unprocessedImagesByHost[b.host()].push(a);this.cleanQueue();this.processQueue()}};IMGPreloader.prototype.push_many=function e(a){var b=a.length,c=0;if(b>0){for(;c<b;c++){this.push(a[c])}}};var Chat=function(a,b){this.socket=a;this.isTeacher=b};Chat.prototype.sendMessage=function(a,b){var c={text:b};this.socket.emit("message",c)};Chat.prototype.changeRoom=function(a){this.socket.emit("join",{newRoom:a})};Chat.prototype.toServer=function(a){if(this.isTeacher){this.socket.emit("teacherToServer",a)}else{this.socket.emit("studentToServer",a)}};Chat.prototype.studentToServer=function(a){this.socket.emit("studentToServer",a)};Chat.prototype.teacherToServer=function(a){this.socket.emit("teacherToServer",a)};var imgPreloader=new IMGPreloader;var socket;var socketQuery;jq(document).ready(function(){jq(function(){FastClick.attach(document.body)});sessionData=JSON.parse(jq("#data-session").html());var a=sessionData.idSession;var b=sessionData.path;var c=sessionData.PIN;var d=sessionData.isTeacher;var e=sessionData.port;var f=sessionData.activities;window.isPreview=sessionData.isPreview;window.isLoggedIn=sessionData.isLoggedIn;window.idLesson=sessionData.idLesson;if(sessionData.isDevelopment){window.isDevelopment=sessionData.isDevelopment}if(!f){document.isActivitiesNull=true}window.isTeacher=d;window.idSession=a;window.idPath=b;window.appToServer=n;window.pluginToServer=m;window.sendPing=p;if(window.isPreview){}else{var g=d?"idSessionTeacher="+a:"idSession="+a;var h=getUrlVars();var i=h.name;if(!i){i=getCookie("username").trim()}else{g+="&isTestUser=true"}if(i&&i!=""){g+="&username="+i}if(e){var j=window.location.protocol+"//socket."+window.location.hostname+":"+e;socket=io.connect(j,{query:g})}else{var j=window.location.origin;socket=io.connect(j,{query:g})}var k=new Chat(socket,d);var l;socket.on("connect",function(){document.socketID=socket.io.engine.id;setTimeout(function(){jq("#myModal").modal("hide");jq(".modal-backdrop").remove()},1e3);setTimeout(function(){socket.emit("ping",{t:(new Date).valueOf()})},500);clearInterval(l);l=setInterval(function(){socket.emit("ping",{t:(new Date).valueOf()})},60*1e3*1);checkLessonReady()});socket.on("disconnect",function(){Messenger().post({message:"Disconnected",type:"error",id:"connection",hideAfter:10,showCloseButton:true});clearInterval(l)});socket.on("pong",function(a){var b=(new Date).valueOf();var c=b-a.timeSentByClient;var d=a.timeServer+c/2;difference=d-b;document.timeDifference=difference});socket.on("nameResult",function(a){var b;if(a.success){b="You are now known as "+a.name+"."}else{b=a.message}});socket.on("joinResult",function(b){document.socketID=b.customID;if(b.room=="Lobby"){if(d){var c={type:"TeacherJoinSession",idSession:a};jq(document).trigger("teacherToServer",{detail:c})}else{n("StudentJoinSession",{idSession:a})}}else if(b.room===a){var c={type:"StudentJoinSessionSuccess",idSession:a};jq(document).trigger("serverToStudent",{detail:c});if(!d){var e=b.customName;if(!b.isRandom){randomNameFromServer=e;updateNameUI(e)}else{randomNameFromServer=e;setTimeout("changeUsername()",300)}if(!document.student){document.student={}}document.student.name=randomNameFromServer}var f="Joined Classroom as Student!";if(d){f="Joined Classroom as Teacher!"}Messenger().post({message:f,type:"success",id:"connection",hideAfter:5,showCloseButton:true})}});socket.on("serverToStudent",function(a){jq(document).trigger("serverToStudent",{detail:a})});socket.on("serverToTeacher",function(a){jq(document).trigger("serverToTeacher",{detail:a})});socket.on("ServerToApp",function(a){if(a.type=="ServerToPlugin"){console.log("ServerToPlugin"+a.pluginName+": %O",a);jq(document).trigger("ServerToPlugin"+a.pluginName,{detail:a});var b=jq("#frameMiniApp");if(b.length>0){if(b[0].contentWindow.$){var c=b[0].contentWindow.$(b[0].contentWindow.document);if(c.length>0){c.trigger("ServerToPlugin"+a.pluginName,{detail:a})}}}if(a.pluginName==="WALL_STUDENT"||a.pluginName==="GROUPER"){b=jq("#frameDialog");if(b.length>0){if(b[0].contentWindow.$){var c=b[0].contentWindow.$(b[0].contentWindow.document);if(c.length>0){c.trigger("ServerToPlugin"+a.pluginName,{detail:a})}}}}}else{console.log("Server To App: %O",a);jq(document).trigger("ServerToApp",{detail:a})}});jq(document).on("teacherToServer",function(a,b){k.teacherToServer(JSON.stringify(b.detail))});jq(document).on("studentToServer",function(a,b){k.studentToServer(JSON.stringify(b.detail))})}function m(a,b,c){var d={type:"PluginToServer",pluginName:a,pluginMessageType:b,data:c};console.log("pluginToServer"+a+": %O",d);d=JSON.stringify(d);o(d)}function n(a,b){var c={type:a,data:b};console.log("appToServer: %O",c);c=JSON.stringify(c);o(c)}function o(a){if(window.isPreview){return}if(window.isTeacher)k.teacherToServer(a);else k.studentToServer(a)}function p(){socket.emit("ping",{t:(new Date).valueOf()})}jq(document).on("ServerToPlugin"+"STUDENT",function(a,b){var c=b.detail;switch(c.pluginMessageType){case"StudentSetNameResponse":updateUsername(c.data);break}});jq("#open-left").click(function(a){a.preventDefault();if(snapper.state().state==="left"){snapper.close()}else{snapper.open("left")}});jq(".open-right").click(function(a){a.preventDefault();if(snapper.state().state==="right"){snapper.close()}else{snapper.open("right")}});jq("#menuChangeName").click(function(a){a.preventDefault();usernameSetBefore=false;changeUsername()});jq("body").keydown(function(a){switch(a.keyCode){case 37:case 33:var b=$(".js-question-previous")[0];if(b){if($(b).is(":visible"))b.click()}break;case 39:case 34:var b=$(".js-question-next")[0];if(b)if($(b).is(":visible"))b.click();break}});jq(".js-fullscreen").click(function(a){a.preventDefault();switchFullScreen();snapper.close()});jq(".js-nav-adventure").click(function(a){jq("li").each(function(){jq(this).removeClass("nav-bar-active")});jq(".js-nav-adventure").parent().addClass("nav-bar-active")});jq(".js-nav-campfire").click(function(a){jq("li").each(function(){jq(this).removeClass("nav-bar-active")});jq(".js-nav-campfire").parent().addClass("nav-bar-active")});jq(".js-nav-teststudents").click(function(a){jq("li").each(function(){jq(this).removeClass("nav-bar-active")});jq(".js-nav-teststudents").parent().addClass("nav-bar-active")});jq(".js-nav-signout").click(function(a){jq("li").each(function(){jq(this).removeClass("nav-bar-active")});jq(".js-nav-signout").parent().addClass("nav-bar-active")})});function getCookie(a){var b=a+"=";var c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d].trim();if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return""}var randomNameFromServer;function changeUsername(a){var b;if(document.student&&document.student.name)b=document.student.name;if(a)b=a;if(!b||b===""){b=randomNameFromServer?randomNameFromServer:""}bootbox.hideAll();bootbox.prompt({title:"Enter your name",value:b,callback:function(a){if(a===null||a===""||a===b){if(a===null||a===""){a=randomNameFromServer?randomNameFromServer:""}updateNameUI(a);setCookie("username="+a)}else{pluginToServer("STUDENT","StudentSetName",{name:a})}}})}var usernameSetBefore=false;function updateUsername(a){updateNameUI(a.name);if(a.success){document.student.name=a.name;if(getCookie("username").trim()===a.name){setCookie("username="+a.name);return}setCookie("username="+a.name);Messenger().post({message:"Changed name: "+a.name,type:"success",hideAfter:5,showCloseButton:true});usernameSetBefore=true}else{if(!usernameSetBefore){changeUsername(a.name)}}}document.student={};function checkLessonReady(){if(window.isTeacher&&document.isActivitiesNull){var a={type:"UrlUpdate",title:"Lesson Picker",resourceURL:"/plugins/lessonPicker/lessonPickerTeacher.html"};setTimeout(function(){jq(document).trigger("MiniApp",{detail:a})},1e3)}}function switchFullScreen(){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement){exitFullscreen()}else{enterFullscreen()}}function enterFullscreen(){var a=document.documentElement;if(a.requestFullscreen){a.requestFullscreen()}else if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else if(a.msRequestFullscreen){a.msRequestFullscreen()}}function exitFullscreen(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}function getUrlVars(a){var b={};var c=decodeURIComponent(document.location.href);if(a){c=decodeURIComponent(a.location.href)}if(c.indexOf("?")<0){return b}var d=c.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d});return b}function updateNameUI(a){jq("#menuName").html(a);jq("#nameHeader").html(a)}function setCookie(a){var b=new Date;var c=10;b.setTime(b.getTime()+c*24*60*60*1e3);var d="expires="+b.toGMTString();document.cookie=a+";domain="+window.location.hostname+";path=/;"+d+";"}(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)jq/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone");function initPluginHandler(){var a="PLUGIN_HANDLER";jq(document).ready(function(){jq(document).on("ServerToPlugin"+a,function(a,c){console.log("ServerToPlugin Received:, %O",c);var h=c.detail;switch(h.pluginMessageType){case"TriggerPlugin":d(h.data);break;case"TriggerPluginNotification":b(h.data);break;case"ClosePlugin":e(h.data);break;case"ClosePluginNotification":f(h.data);break;case"ShowMessage":g(h.data);break;case"ActivityChanged":i(h.data);break}})});document.plugin={};function b(b){document.plugin.pluginName=b.pluginName;document.plugin.isActive=true;var c={type:"UpdatePluginStatus",pluginName:b.pluginName,active:true};jq(document).trigger("MiniApp",{detail:c});jq(document).trigger("PluginNotification",{detail:c});var d=jq("#frameMiniApp");if(d.length>0){if(d[0].contentWindow.$){var e=d[0].contentWindow.$(d[0].contentWindow.document);if(e.length>0){e.trigger("PluginStatus",{detail:c})}}}var f;f=Messenger().post({message:b.pluginTitle+" running",type:"info",hideAfter:5e4,id:a,actions:{retry:{label:"Open",action:function(){if(document.pluginListenerReady){console.log(b.pluginName);var a={type:"ShowPlugin",pluginName:b.pluginName,isLocked:false};jq(document).trigger("MiniApp",{detail:a})}}},cancel:{label:"End Campfire App",action:function(){console.log(b);h(b.pluginName);f.hide()}}}})}var c;function d(a){document.pluginHandler={};document.pluginHandler.isLocked=true;console.log("### document.pluginListenerReady"+document.pluginListenerReady);if(document.pluginListenerReady){bootbox.hideAll();console.log("Listener ready");var b={type:"UrlUpdate",title:a.pluginTitle,resourceURL:a.pluginURL,isLocked:a.isLocked};jq(document).trigger("MiniApp",{detail:b})}else{console.log("Listener not ready");c=a}}document.pluginHandlerCheck=function(){console.log("PluginHandlerCheck called by app when route ready");var a=c;if(!a){return}else{var b={type:"UrlUpdate",title:a.pluginTitle,resourceURL:a.pluginURL,isLocked:a.isLocked};setTimeout(function(){jq(document).trigger("MiniApp",{detail:b});c=null},1500)}};function e(a){if(document.pluginHandler){document.pluginHandler.isLocked=false}jq(document).off("ServerToPlugin"+a.pluginName);var b={type:"Exit",title:a.pluginTitle,resourceURL:a.pluginURL,isLocked:a.isLocked};jq(document).trigger("MiniApp",{detail:b});bootbox.hideAll()}function f(b){document.plugin={};var c={type:"UpdatePluginStatus",pluginName:b.pluginName,active:false};jq(document).trigger("MiniApp",{detail:c});jq(document).trigger("PluginNotification",{detail:c});var d=jq("#frameMiniApp");if(d.length>0){if(d[0].contentWindow.$){var e=d[0].contentWindow.$(d[0].contentWindow.document);if(e.length>0){e.trigger("PluginStatus",{detail:c})}}}if(document.pluginHandler){document.pluginHandler.isLocked=false}var f;f=Messenger().post({message:b.pluginTitle+" ended",type:"success",hideAfter:5,id:a})}function g(a){Messenger().post({message:a.message,type:"success",hideAfter:10,showCloseButton:true})}function h(b){if(!isTeacher){return}var c={pluginName:b};pluginToServer(a,"ExitPlugin",c)}function i(a){var b=a.idLesson;var c=document.location.href.replace(location.hash,"");console.log(c);if(window.location.href===c){location.reload(true)}else{window.location.href=c}}}initPluginHandler();var PLUGIN_NAME="GROUPER";jq(document).ready(function(){if(true){jq(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){var c=b.detail;switch(c.pluginMessageType){case"StudentJoin":break;case"StudentChosen":break;case"GetStudentsResponse":break;case"StudentGrouping":processStudentGrouping(c.data);break;case"StudentPingGroup":processStudentPingGroupForTeacher(c.data);break;case"StudentUpdateStatus":processStudentUpdateStatus(c.data);break}});jq("#manageClass").click(function(){clickManageGrouping()})}});function processStudentUpdateStatus(a){var b=a.studentID;var c=a.active;if(c){jq("#student"+b).css("background-color","")}else{jq("#student"+b).css("background-color","gray")}}function processGetStudentsResponse(a){var b=a.studentsData;var c="<ul>";_.each(b,function(a){c=c+"<li>"+a.studentName+"</li>"});c=c+"</ul>";jq("#groupAll").html(c);jq("#number-of-students").html(_.size(b))}function processStudentPingStudent(a){var b=a.studentName;var c=document.Messenger().post({message:"Invitation from "+b,actions:{retry:{label:"Accept",phrase:"Retrying TIME",auto:true,delay:10,action:function(){parent.pluginToServer(PLUGIN_NAME,"StudentPingStudent",{studentID:a.studentID})}},cancel:{label:"Decline",action:function(){return c.cancel()}}}})}function processStudentPingGroup(a){console.log("Student Ping");var b=a.groupNumber;var c;switch(b){case 0:c="skyblue";break;case 1:c="LightGoldenRodYellow";break;case 2:c="lightgreen";break;case 3:c="pink";break}jq("#SURFACE").css("background","#FF0000");setTimeout(function(){jq("#SURFACE").css("background",c)},200)}function processStudentPingGroupForTeacher(a){var b=a.groupNumber;switch(b){case 0:originalColor="skyblue";break;case 1:originalColor="LightGoldenRodYellow";break;case 2:originalColor="lightgreen";break;case 3:originalColor="pink";break}jq("#group"+(b+1)).css("background","#FF0000");setTimeout(function(){jq("#group"+(b+1)).css("background",originalColor)},200)}function processStudentGrouping(a){jq("#divName").html("<h1>"+document.student.name+"</h1>");var b=a.groups;var c=a.numberOfGroups;var d=a.groupType;if(!document.students)document.students={};document.students.grouping=b;document.students.numberOfGroups=c;document.students.groupType=d;updateGroupMenu()}function updateGroupMenu(){var a="";var b=0;_.each(document.students.grouping,function(c,d){if(c.length===0)return;var e;if(document.students.numberOfGroups&&document.students.numberOfGroups>1){e='<a href="#" onclick="clickGroupList('+d+');"><h4 id="menuGroupNumber" class="group'+(d+1)+'">Group '+(d+1)+"</h4></a>"}else{e='<h4 id="menuGroupNumber" class="group'+(d+1)+'"></h4>'}e+='<ul class="list group'+(d+1)+'">';_.each(c,function(a){b++;e+="<li id='student"+a.studentID+"' style=\"background-color:"+(a.active?'""':"gray")+'"><a href="#" onclick="event.preventDefault();clickStudentList(\''+a.studentID+'\');" class="name">'+a.studentName.trunc(15,true)+'<div class="score" id="score'+a.studentID+'" style="float:right;text-indent:0px">'+0+'</div><div id="scoreValue'+a.studentID+'" class="scoreValue" style="display:none"></div></a> </li>';console.log(a)});e+="</ul>";a+=e});var c=jq("#regionGroupList");c.html(a);if(document.studentsScoreData){_.each(document.studentsScoreData,function(a){var b=getRepString(a.studentScore);jq("#score"+a.studentID).html(b)})}jq("#number-of-students").html(b);var d={valueNames:["name","scoreValue"]};if(b>0){var e=new List("divList",d);e.sort("scoreValue",{order:"desc"})}}function clickStudentList(a){var b=getStudentName(a);var c={type:"UrlUpdate",title:b,resourceURL:"../../plugins/wallStudent/wallStudent.html?studentID="+a+"&studentName="+b};jq(document).trigger("DialogUrl",{detail:c})}function clickGroupList(a){var b={type:"UrlUpdate",title:"Group "+(a+1),resourceURL:"../../plugins/wallGroup/wallGroup.html?groupNumber="+a};jq(document).trigger("DialogUrl",{detail:b})}function getStudentName(a){var b=_.flatten(document.students.grouping);var c;_.each(b,function(b){if(b.studentID===a){c=b.studentName}});return c}function clickManageGrouping(){var a={type:"UrlUpdate",title:"Manage",resourceURL:"../../plugins/grouper/grouperManage.html"};jq(document).trigger("DialogUrl",{detail:a})}function getRepString(a){a=a+"";if(a<1e3){return a}if(a<1e4){return a.charAt(0)+","+a.substring(1)}return(a/1e3).toFixed(a%1e3!=0)+"k"}String.prototype.trunc=String.prototype.trunc||function(a){return this.length>a?this.substr(0,a-1)+"&hellip;":this};(function(){var a="SCORE";jq(document).ready(function(){if(isTeacher){jq(document).on("ServerToPlugin"+a,function(a,b){var e=b.detail;switch(e.pluginMessageType){case"StudentScoreAll":d(e.data);break;case"StudentScoreOthersUpdate":c(e.data);break}})}else{jq(document).on("ServerToPlugin"+a,function(a,e){var f=e.detail;switch(f.pluginMessageType){case"StudentScoreUpdate":b(f.data);break;case"StudentScoreOthersUpdate":c(f.data);break;case"StudentScoreAll":d(f.data);break}})}});function b(a){var b=a.score;odometer.innerHTML=b;if(a.pointsAdded>0){var c=jq("#pointsAdded");c.html("+"+a.pointsAdded);c.addClass("fadeOut animated");c.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){c.html("");c.removeClass("fadeOut animated")})}var d=e(b);jq("#scoreValue"+document.socketID).html(b);jq("#score"+document.socketID).html(d);var f=_.find(document.studentsScoreData,function(a){return a.studentID===document.socketID});if(f){f.studentScore=b}else{if(!document.studentsScoreData){document.studentsScoreData=[]}document.studentsScoreData.push({studentID:document.socketID,studentScore:b})}var g={valueNames:["name","score"]};var h=new List("divList",g);h.sort("score",{order:"desc"})}function c(a){var b=a.studentScore;var c=a.studentID;var d=e(b);jq("#scoreValue"+c).html(b);jq("#score"+c).html(d);var f=_.findWhere(document.studentsScoreData,{studentID:c});if(f){f.studentScore=b}else{document.studentsScoreData.push({studentID:c,studentScore:b})}var g={valueNames:["name","scoreValue"]};var h=new List("divList",g);h.sort("scoreValue",{order:"desc"})}function d(a){var b=a.studentsScoreData;if(!document.studentsScoreData){document.studentsScoreData=[]}_.each(b,function(a){document.studentsScoreData.push(a)});var c=false;_.each(b,function(a){var b=e(a.studentScore);jq("#scoreValue"+a.studentID).html(a.studentScore);jq("#score"+a.studentID).html(b);if(jq("#score"+a.studentID).length){c=true}});var d={valueNames:["name","scoreValue"]};if(c){var f=new List("divList",d);f.sort("scoreValue",{order:"desc"})}}function e(a){a=a+"";if(a<1e3){return a}if(a<1e4){return a.charAt(0)+","+a.substring(1)}return(a/1e3).toFixed(a%1e3!=0)+"k"}})();var isAuto=false;jq(document).ready(function(){var a=getUrlVars(document);console.log(a);if(a&&a.auto){isAuto=true;setTimeout(function(){introStartDemoAutoStartTestStudents()},1500)}jq(".btn-intro").click(function(a){a.preventDefault();if(isAuto){introStartDemoAutoStartTestStudents()}else{introStartGuide()}})});function introStartGuide(){snapper.close();var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,overlayOpacity:1,skipLabel:"Exit",steps:[{intro:"<h4>Teacher's View Guide</h4>"},{element:document.querySelector(".path-title"),intro:"<div class='center'><strong>Classroom Address</strong><br>Your students may join this classroom on their mobile devices</div>",position:"bottom"},{element:document.querySelector("#adventure-view"),intro:"<div class='center'><strong>Current Adventure assigned to this classroom</strong><br></div>",position:"top"},{element:document.querySelector(".js-show-plugins"),intro:"<div class='center'><strong>Campfire Apps</strong><br>Students getting bored? <br> Trigger an interactive app on students' devices</div>",position:"left"},{element:document.querySelector(".plugin-types-area .row:nth-child(1)"),intro:"<div class='center'>Get students' responses in real-time</div>",position:"left"},{element:document.querySelector(".plugin-types-area .row:nth-child(2)"),intro:"<div class='center'>Select a student to answer your question</div>",position:"left"},{element:document.querySelector(".plugin-types-area .row:nth-child(3)"),intro:"<div class='center'>Fun activities with your Word Lists</div>",position:"left"},{element:document.querySelector("#manageClass"),intro:"<strong>Manage student groupings</strong><br>"}]});a.onbeforechange(function(a){if(!a){return}if(jq(a).is(".plugin-types-area .row:nth-child(1)")){jq(".js-show-plugins").click()}else if(a.id==="open-apps"){snapper.close();location.href="#campfire-apps"}else if(a.id==="open-adventure"){snapper.close();location.href="#adventures"}else if(a.id==="manageClass"){snapper.open("right")}else{snapper.close()}});a.oncomplete(function(){snapper.close()});a.onexit(function(){snapper.close()});a.start()}function introStartDemoAutoStartTestStudents(){snapper.close();var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<h3> Teacher's View</h3><br><h4>This is your <b>Adventure Map</h4>"},{intro:"<h3> Teacher's View</h3><br><h4>For this demo, we will <br><b>simulate 2 </b> students</h4>"},{element:document.querySelector("#open-left"),intro:"<h3>Menu</h3>"},{element:document.querySelector(".js-nav-teststudents"),intro:"<h3> Test Students' View</h3>"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){}else{if(jq(b).hasClass("js-nav-teststudents")){snapper.open("left");jq(b).addClass("animated flash");c=2e3}else if(jq(b)[0].id==="open-left"){jq(b).addClass("animated flash");c=1500}else{snapper.close();c=3500}}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){jq(".js-nav-teststudents").parent().addClass("nav-bar-active");window.location.href=window.idPath+"/teststudents/2?auto=true"});a.onexit(function(){snapper.close()});a.start()}function introStartDemoCampfireApps(){snapper.close();var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector("#open-apps"),intro:"<h4>Campfire Apps</h4>"}]});a.onbeforechange(function(b){var c=1100;if(b.id==="open-apps"){c=2e3;setTimeout(function(){location.href=location.protocol+"//"+location.host+location.pathname+"#campfire-apps"},1e3)}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoCampfireAppsOpen(a){var b=introJs();b.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(a).parentElement,intro:"<h4>Open Campfire App</h4>"}]});b.onbeforechange(function(a){setTimeout(function(){b.nextStep();a.click()},2e3)});b.oncomplete(function(){parent.demoNextStep()});b.onexit(function(){});b.start()}function introStartDemoAdventureMapIntroduction(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<div class='center'><h3>Teacher's Adventure Map</h3></div>"}]});a.onbeforechange(function(b){console.log("intro");var c=1500;setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){console.log("next step");parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapCheckRunningApps(){var a=jq(".messenger-phrase").next();console.log("action "+a);if(jq(a[2]).text()==="End Campfire App"){a[2].click()}parent.demoNextStep()}function introStartDemoAdventureMapStart(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".messenger"),intro:"<div class='center'><h2>Activate Sync Slides</h2></div>",position:"top"},{element:document.querySelectorAll(".fa-file-image-o")[3],intro:"<div class='center'><h3>Adventure Checkpoint</h3></div>"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){}else{if(jq(b).find(".messenger-phrase").length>0){var d=jq(b).find(".messenger-phrase");_.each(d,function(a){if(jq(a).next().text()==="Activate"){jq(a).next().addClass("animated flash");console.log("activate it");setTimeout(function(){jq(a).next()[0].click()},1e3)}});c=1e3}else if(jq(b).hasClass("fa-file-image-o")){console.log("media file");setTimeout(function(){jq(b).closest(".js-move").mousedown();jq(b).closest(".js-move").mouseup()},2e3);c=2e3}else{snapper.close();c=1e3}}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){setTimeout(function(){parent.demoNextStep()},2e3)});a.onexit(function(){});a.start()}function introStartDemoAdventureMapDialog(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".modal-dialog"),intro:"<div class='center' ><h3>Choose one element</h3><div>"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){return}else{if(jq(b).hasClass("modal-dialog")){jq(jq(b).find(".js-show")[0].offsetParent).addClass("animated fadeIn");setTimeout(function(){jq(b).find(".js-show").click()},1e3);c=1e3}else{snapper.close();c=1e3}}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapNextElementStart(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<div class='center'><h2>Sync Slides </h2><br><h3>Student's view follow yours.</h3><div>"}]});
a.onbeforechange(function(b){var c=3e3;setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapNextElement(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".btn-next"),intro:"<div class='center'><h3>Next</h3></div>",position:"left"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){return}else{if(jq(b).hasClass("btn-next")){jq(b).addClass("animated flash");console.log("next");setTimeout(function(){jq(b).closest(".js-question-next").click()},1200);c=1200}else{c=3e3}}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapElementEnd(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<div class='center'><h3>Close</h3></div>",element:document.querySelector(".btn-close"),position:"left"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){return}else if(jq(b).hasClass("btn-close")){jq(b).addClass("animated flash");console.log("Close element");setTimeout(function(){jq(".js-question-close").click()},1e3);c=1e3}else{c=2e3}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapDialogEnd(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".modal-dialog"),intro:"<div class='center'><h2>Back to Adventure Map</h2></div>",position:"left"}]});a.onbeforechange(function(b){var c=1100;console.log(jq(b));if(!b){return}else{if(jq(b).hasClass("modal-dialog")){console.log("close dialog");jq(b).find(".js-close").addClass("animated flash");setTimeout(function(){jq(b).find(".js-close").click()},1e3);c=1e3}else{c=2e3}}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapEnd(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<div class='center'><h3>End of Sync Slides.</h3><div>"}]});a.onbeforechange(function(b){var c=2e3;setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function introStartDemoAdventureMapDeactivate(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".messenger"),intro:"<strong>Deactivate Sync Slides</strong>",position:"top"},{intro:"<h1>Campfire Apps</h1>"}]});a.onbeforechange(function(b){var c=1e3;console.log(jq(b));if(!b){return}else if(jq(b).hasClass("messenger")){console.log("deactivate  it");jq(jq(b).first().find(".messenger-phrase").next()[0]).addClass("animated fadein");setTimeout(function(){jq(b).first().find(".messenger-phrase").next()[0].click()},1e3);c=1e3}else{c=2e3}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function demoExitCampfireApp(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{intro:"<div class='center'><h3>Close</h3></div>",element:document.querySelector(".js-close"),position:"left"}]});a.onbeforechange(function(b){var c=1500;if(jq(b).hasClass("js-close")){setTimeout(function(){jq(".js-close")[0].click()},1500)}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}function demoEndCampfireApp(){var a=introJs();a.setOptions({showStepNumbers:false,showBullets:false,showButtons:false,overlayOpacity:0,skipLabel:"Exit",steps:[{element:document.querySelector(".messenger"),intro:"<strong>Exit app</strong> on all students' devices",position:"top"}]});a.onbeforechange(function(b){var c=3e3;console.log(jq(b));if(!b){return}else if(jq(b).hasClass("messenger")){setTimeout(function(){console.log(jq("span[data-action='cancel']"));jq("span[data-action='cancel']").find("a")[0].click()},1500)}setTimeout(function(){a.nextStep()},c)});a.oncomplete(function(){parent.demoNextStep()});a.onexit(function(){});a.start()}
//# sourceMappingURL=session.min.js.map