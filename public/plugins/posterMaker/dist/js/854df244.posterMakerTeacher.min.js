function getPollType(){var a="",b=$(".js-poll-type .radio input[type='radio']:checked");return b.length>0&&(a=b.val()),a}function processAnswerSubmitted(a){var b=a.drawingData;b=b.replace("<svg ",'<svg viewBox="0 0 550 550"');var c=$("#student_drawing_template").html(),d=_.template(c,{data:{drawingData:b,studentName:a.studentName,studentID:a.studentID}});$("#submissions").append(d)}function processStudentAnswersAll(a){$("#submissions").append(""),_.each(a.studentAnswers,function(a){console.log(a);var b=a.drawingData;b=b.replace("<svg ",'<svg viewBox="0 0 550 550"');var c=$("#student_drawing_template").html(),d=_.template(c,{data:{drawingData:b,studentName:a.studentName,studentID:a.studentID}});$("#submissions").append(d),a.marked&&$("#student-answer-"+a.studentID).addClass(a.marked.isCorrect?"answer-correct":"answer-wrong")})}function processMarkedAnswer(a){var b=a.studentID,c=a.isCorrect;c?($("#student-answer-"+b).addClass("answer-correct"),$("#student-answer-"+b).removeClass("answer-wrong")):($("#student-answer-"+b).addClass("answer-wrong"),$("#student-answer-"+b).removeClass("answer-correct"))}function processResetActivity(){$("#submissions").html("")}function processActivityEnded(){$("#buttonLaunch").text("Launch Open Response"),$("#buttonLaunch").removeClass("btn-danger"),$("#buttonLaunch").addClass("btn-success")}function demoTrigger(){var a=introJs();a.setOptions({showStepNumbers:!1,showBullets:!1,showButtons:!1,skipLabel:"Exit",steps:[{element:document.querySelector("#buttonLaunch"),intro:"<h4>Trigger Open Response App on all devices</h4>"}]}),a.onbeforechange(function(b){var c=1100;setTimeout(function(){b.click(),setTimeout(function(){a.nextStep()},c)},c)}),a.oncomplete(function(){parent.parent.demoNextStep()}),a.onexit(function(){}),a.start()}function demoOpenResponseGrade(){var a=introJs();a.setOptions({showStepNumbers:!1,showBullets:!1,showButtons:!1,skipLabel:"Exit",steps:[{element:document.querySelector(".student-answer"),intro:"<h4>Student's response</h4>"},{element:document.querySelector(".button-correct"),intro:"<h4>Grade instantly</h4>"},{element:$(".student-answer")[1],intro:"<h4>Student's response</h4>"},{element:$(".button-wrong")[1],intro:"<h4>Grade instantly</h4>"}]}),a.onbeforechange(function(b){var c=1500;$(b).hasClass("student-answer")||($(b).hasClass("button-correct")||$(b).hasClass("button-wrong"))&&(c=3e3,setTimeout(function(){b.click()},1e3)),setTimeout(function(){a.nextStep()},c)}),a.oncomplete(function(){parent.parent.demoNextStep()}),a.onexit(function(){}),a.start()}var PLUGIN_NAME="POSTER_MAKER",pollType,numberOfChoices;google.setOnLoadCallback(function(){$(document).ready(function(){$(function(){FastClick.attach(document.body)}),parent.isTeacher&&(parent.pluginToServer(PLUGIN_NAME,"TeacherOpen",{}),$(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"StudentJoin":break;case"AnswerSubmitted":processAnswerSubmitted(c.data);break;case"StudentAnswersAll":processStudentAnswersAll(c.data);case"MarkedAnswer":processMarkedAnswer(c.data);break;case"ResetActivity":processResetActivity(c.data);break;case"ActivityEnded":processActivityEnded(c.data)}}})),$(document).on("click",'button[id^="buttonLaunch"]',function(a){var b=$(a.target);if(console.log(b.text()),"Launch Open Response"===b.text()){var c=getPollType(),d={numberOfChoices:numberOfChoices,pollType:c};$("#submissions").html(""),parent.pluginToServer(PLUGIN_NAME,"StartActivity",d),b.text("End Campfire App"),b.removeClass("btn-success"),b.addClass("btn-danger")}else parent.pluginToServer("PLUGIN_HANDLER","ExitPlugin",{pluginName:PLUGIN_NAME}),b.text("Launch Open Response"),b.removeClass("btn-danger"),b.addClass("btn-success")}),$(document).on("click",'button[id^="buttonReset"]',function(){var a=getPollType();dataToSend={numberOfChoices:numberOfChoices,pollType:a},parent.pluginToServer(PLUGIN_NAME,"ResetActivity",dataToSend),$("#submissions").html("")}),$(document).on("click",".button-correct, .button-wrong",function(a){a.preventDefault();var b=$(a.target).closest(".student-answer")[0].id,c=b.replace("student-answer-",""),d=!1;$(a.target).hasClass("button-correct")||$(a.target).parent().hasClass("button-correct")?(d=!0,$("#student-answer-"+c).addClass("answer-correct"),$("#student-answer-"+c).removeClass("answer-wrong")):($("#student-answer-"+c).addClass("answer-wrong"),$("#student-answer-"+c).removeClass("answer-correct")),dataToSend={studentID:c,isCorrect:d},parent.pluginToServer(PLUGIN_NAME,"MarkAnswer",dataToSend)}),$(document).on("click",".student-answer",function(a){if(!$(a.target).hasClass("btn")&&!$(a.target).hasClass("glyphicon")){var b=$(a.target).id;b||(b=$(a.target).closest(".student-answer")[0].id);var c=b.replace("student-answer-",""),d=!1;$("#student-answer-"+c).hasClass("selected")&&(d=!0),_.each($("#submissions").children(".student-answer"),function(a){$(a).removeClass("selected")}),d||($("#student-answer-"+c).addClass("selected"),$("html, body").animate({scrollTop:parseInt($("#student-answer-"+c).offset().top)},100))}})})});
//# sourceMappingURL=posterMakerTeacher.min.js.map