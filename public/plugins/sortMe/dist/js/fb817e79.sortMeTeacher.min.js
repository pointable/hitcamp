function updatePluginStatus(a){var b=!1;a.pluginName===PLUGIN_NAME&&a.active&&(b=!0),updateButtonLaunch(b)}function updateButtonLaunch(a){isActive=a;var b=$("#buttonLaunch");a?(b.text("End "+PLUGIN_TITLE),b.removeClass("btn-success"),b.addClass("btn-danger")):(b.text("Launch "+PLUGIN_TITLE),b.removeClass("btn-danger"),b.addClass("btn-success"))}function initWordLists(){var a=JSON.parse(parent.$("#data-session").html()),b=a.wordLists;console.log(b);var c=_.template($("#templateWordLists").html()),d="",e="";_.each(b,function(a,b){var f,g=!1;0==b?f=!0:1==b&&(g=!0),d+=c({wordList:a,isFirst:f}),e+=c({wordList:a,isFirst:g})}),$("#comboWordLists1").html(d),$("#comboWordLists2").html(e)}function processResults(a){var b=a.studentResults;generateChart(b,a.categories)}function generateChart(a,b){var c=new google.visualization.DataTable;c.addColumn("number","#"),c.addColumn("string","Student"),c.addColumn("number","Words"),c.addColumn("string",b.title1),c.addColumn("string",b.title2);var d=[];_.each(a,function(a,b){c=a.numberOfWords,c||(c=0);var c=parseInt(c),e=_.groupBy(a.words,function(a){return a.category}),f="";_.each(e[1],function(a,b){0!==b&&(f+=", "),f+=a.word});var g="";_.each(e[2],function(a,b){0!==b&&(g+=", "),g+=a.word}),d.push([b+1,a.studentName,c,f,g])}),console.log(d),c.addRows(d);var e=new google.visualization.Table(document.getElementById("table_div"));e.draw(c,{showRowNumber:!1}),$('.google-visualization-table-th:contains("#")').css("width","30px"),$('.google-visualization-table-th:contains("Words")').css("width","30px")}var PLUGIN_NAME="SORT_ME",PLUGIN_TITLE="Sort Me",isActive=!1;google.load("visualization","1",{packages:["table"]}),$(document).ready(function(){parent.isTeacher&&(parent.pluginToServer(PLUGIN_NAME,"TeacherOpen",{}),parent.document.plugin&&parent.document.plugin.pluginName===PLUGIN_NAME&&updateButtonLaunch(!0),$(document).on("PluginStatus",function(a,b){if(parent){var c=b.detail;switch(c.type){case"UpdatePluginStatus":updatePluginStatus(c)}}}),$(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"StudentJoin":break;case"Results":processResults(c.data)}}}),initWordLists()),$(document).on("click",'button[id^="buttonLaunch"]',function(){var a=!1;if(isActive)parent.pluginToServer(PLUGIN_NAME,"EndActivity",{}),a=!1;else{var b=$("#comboWordLists1").val(),c=$("#comboWordLists2").val();if(b===c)return void parent.bootbox.alert("Choose two different Word Lists");var d=JSON.parse(parent.$("#data-session").html()),e=_.find(d.wordLists,function(a){return a._id===b}),f=_.find(d.wordLists,function(a){return a._id===c});parent.pluginToServer(PLUGIN_NAME,"StartActivity",{wordList1:e,wordList2:f}),a=!0}updateButtonLaunch(a)})});
//# sourceMappingURL=sortMeTeacher.min.js.map