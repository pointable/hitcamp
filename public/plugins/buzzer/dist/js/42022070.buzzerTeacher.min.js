function updatePluginStatus(a){var b=!1;a.pluginName===PLUGIN_NAME&&a.active&&(b=!0),updateButtonLaunch(b)}function updateButtonLaunch(a){isActive=a;var b=$("#buttonLaunch");a?(b.text("End "+PLUGIN_TITLE),b.removeClass("btn-success"),b.addClass("btn-danger")):(b.text("Launch "+PLUGIN_TITLE),b.removeClass("btn-danger"),b.addClass("btn-success"))}function processResults(a){var b=a.studentResults;generateChart(b)}function generateChart(a){var b=new google.visualization.DataTable;b.addColumn("number","#"),b.addColumn("string","Student"),b.addColumn("string","Grade"),b.addColumn("string","Merit");var c=$("#templateMark").html(),d=$("#templateBehaviour").html(),e=[];_.each(a,function(a,b){console.log(a.marked),console.log(a);var f=_.template(c,{data:{studentID:a.studentID,studentNumber:a.studentNumber,marked:a.marked?!0:!1,isCorrect:a.marked&&a.marked.isCorrect?!0:!1}}),g=_.template(d,{data:{studentID:a.studentID,studentNumber:a.studentNumber,merited:a.merited?!0:!1,isGood:a.merited&&a.merited.isGood?!0:!1}});e.push([b+1,a.studentName,f,g])}),b.addRows(e);var f=new google.visualization.Table(document.getElementById("table_div"));f.draw(b,{showRowNumber:!1,allowHtml:!0}),$('.google-visualization-table-th:contains("#")').css("width","30px"),$('.google-visualization-table-th:contains("Words")').css("width","30px")}var PLUGIN_NAME="BUZZER",PLUGIN_TITLE="Buzzer",isActive=!1;google.load("visualization","1",{packages:["table"]}),$(document).ready(function(){$(function(){FastClick.attach(document.body)}),parent.isTeacher&&(parent.pluginToServer(PLUGIN_NAME,"TeacherOpen",{}),parent.document.plugin&&parent.document.plugin.pluginName===PLUGIN_NAME&&updateButtonLaunch(!0),$(document).on("PluginStatus",function(a,b){if(parent){var c=b.detail;switch(c.type){case"UpdatePluginStatus":updatePluginStatus(c)}}}),$(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"StudentJoin":break;case"Results":processResults(c.data)}}})),$(".js-close").on("click",function(a){a.preventDefault();var b={type:"Exit"};parent.jq(parent.document).trigger("MiniApp",{detail:b})}),$(document).on("click",'button[id^="buttonLaunch"]',function(){var a=$("#radioNumberOfGroups > .active").data("value"),b=!1;if(isActive)parent.pluginToServer(PLUGIN_NAME,"EndActivity",{}),b=!1;else{var c=0,d={time:c,studentsPerDevice:a};parent.pluginToServer(PLUGIN_NAME,"StartActivity",d),b=!0}updateButtonLaunch(b)}),$(document).on("click",'button[id^="buttonReset"]',function(a){var b=$("#radioNumberOfGroups > .active").data("value"),c=($(a.target),0),d={time:c,studentsPerDevice:b};parent.pluginToServer(PLUGIN_NAME,"ResetActivity",d)}),$(document).on("click",".button-correct, .button-wrong",function(a){a.preventDefault();var b=$(a.target).closest(".marking")[0];b=$(b);var c=(b.id,b.attr("data-student-id")),d=b.attr("data-student-number");d=parseInt(d);var e=!1;$(a.target).hasClass("button-correct")||$(a.target).parent().hasClass("button-correct")?(e=!0,b.addClass("answer-correct"),b.removeClass("answer-wrong")):(b.addClass("answer-wrong"),b.removeClass("answer-correct")),dataToSend={studentID:c,studentNumber:d,isCorrect:e},parent.pluginToServer(PLUGIN_NAME,"MarkAnswer",dataToSend)}),$(document).on("click",".button-good, .button-bad",function(a){a.preventDefault();var b=$(a.target).closest(".marking")[0];b=$(b);var c=(b.id,b.attr("data-student-id")),d=b.attr("data-student-number");d=parseInt(d);var e=!1;$(a.target).hasClass("button-good")||$(a.target).parent().hasClass("button-good")?(e=!0,b.addClass("answer-correct"),b.removeClass("answer-wrong")):(b.addClass("answer-wrong"),b.removeClass("answer-correct")),dataToSend={studentID:c,studentNumber:d,isGood:e},parent.pluginToServer(PLUGIN_NAME,"MeritStudent",dataToSend)})});
//# sourceMappingURL=buzzerTeacher.min.js.map