function processResetActivity(a){a.studentsPerDevice&&(studentsPerDevice=a.studentsPerDevice),resetSplitScreen(),resetActivity();var b=a.timeToStart,c=millisToStart(b);setTimeout(function(){timerDoneHitNow()},c)}function resetActivity(){studentsStatuses=[],1===studentsPerDevice?(studentsStatuses.push(new studentStatus(0)),getReady(0)):2===studentsPerDevice&&(studentsStatuses.push(new studentStatus(0)),studentsStatuses.push(new studentStatus(1)),getReady(0),getReady(1))}function getReady(a){$("#buzzer-"+studentsPerDevice+"-"+a+" .timer").text("Get Ready!"),$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area").attr("class","buzzer-area"),$("#buzzer-"+studentsPerDevice+"-"+a+" .btn-buzzer").addClass("frosted")}function processMarkedAnswer(a){studentNumber=a.studentNumber,a.isCorrect?($("#buzzer-"+studentsPerDevice+"-"+studentNumber+" .buzzer-area").attr("class","buzzer-area"),$("#buzzer-"+studentsPerDevice+"-"+studentNumber+" .buzzer-area").addClass("answer-correct")):($("#buzzer-"+studentsPerDevice+"-"+studentNumber+" .buzzer-area").attr("class","buzzer-area"),$("#buzzer-"+studentsPerDevice+"-"+studentNumber+" .buzzer-area").addClass("answer-wrong"))}function processStudentOpenResponse(a){var b=a.answers;if(timeToStart=a.timeToStart,a.studentsPerDevice&&(studentsPerDevice=a.studentsPerDevice),resetSplitScreen(),resetActivity(),1===studentsPerDevice){var c;b&&(c=_.findWhere(b,{studentNumber:0})),resetStudentAnswer(0,c)}else if(studentsPerDevice>1){var c,d;b&&(c=_.findWhere(b,{studentNumber:0}),d=_.findWhere(b,{studentNumber:1})),resetStudentAnswer(0,c),resetStudentAnswer(1,d)}}function resetStudentAnswer(a,b){if(b&&1===b.position)$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area").addClass("win"),$("#buzzer-"+studentsPerDevice+"-"+a+" .btn-buzzer").removeClass("frosted"),studentsStatuses[a].clicked=!0;else if(b&&1!==b.position)$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area").addClass("lose"),$("#buzzer-"+studentsPerDevice+"-"+a+" .btn-buzzer").removeClass("frosted"),studentsStatuses[a].clicked=!0;else{var c=millisToStart(timeToStart);c>0?(studentsStatuses[a].clicked=!0,setTimeout(function(){updateHitNow(a)},c)):0>=c&&(studentsStatuses[a].clicked=!1,$("#buzzer-"+studentsPerDevice+"-"+a+" .timer").text("Hit Now!"),$("#buzzer-"+studentsPerDevice+"-"+a+" .btn-buzzer").removeClass("frosted"),$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area").addClass("buzzer-area-animation"))}if(b){var d=getGetOrdinal(b.position);$("#buzzer-"+studentsPerDevice+"-"+a+" .timer").text(d+" to buzz")}}function processSetActivityResult(a){var b=a.position,c=a.studentNumber;if(1===b?($("#buzzer-"+studentsPerDevice+"-"+c+" .buzzer-area").addClass("win"),$("#buzzer-"+studentsPerDevice+"-"+c+" .btn-buzzer").removeClass("frosted")):1!==b&&($("#buzzer-"+studentsPerDevice+"-"+c+" .buzzer-area").addClass("lose"),$("#buzzer-"+studentsPerDevice+"-"+c+" btn-buzzer").removeClass("frosted")),b){var d=getGetOrdinal(b);$("#buzzer-"+studentsPerDevice+"-"+c+" .timer").text(d+" to buzz")}}function timerDoneHitNow(){1===studentsPerDevice?updateHitNow(0):studentsPerDevice>1&&(updateHitNow(0),updateHitNow(1))}function updateHitNow(a){studentsStatuses[a].clicked=!1,$("#buzzer-"+studentsPerDevice+"-"+a+" .timer").text("Hit Now!"),$("#buzzer-"+studentsPerDevice+"-"+a+" .btn-buzzer").removeClass("frosted"),$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area").addClass("buzzer-area-animation")}function buzzerClicked(a){if(!studentsStatuses[a].clicked){studentsStatuses[a].clicked=!0;var b=$("#buzzer-"+studentsPerDevice+"-"+a+" .buzzer-area");b.attr("class","buzzer-area"),b.addClass("shake animated"),b.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){b.removeClass("shake animated")}),setTimeout(function(){parent.pluginToServer(PLUGIN_NAME,"BuzzerClicked",{studentNumber:a})},1)}}function millisToStart(a){var b=a,c=(new Date).valueOf()+parent.document.timeDifference,d=b-c;return d}function getGetOrdinal(a){var b=["th","st","nd","rd"],c=a%100;return a+(b[(c-20)%10]||b[c]||b[0])}function resetSplitScreen(){1===studentsPerDevice?($("#buzzer-2-0").hide(),$("#buzzer-2-1").hide(),$("#buzzer-1-0").show()):studentsPerDevice>1&&($("#buzzer-1-0").hide(),$("#buzzer-2-0").show(),$("#buzzer-2-1").show())}function studentStatus(a){this.clicked=!1,this.studentNumber=a,this.isWin=!1,this.position}var PLUGIN_NAME="BUZZER",selectedStudentID,studentsPerDevice=1,studentsStatuses=[],timeToStart;$(document).ready(function(){parent.sendPing(),$(function(){FastClick.attach(document.body)}),parent.isTeacher||($(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"ResetActivity":processResetActivity(c.data);break;case"SetActivityResult":processSetActivityResult(c.data);break;case"StudentOpenResponse":processStudentOpenResponse(c.data);break;case"MarkedAnswer":processMarkedAnswer(c.data)}}}),$(".js-buzzer").on("touchstart mousedown",function(a){a.stopPropagation(),a.preventDefault();var b=$(a.target).parents(".buzzer-area");b.find(".btn-buzzer").addClass("btn-buzzer-active");var c=parseInt(b.attr("data-student-number"));buzzerClicked(c)}),$(".js-buzzer").on("touchend mouseup",function(a){a.stopPropagation(),a.preventDefault();var b=$(a.target).parents(".buzzer-area");b.find(".btn-buzzer").removeClass("btn-buzzer-active")})),parent.pluginToServer(PLUGIN_NAME,"StudentOpen",{}),document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1)});
//# sourceMappingURL=buzzerStudent.min.js.map