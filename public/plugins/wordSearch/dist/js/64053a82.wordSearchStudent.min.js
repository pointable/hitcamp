function processWordList(a){var b=a.seed;wordListTitle1=a.wordList1,wordStatus=a.wordStatus,$("#category1").html(wordListTitle1);var c=[];_.each(wordStatus,function(a){c.push(a.word)});var d=_.template($("#templateWord").html()),e="",f=_.where(wordStatus,{isAnswered:!1}),g=_.where(wordStatus,{isAnswered:!0}),h=_.sample(f,_.size(f));_.each(h,function(a){e+=d({wordData:a})}),$("#dropzoneBlock").after(e),_.each(g,function(a){var b=a.category;$("#categoryAnswered"+b).append(a.studentID===parent.document.socketID?'<div class="word-answered correct">'+a.word+"</div>":'<div class="word-answered">'+a.word+"</div>"),$("#categoryAnswered"+b).scrollTop($("#categoryAnswered"+b).scrollHeight)}),initGrid(c,b)}function sendWord(a,b){if(!wordStatus[a].isAnswered)if(wordStatus[a].isAnswered=!0,isSingle){singleAnsweredCounter++;var c=!1;singleAnsweredCounter>=_.size(wordStatus)&&(c=!0);var d={wordID:a,studentID:b?parent.document.socketID:"",isComplete:c};setTimeout(function(){processWordTaken(d)},500);var e={wordID:a,isCorrect:b};b&&(e.meta={points:5,stats:{engagement:{value:10,max:10}}}),parent.pluginToServer(PLUGIN_NAME,"StudentAnswer",e)}else{var e={wordID:a,isCorrect:b};parent.pluginToServer(PLUGIN_NAME,"StudentAnswer",e)}}function processWordTaken(a){var b=a.wordID,c=a.studentID,d=wordStatus[b].category;$("#"+b).css("visibility","hidden");var e=$("#categoryAnswered"+d);if(c===parent.document.socketID?(e.append('<div class="word-answered correct">'+wordStatus[b].word+"</div>"),countCorrect++):(e.append('<div class="word-answered">'+wordStatus[b].word+"</div>"),document.gameWordTaken(b)),e.scrollTop($("#categoryAnswered"+d).scrollHeight),a.isComplete){var f=0;if(isSingle)f=countCorrect;else{var g=a.wordStatus,h=_.where(g,{studentID:parent.document.socketID});h&&(f=_.size(h))}var i=$("#templateResults").html(),j=_.template(i,{title:"Results",countCorrect:f,countWrong:countWrong});parent.bootbox.alert(j)}}function processWordCorrect(a){var b=a.wordID,c=(a.studentID,wordStatus[b].category);$("#"+b).css("visibility","hidden");var d=$("#categoryAnswered"+c);d.append('<div class="word-answered correct">'+wordStatus[b].word+"</div>"),d.scrollTop(d[0].scrollHeight)}function initializeWordLists(a){var b=JSON.parse(parent.$("#data-session").html()),c=b.wordLists,d=_.findWhere(c,{_id:a});if(d){var e=[];seed=Math.floor(100*Math.random()+1);var f=0;_.each(d.words,function(a){var b={};b.word=a,b.isAnswered=!1,b.studentID=null,b.category=1,b.wordID=f++,/^[a-zA-Z]*$/.test(b.word)&&e.push(b)});var g={wordList1:d.title,wordStatus:e,seed:seed};processWordList(g)}}function initGrid(a,b){window.randomSeed=b,$("#theGrid").wordsearchwidget({wordlist:a,gridsize:10,startSeed:b})}!function(a){"use strict";function b(){}function c(a){return!!a&&("object"==typeof Element?a instanceof Element:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)}function d(a,b){g(b,rb),a.pageX=rb.x,a.pageY=rb.y,h(b,rb),a.clientX=rb.x,a.clientY=rb.y,a.timeStamp=(new Date).getTime()}function e(a,b,c){a.pageX=c.pageX-b.pageX,a.pageY=c.pageY-b.pageY,a.clientX=c.clientX-b.clientX,a.clientY=c.clientY-b.clientY,a.timeStamp=(new Date).getTime()-b.timeStamp;var d=Math.max(a.timeStamp/1e3,.001);a.pageSpeed=fb(a.pageX,a.pageY)/d,a.pageVX=a.pageX/d,a.pageVY=a.pageY/d,a.clientSpeed=fb(a.clientX,a.pageY)/d,a.clientVX=a.clientX/d,a.clientVY=a.clientY/d}function f(a,b,c){var d,e,f;return c=c||{},a=a||"page",/touch/.test(b.type)&&b.touches?(d=b.touches.length?b.touches[0]:b.changedTouches[0],e=d[a+"X"],f=d[a+"Y"]):(e=b[a+"X"],f=b[a+"Y"]),c.x=e,c.y=f,c}function g(b,c){return c=c||{},b instanceof w?/inertiastart/.test(b.type)?(g(sb.pointerUp,c),c.x+=sb.sx,c.y+=sb.sy):(c.x=b.pageX,c.y=b.pageY):_b?(f("screen",b,c),c.x+=a.scrollX,c.y+=a.scrollY):/gesture|inertia/i.test(b.type)?(f("client",b,c),c.x+=Y.documentElement.scrollLeft,c.y+=Y.documentElement.scrollTop):f("page",b,c),c}function h(a,b){return b=b||{},a instanceof w?/inertiastart/.test(a.type)?(h(sb.pointerUp,b),b.x+=sb.sx,b.y+=sb.sy):(b.x=a.clientX,b.y=a.clientY):f(_b?"screen":"client",a,b),b}function i(){return{x:a.scrollX||Y.documentElement.scrollLeft,y:a.scrollY||Y.documentElement.scrollTop}}function j(a){var b=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:i(),c=a instanceof $?a.getBoundingClientRect():a.getClientRects()[0];return c&&{left:c.left+b.x,right:c.right+b.x,top:c.top+b.y,bottom:c.bottom+b.y,width:c.width||c.right-c.left,height:c.heigh||c.bottom-c.top}}function k(a){var b=[];return a instanceof Array?(b[0]=a[0],b[1]=a[1]):db?(b[0]=lb[0],b[1]=lb[1]):(b[0]=a.touches[0],b[1]="touchend"===a.type&&1===a.touches.length?a.changedTouches[0]:a.touches[1]),b}function l(a){var b=k(a);return{pageX:(b[0].pageX+b[1].pageX)/2,pageY:(b[0].pageY+b[1].pageY)/2,clientX:(b[0].clientX+b[1].clientX)/2,clientY:(b[0].clientY+b[1].clientY)/2}}function m(a){if(a.touches&&a.touches.length||db&&lb.length){var b=k(a),c=Math.min(b[0].pageX,b[1].pageX),d=Math.min(b[0].pageY,b[1].pageY),e=Math.max(b[0].pageX,b[1].pageX),f=Math.max(b[0].pageY,b[1].pageY);return{x:c,y:d,left:c,top:d,width:e-c,height:f-d}}}function n(a){var b=(Cb&&Cb.options||Hb).deltaSource,c=b+"X",d=b+"Y",e=k(a),f=e[0][c]-e[1][c],g=e[0][d]-e[1][d];return fb(f,g)}function o(a,b){var c=(Cb&&Cb.options||Hb).deltaSource,d=c+"X",e=c+"Y",f=k(a),g=f[0][d]-f[1][d],h=f[0][e]-f[1][e],i=180*Math.atan(h/g)/Math.PI;if("number"==typeof b){var j=i-b,l=j%360;l>315?i-=360+i/360|0:l>135?i-=180+i/360|0:-315>l?i+=360+i/360|0:-135>l&&(i+=180+i/360|0)}return i}function p(a,b){a=a||Cb;var d=a?a.options.origin:Hb.origin;return b=b||a._element,"parent"===d?d=b.parentNode:"self"===d&&(d=b),c(d)?(d=j(d),d.x=d.left,d.y=d.top):"function"==typeof d&&(d=d(a&&b)),d}function q(a){for(var b=0,c=a.length;c>b;b++)a[b].rect=a[b].getRect()}function r(){var a=sb.target.options.inertia,b=a.resistance,c=(new Date).getTime()/1e3-sb.t0;if(c<sb.te){var d=1-(Math.exp(-b*c)-sb.lambda_v0)/sb.one_ve_v0;if(sb.modifiedXe===sb.xe&&sb.modifiedYe===sb.ye)sb.sx=sb.xe*d,sb.sy=sb.ye*d;else{var e=t(0,0,sb.xe,sb.ye,sb.modifiedXe,sb.modifiedYe,d);sb.sx=e.x,sb.sy=e.y}F(sb.startEvent),sb.i=bc(r)}else sb.sx=sb.modifiedXe,sb.sy=sb.modifiedYe,sb.active=!1,F(sb.startEvent),Q(sb.startEvent)}function s(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d}function t(a,b,c,d,e,f,g){return{x:s(g,a,c,e),y:s(g,b,d,f)}}function u(a){if(a.length){var b,c,d,e,f,g=a[0],h=[],i=[];for(e=1;e<a.length;e++){if(b=a[e],!h.length)for(c=g;c.parentNode!==Y;)h.unshift(c),c=c.parentNode;if(g instanceof bb&&b instanceof $&&!(b instanceof _)){if(b===g.parentNode)continue;c=b.ownerSVGElement}else c=b;for(i=[];c.parentNode!==Y;)i.unshift(c),c=c.parentNode;for(f=0;i[f]&&i[f]===h[f];)f++;var j=[i[f-1],i[f],h[f]];for(d=j[0].lastChild;d;){if(d===j[1]){g=b,h=[];break}if(d===j[2])break;d=d.previousSibling}}return{element:g,index:a.indexOf(g)}}}function v(a,b){if(vb.length||yb.length){var d,e,f,g=[],h=[],i=[],j=[];for(b=b||Cb._element,d=0;d<vb.length;d++){var k=vb[d];if(c(k.options.accept)){if(k.options.accept!==b)continue}else if("string"==typeof k.options.accept&&!b[ac](k.options.accept))continue;b!==k._element&&k.dropCheck(a,Cb,b)&&(g.push(k),h.push(k._element))}if(e=u(h),f=e?g[e.index]:null,yb.length){for(d=0;d<yb.length;d++)for(var l=yb[d],m=Y.querySelectorAll(l.selector),n=0,o=m.length;o>n;n++){if(l._element=m[n],l.rect=l.getRect(),c(l.options.accept)){if(l.options.accept!==b)continue}else if("string"==typeof l.options.accept&&!b[ac](l.options.accept))continue;l._element!==b&&-1===h.indexOf(l._element)&&j.indexOf(-1===l._element)&&l.dropCheck(a,Cb)&&(i.push(l),j.push(l._element))}j.length&&(f&&(i.push(f),j.push(f._element)),e=u(j),e&&(f=i[e.index],f.selector&&(f._element=j[e.index])))}return f?{dropzone:f,element:f._element}:null}}function w(a,b,c,e,f){var i,j,k=(Cb&&Cb.options||Hb).deltaSource,q=k+"X",r=k+"Y",s=Cb?Cb.options:Hb,t=p(Cb,e);if(e=e||Cb._element,"gesture"===b){var u=l(a);j={x:u.pageX-t.x,y:u.pageY-t.y},i={x:u.clientX-t.x,y:u.clientY-t.y}}else j=g(a),i=h(a),j.x-=t.x,j.y-=t.y,i.x-=t.x,i.y-=t.y,s.snapEnabled&&-1!==s.snap.actions.indexOf(b)&&(this.snap={range:Ib.range,locked:Ib.locked,x:Ib.x,y:Ib.y,realX:Ib.realX,realY:Ib.realY,dx:Ib.dx,dy:Ib.dy},Ib.locked&&(j.x+=Ib.dx,j.y+=Ib.dy,i.x+=Ib.dx,i.y+=Ib.dy));if(Cb.options.restrict[b]&&Jb.restricted&&(j.x+=Jb.dx,j.y+=Jb.dy,i.x+=Jb.dx,i.y+=Jb.dy,this.restrict={dx:Jb.dx,dy:Jb.dy}),this.pageX=j.x,this.pageY=j.y,this.clientX=i.x,this.clientY=i.y,"start"!==c||a instanceof w||d(ib,this),this.x0=ib.pageX,this.y0=ib.pageY,this.clientX0=ib.clientX,this.clientY0=ib.clientY,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.button=a.button,this.target=e,this.t0=mb,this.type=b+(c||""),sb.active&&(this.detail="inertia"),f&&(this.relatedTarget=f),ob&&"inertia"===ob.detail&&!sb.active&&s.inertia.zeroResumeDelta?this.dx=this.dy=0:"end"===c||"drop"===b?"client"===k?(this.dx=i.x-ib.clientX,this.dy=i.y-ib.clientY):(this.dx=j.x-ib.pageX,this.dy=j.y-ib.pageY):"inertiastart"===c?(this.dx=ob.dx,this.dy=ob.dy):"client"===k?(this.dx=i.x-ob.clientX,this.dy=i.y-ob.clientY):(this.dx=j.x-ob.pageX,this.dy=j.y-ob.pageY),"resize"===b?s.squareResize||a.shiftKey?("y"===Tb?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=Tb,"x"===Tb?this.dy=0:"y"===Tb&&(this.dx=0)):"gesture"===b&&(this.touches=db?[lb[0],lb[1]]:a.touches,"start"===c?(this.distance=n(a),this.box=m(a),this.scale=1,this.ds=0,this.angle=o(a),this.da=0):"end"===c||a instanceof w?(this.distance=ob.distance,this.box=ob.box,this.scale=ob.scale,this.ds=this.scale-1,this.angle=ob.angle,this.da=this.angle-tb.startAngle):(this.distance=n(a),this.box=m(a),this.scale=this.distance/tb.startDistance,this.angle=o(a,tb.prevAngle),this.ds=this.scale-tb.prevScale,this.da=this.angle-tb.prevAngle)),"start"===c)this.timeStamp=mb,this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===c)this.timeStamp=(new Date).getTime(),this.dt=ob.dt,this.duration=ob.duration,this.speed=ob.speed,this.velocityX=ob.velocityX,this.velocityY=ob.velocityY;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-ob.timeStamp,this.duration=this.timeStamp-mb;var v,x,y;"end"===c||a instanceof w?(y=Math.max(("end"===c?this.duration:this.dt)/1e3,.001),v=this[q]-ob[q],x=this[r]-ob[r],this.snap&&this.snap.locked&&(v-=this.snap.dx,x-=this.snap.dy),this.restrict&&(v-=this.restrict.dx,x-=this.restrict.dy),ob.snap&&ob.snap.locked&&(v-=ob[q]-ob.snap.dx,x-=ob[r]-ob.snap.dy),ob.restrict&&(v+=ob.restrict.dx,x+=ob.restrict.dy),this.speed=fb(v,x)/y,this.velocityX=v/y,this.velocityY=x/y):(this.speed=jb[k+"Speed"],this.velocityX=jb[k+"VX"],this.velocityY=jb[k+"VY"])}}function x(){this.originalEvent.preventDefault()}function y(a,b,c){var d,e,f={};for(d in a)a.hasOwnProperty(d)&&(f[d]=a[d]);f.preventDefault=x,f.stopPropagation=w.prototype.stopPropagation,f.stopImmediatePropagation=w.prototype.stopImmediatePropagation,f.timeStamp=(new Date).getTime(),f.originalEvent=a,f.dt=f.timeStamp-mb,f.type="tap";var g=f.timeStamp-pb,h=qb&&"dubletap"!==qb.type&&qb.target===f.target&&500>g;for(pb=f.timeStamp,e=0;e<b.length;e++){var i=p(b[e],c[e]);if(f.pageX-=i.x,f.pageY-=i.y,f.clientX-=i.x,f.clientY-=i.y,f.currentTarget=c[e],b[e].fire(f),f.immediatePropagationStopped||f.propagationStopped&&b[e+1]!==f.currentTarget)break}if(h){var j={};for(d in f)j[d]=f[d];for(j.dt=g,j.type="doubletap",e=0;e<b.length&&(j.currentTarget=c[e],b[e].fire(j),!(j.immediatePropagationStopped||j.propagationStopped&&b[e+1]!==j.currentTarget));e++);qb=j}else qb=f}function z(a){if(!nb||!Ob&&a instanceof nb.constructor&&nb.target===a.target){for(var b=[],c=[],d=a.target;d;){U.isSet(d)&&(b.push(U(d)),c.push(d));for(var e in xb){var f=Element.prototype[ac]===X?Y.querySelectorAll(e):void 0;d!==Y&&d[ac](e,f)&&(b.push(xb[e]),c.push(d))}d=d.parentNode}b.length&&y(a,b,c)}}function A(a,b){if("string"!=typeof a)return null;b=b||Cb;var c=-1!==a.indexOf("resize")?"resize":a,d=(b||Cb).options;return("resize"===c&&d.resizable||"drag"===a&&d.draggable||"gesture"===a&&d.gesturable)&&Vb[c]?(("resize"===a||"resizeyx"===a)&&(a="resizexy"),a):null}function B(a){if(Wb&&nb&&a.type!==nb.type)return void(/^input$|^textarea$/i.test(Cb._element.nodeName)||a.preventDefault());if(!(nb&&"mousedown"===a.type&&"touchstart"===nb.type&&a.timeStamp-nb.timeStamp<300)){var b,c=a.target instanceof ab?a.target.correspondingUseElement:a.target;if(db&&G(a),sb.active&&Cb.selector)for(;c&&c!==Y;){if(c===sb.targetElement&&A(Cb.getAction(a))===Wb)return cc(sb.i),sb.active=!1,void(db&&G(a,Bb));c=c.parentNode}if(!(Qb||Sb||Pb)){if(zb.length&&/mousedown|pointerdown/i.test(a.type))b=M(a,zb);else for(var e,f;c&&c!==Y&&!b;){zb=[];for(e in xb)f=Element.prototype[ac]===X?Y.querySelectorAll(e):void 0,c[ac](e,f)&&(xb[e]._element=c,zb.push(xb[e]));b=M(a,zb),c=c.parentNode}return b?(Nb=!0,Wb=b,C(a,b)):(mb=(new Date).getTime(),nb=a,d(gb,a),void(Ob=!1))}}}function C(a,b){if(!b&&Nb&&nb&&a.type!==nb.type)return void(/^input$|^textarea$/i.test(Cb._element.nodeName)||a.preventDefault());Nb=!0,db&&G(a),((a.touches&&a.touches.length<2||kb&&kb.length<2)&&!Cb||!Wb)&&(Cb=ub.get(a.currentTarget));var c=Cb&&Cb.options;if(Cb&&!(Qb||Sb||Pb)){var e=A(b||Cb.getAction(a));if(d(ib,a),db&&a instanceof db&&(Cb._gesture.target||(Cb._gesture.target=Cb._element),G(a,Cb._gesture)),!e)return a;Ob=!1,c.styleCursor&&(Y.documentElement.style.cursor=Ub[e].cursor),Tb="resizexy"===e?"xy":"resizex"===e?"x":"resizey"===e?"y":"","gesture"===e&&(a.touches&&a.touches.length<2||db&&kb.length<2)&&(e=null),Wb=e,Ib.x=null,Ib.y=null,mb=(new Date).getTime(),nb=a,d(gb,a),Ob=!1,/^input$|^textarea$/i.test(Cb._element.nodeName)||a.preventDefault()}else sb.active&&a.currentTarget===sb.targetElement&&Cb===sb.target&&A(Cb.getAction(a))===Wb&&(cc(sb.i),sb.active=!1,db&&(Cb._gesture.target||(Cb._gesture.target=Cb._element),G(a,Cb._gesture)))}function D(a,b){var c,d,e,f,h,i,j,k,l,m,n=Cb.options.snap,o=n.anchors;if(b=b||Ib,b.useStatusXY)c={x:b.x,y:b.y};else{var q=p(Cb);c=g(a),c.x-=q.x,c.y-=q.y}if(b.realX=c.x,b.realY=c.y,n.range<0&&(n.range=1/0),"path"===n.mode)for(o=[],l=0,m=n.paths.length;m>l;l++){var r=n.paths[l];"function"==typeof r&&(r=r(c.x,c.y)),o.push({x:"number"==typeof r.x?r.x:c.x,y:"number"==typeof r.y?r.y:c.y,range:"number"==typeof r.range?r.range:n.range})}if("anchor"!==n.mode&&"path"!==n.mode||!o.length){if("grid"===n.mode){var s=Math.round((c.x-n.gridOffset.x)/n.grid.x),t=Math.round((c.y-n.gridOffset.y)/n.grid.y),u=s*n.grid.x+n.gridOffset.x,v=t*n.grid.y+n.gridOffset.y;i=u-c.x,j=v-c.y,k=fb(i,j),f=k<n.range,h=u!==b.x||v!==b.y,b.x=u,b.y=v,b.dx=i,b.dy=j,b.range=n.range}}else{for(d={anchor:null,distance:0,range:0,dx:0,dy:0},l=0,m=o.length;m>l;l++){var w=o[l];e="number"==typeof w.range?w.range:n.range,i=w.x-c.x,j=w.y-c.y,k=fb(i,j),f=e>k,1/0===e&&d.inRange&&1/0!==d.range&&(f=!1),(!d.anchor||(f?d.inRange&&1/0!==e?k/e<d.distance/d.range:k<d.distance:!d.inRange&&k<d.distance))&&(1/0===e&&(f=!0),d.anchor=w,d.distance=k,d.range=e,d.inRange=f,d.dx=i,d.dy=j,b.range=e)}f=d.inRange,h=d.anchor.x!==b.x||d.anchor.y!==b.y,b.x=d.anchor.x,b.y=d.anchor.y,b.dx=d.dx,b.dy=d.dy}return b.changed=h||f&&!b.locked,b.locked=f,b}function E(a,b){var d,e=U.currentAction()||Wb,f=Cb&&Cb.options.restrict[e];if(b=b||Jb,d=d=b.useStatusXY?{x:b.x,y:b.y}:g(a),b.snap&&b.snap.locked&&(d.x+=b.snap.dx||0,d.y+=b.snap.dy||0),b.dx=0,b.dy=0,b.restricted=!1,!e||!f)return b;var h;return"parent"===f?f=Cb._element.parentNode:"self"===f&&(f=Cb._element),c(f)?h=j(f):("function"==typeof f&&(f=f(d.x,d.y,Cb._element)),h=f,"x"in f&&"y"in f&&(h={left:f.x,top:f.y,right:f.x+f.width,bottom:f.y+f.height})),b.dx=Math.max(Math.min(h.right,d.x),h.left)-d.x,b.dy=Math.max(Math.min(h.bottom,d.y),h.top)-d.y,b.restricted=!0,b}function F(a,b){if(Nb){if(a instanceof w||d(hb,a),!Ob){var c=hb.clientX-gb.clientX,f=hb.clientY-gb.clientY;Ob=fb(c,f)>1}if(Wb&&("mousemove"!==a.type||"touchstart"!==nb.type)){if(Ob&&(!sb.active||a instanceof w&&/inertiastart/.test(a.type))&&(Qb||Sb||Pb||e(jb,gb,hb),Wb&&Cb)){var g=Cb.options.restrictEnabled&&(!Cb.options.restrict.endOnly||b),h=!(Qb||Sb||Pb),i=h?nb:a;h&&(ob=nb),g||(Jb.restricted=!1),!Cb.options.snapEnabled||-1===Cb.options.snap.actions.indexOf(Wb)||Cb.options.snap.endOnly&&!b?(g&&E(a),Ub[Wb].moveListener(a)):(D(i),(Ib.changed||!Ib.locked||g)&&(g&&E(a),Ub[Wb].moveListener(a)))}a instanceof w||(e(jb,gb,hb),d(gb,a)),(Qb||Sb)&&Kb.edgeMove(a)}}}function G(a,b){if(!kb.length||lb[0].pointerType===a.pointerType){b&&b.addPointer(a.pointerId);var c=kb.indexOf(a.pointerId);-1===c?(kb.push(a.pointerId),lb[kb.length-1]=a):lb[c]=a}}function H(a){var b=kb.indexOf(a.pointerId);-1!==b&&kb.splice(b,1)}function I(a){var b=kb.indexOf(a.pointerId);-1!==b&&(/move/i.test(a.type)?lb[b]=a:/up|cancel/i.test(a.type)&&(H(a),Pb&&kb.length<2&&Cb._gesture.stop()))}function J(a){a.preventDefault();var b,c,d,e,f;if(!Qb){if(b=new w(nb,"drag","start"),Qb=!0,Cb.fire(b),!Rb){q(vb);for(var g=0;g<yb.length;g++)yb[g]._elements=Y.querySelectorAll(yb[g].selector)}ob=b,Cb.options.snapEnabled&&!Cb.options.snap.endOnly&&D(a)}b=new w(a,"drag","move");var h=Cb._element,i=v(b,h);i?(e=i.dropzone,Eb=i.element):e=Eb=null,Cb._element=h,Eb!==Gb&&(Fb&&(d=new w(a,"drag","leave",Gb,h),b.dragLeave=Gb,f=Fb,Fb=Gb=null),e&&(c=new w(a,"drag","enter",Eb,h),b.dragEnter=e._element,Fb=e,Gb=Fb._element)),Cb.fire(b),d&&f.fire(d),c&&e.fire(c),ob=b}function K(a){a.preventDefault();var b;Sb||(b=new w(nb,"resize","start"),Cb.fire(b),Cb.fire(b),Sb=!0,ob=b,Cb.options.snapEnabled&&!Cb.options.snap.endOnly&&D(a)),b=new w(a,"resize","move"),Cb.fire(b),ob=b}function L(a){if(a.touches&&!(a.touches.length<2)||db){a.preventDefault();var b;Pb||(b=new w(nb,"gesture","start"),b.ds=0,tb.startDistance=tb.prevDistance=b.distance,tb.startAngle=tb.prevAngle=b.angle,tb.scale=1,Pb=!0,Cb.fire(b),ob=b,Cb.options.snapEnabled&&!Cb.options.snap.endOnly&&D(a)),b=new w(a,"gesture","move"),b.ds=b.scale-tb.scale,Cb.fire(b),ob=b,tb.prevAngle=b.angle,tb.prevDistance=b.distance,1/0===b.scale||null===b.scale||void 0===b.scale||isNaN(b.scale)||(tb.scale=b.scale)}}function M(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c],f=A(e.getAction(a,e),e);if(f)return Cb=e,f}}function N(a){if(!(Nb||Qb||Sb||Pb)){var b=[],c=Cb&&Cb._element,d=a.target instanceof ab?a.target.correspondingUseElement:a.target;for(var e in xb)xb.hasOwnProperty(e)&&xb[e]&&d[ac](e)&&(xb[e]._element=d,b.push(xb[e]));var f=ub.get(d),g=f&&A(f.getAction(a),f);if(g)Cb=f,zb=[];else if(M(a,b))zb=b,P(a,zb),hc.addToElement(d,"mousemove",P);else if(Cb){var h=c.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(h,d)){for(var i=0;i<zb.length;i++)zb[i]._element=c;P(a,zb),hc.addToElement(Cb._element,"mousemove",P)}else Cb=null,zb=[]}}}function O(a){if(!(Nb||Qb||Sb||Pb)){var b=a.target instanceof ab?a.target.correspondingUseElement:a.target;ub.get(b)||hc.removeFromElement(b,P),Cb&&Cb.options.styleCursor&&!(Qb||Sb||Pb)&&(Y.documentElement.style.cursor="")}}function P(a,b){if(Nb||Qb||Sb||Pb)Wb&&a.preventDefault();else{var c;b?c=M(a,b):Cb&&(c=A(Cb.getAction(a))),Cb&&Cb.options.styleCursor&&(Y.documentElement.style.cursor=c?Ub[c].cursor:"")}}function Q(a){if((a instanceof w||db||!Nb||!nb||a instanceof nb.constructor)&&!(a.touches&&a.touches.length>=2)){if(eb&&a instanceof eb&&/inertiastart/i.test(a.type))return void a.gestureObject.stop();var b,c,d=Cb&&Cb.options.inertia;if(Qb||Sb||Pb){if(sb.active)return;var e=Cb.options.deltaSource,f=jb[e+"Speed"];if(Cb.options.inertiaEnabled&&"gesture"!==Wb&&-1!==d.actions.indexOf(Wb)&&a!==sb.startEvent&&(new Date).getTime()-hb.timeStamp<50&&f>d.minSpeed&&f>d.endSpeed){var g,h=d.resistance,i=-Math.log(d.endSpeed/f)/h;if(sb.active=!0,sb.target=Cb,sb.targetElement=Cb._element,hc.useAttachEvent)for(c in a)a.hasOwnProperty(c)&&(sb.pointerUp[c]=a[c]);else sb.pointerUp=a;sb.startEvent=g=new w(a,"drag","inertiastart"),sb.vx0=jb[e+"VX"],sb.vy0=jb[e+"VY"],sb.v0=f,sb.x0=ob.pageX,sb.y0=ob.pageY,sb.t0=sb.startEvent.timeStamp/1e3,sb.sx=sb.sy=0,sb.modifiedXe=sb.xe=(sb.vx0-i)/h,sb.modifiedYe=sb.ye=(sb.vy0-i)/h,sb.te=i,sb.lambda_v0=h/sb.v0,sb.one_ve_v0=1-d.endSpeed/sb.v0;var j,k=g.pageX,l=g.pageY;if(g.snap&&g.snap.locked&&(k-=g.snap.dx,l-=g.snap.dy),g.restrict&&(k-=g.restrict.dx,l-=g.restrict.dy),j={useStatusXY:!0,x:k+sb.xe,y:l+sb.ye,dx:0,dy:0,snap:null},j.snap=j,Cb.options.snapEnabled&&Cb.options.snap.endOnly){var m=D(a,j);m.locked&&(sb.modifiedXe+=m.dx,sb.modifiedYe+=m.dy)}if(Cb.options.restrictEnabled&&Cb.options.restrict.endOnly){var n=E(a,j);sb.modifiedXe+=n.dx,sb.modifiedYe+=n.dy}return cc(sb.i),sb.i=bc(r),void Cb.fire(sb.startEvent)}(Cb.options.snapEnabled&&Cb.options.snap.endOnly||Cb.options.restrictEnabled&&Cb.options.restrict.endOnly)&&F(a,!0)}if(Qb){b=new w(a,"drag","end");var o,p=Cb._element,q=v(b,p);if(q?(Db=q.dropzone,Eb=q.element):(Db=null,Eb=null),Cb._element=p,Db)o=new w(a,"drop",null,Eb,p),b.dropzone=Eb;else if(Fb){var s=new w(a,"drag","leave",Eb,p);Fb.fire(s,p),b.dragLeave=Gb}Cb.fire(b),o&&Db.fire(o)}else Sb?(b=new w(a,"resize","end"),Cb.fire(b)):Pb&&(b=new w(a,"gesture","end"),Cb.fire(b));U.stop()}}function R(a,b){var c,d,e={},f=Ab[a.type],g=a.target;b=b?!0:!1;for(var h in a)e[h]=a[h];for(e.preventDefault=function(){a.preventDefault()};g&&g!==Y;){for(c in f)if(g[ac](c)){var i=f[c];for(e.currentTarget=g,d=0;d<i.length;d++)if(i[d][1]===b)try{i[d][0](e)}catch(j){Z.error('Error thrown from delegated listener: "'+c+'" '+a.type+" "+(i[d][0].name?i[d][0].name:"")),Z.log(j)}}g=g.parentNode}}function S(a){return R.call(this,a,!0)}function T(){Cb&&!Cb.selector&&(Cb=null),Db=Eb=Fb=Gb=null}function U(a){return ub.get(a)||new W(a)}function V(a){for(var b in Hb)a.hasOwnProperty(b)&&typeof a[b]==typeof Hb[b]&&(this[b]=a[b])}function W(a,b){this._element=a,this._iEvents=this._iEvents||{},"string"==typeof a?(Y.querySelector(a),xb[a]=this,this.selector=a,this._gesture=Bb):(c(a)&&(db?(hc.add(this,"pointerdown",C),hc.add(this,"pointermove",P),this._gesture=new cb,this._gesture.target=a):(hc.add(this,"mousedown",C),hc.add(this,"mousemove",P),hc.add(this,"touchstart",C),hc.add(this,"touchmove",P))),wb.push(this)),ub.push(this),this.set(b)}var X,Y=a.document,Z=a.console,$=a.SVGElement||b,_=a.SVGSVGElement||b,ab=a.SVGElementInstance||b,bb=a.HTMLElement||a.Element,cb=a.Gesture||a.MSGesture,db=cb&&(a.PointerEvent||a.MSPointerEvent),eb=cb&&(a.GestureEvent||a.MSGestureEvent),fb=Math.hypot||function(a,b){return Math.sqrt(a*a+b*b)},gb={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},hb={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},ib={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},jb={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0,pageSpeed:0,clientSpeed:0},kb=db?[]:null,lb=db?[]:null,mb=0,nb=null,ob=null,pb=0,qb=null,rb={},sb={active:!1,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,duration:0,t0:0,vx0:0,vys:0,lambda_v0:0,one_ve_v0:0,i:null},tb={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},ub=[],vb=[],wb=[],xb={},yb=[],zb=[],Ab={},Bb=null,Cb=null,Db=null,Eb=null,Fb=null,Gb=null,Hb={draggable:!1,dropzone:!1,accept:null,resizable:!1,squareResize:!1,resizeAxis:"xy",gesturable:!1,styleCursor:!0,snap:{mode:"grid",endOnly:!1,actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:!1,restrict:{drag:null,resize:null,gesture:null,endOnly:!1},restrictEnabled:!0,autoScroll:{container:a,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:!1,inertia:{resistance:10,minSpeed:100,endSpeed:10,actions:["drag","resize"],zeroResumeDelta:!1,numberTypes:/^resistance$|^minSpeed$|^endSpeed$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},Ib={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},Jb={dx:0,dy:0,snap:Ib,restricted:!1},Kb={target:null,i:null,x:0,y:0,scroll:function(){var b=Kb.target.options.autoScroll,c=b.container,d=(new Date).getTime(),e=(d-Kb.prevTime)/1e3,f=b.speed*e;f>=1&&(c instanceof a.Window?c.scrollBy(Kb.x*f,Kb.y*f):c&&(c.scrollLeft+=Kb.x*f,c.scrollTop+=Kb.y*f),Kb.prevTime=d),Kb.isScrolling&&(cc(Kb.i),Kb.i=bc(Kb.scroll))},edgeMove:function(b){if(Cb&&Cb.options.autoScrollEnabled&&(Qb||Sb)){var c,d,e,f,g=Cb.options.autoScroll;if(g.container instanceof a.Window)f=b.clientX<Kb.margin,c=b.clientY<Kb.margin,d=b.clientX>g.container.innerWidth-Kb.margin,e=b.clientY>g.container.innerHeight-Kb.margin;else{var h=j(g.container);f=b.clientX<h.left+Kb.margin,c=b.clientY<h.top+Kb.margin,d=b.clientX>h.right-Kb.margin,e=b.clientY>h.bottom-Kb.margin}Kb.x=d?1:f?-1:0,Kb.y=e?1:c?-1:0,Kb.isScrolling||(Kb.margin=g.margin,Kb.speed=g.speed,Kb.start(Cb))}},isScrolling:!1,prevTime:0,start:function(a){Kb.isScrolling=!0,cc(Kb.i),Kb.target=a,Kb.prevTime=(new Date).getTime(),Kb.i=bc(Kb.scroll)},stop:function(){Kb.isScrolling=!1,cc(Kb.i)}},Lb="createTouch"in Y,Mb=Lb?20:10,Nb=!1,Ob=!1,Pb=!1,Qb=!1,Rb=!1,Sb=!1,Tb="xy",Ub={drag:{cursor:"move",moveListener:J},resizex:{cursor:"e-resize",moveListener:K},resizey:{cursor:"s-resize",moveListener:K},resizexy:{cursor:"se-resize",moveListener:K},gesture:{cursor:"",moveListener:L}},Vb={drag:!0,resize:!0,gesture:!0},Wb=null,Xb="onmousewheel"in Y?"mousewheel":"wheel",Yb=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],Zb={},$b={directBind:0,onevent:1,globalBind:2},_b="Opera"==navigator.appName&&Lb&&navigator.userAgent.match("Presto"),ac="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",bc=a.requestAnimationFrame,cc=a.cancelAnimationFrame,dc={_element:a,events:{}},ec={_element:Y,events:{}},fc={_element:a.parent,events:{}},gc={_element:null,events:{}},hc=function(){function b(a,b,c,d){var g=i.indexOf(a),l=j[g];if(l||(l={events:{},typeCount:0},g=i.push(a)-1,j.push(l),k.push(e?{supplied:[],wrapped:[],useCount:[]}:null)),l.events[b]||(l.events[b]=[],l.typeCount++),-1===l.events[b].indexOf(c)){var m;if(e){var n=k[g],o=n.supplied.indexOf(c),p=n.wrapped[o]||function(b){b.immediatePropagationStopped||(b.target=b.srcElement,b.currentTarget=a,/mouse|click/.test(b.type)&&(b.pageX=b.clientX+Y.documentElement.scrollLeft,b.pageY=b.clientY+Y.documentElement.scrollTop),c(b))};m=a[f](h+b,p,Boolean(d)),-1===o?(n.supplied.push(c),n.wrapped.push(p),n.useCount.push(1)):n.useCount[o]++}else m=a[f](b,c,d||!1);return l.events[b].push(c),m}}function c(a,b,d,f){var l,m,n,o=i.indexOf(a),p=j[o],q=d;if(p&&p.events)if(e&&(m=k[o],n=m.supplied.indexOf(d),q=m.wrapped[n]),"all"!==b){if(p.events[b]){var r=p.events[b].length;if("all"===d)for(l=0;r>l;l++)c(a,b,p.events[b][l],Boolean(f));else for(l=0;r>l;l++)if(p.events[b][l]===d){a[g](h+b,q,f||!1),p.events[b].splice(l,1),e&&m&&(m.useCount[n]--,0===m.useCount[n]&&(m.supplied.splice(n,1),m.wrapped.splice(n,1),m.useCount.splice(n,1)));break}p.events[b]&&0===p.events[b].length&&(p.events[b]=null,p.typeCount--)}p.typeCount||(j.splice(o),i.splice(o),k.splice(o))}else for(b in p.events)p.events.hasOwnProperty(b)&&c(a,b,"all")}var d=a.Event,e="attachEvent"in a&&!("addEventListener"in a),f=e?"attachEvent":"addEventListener",g=e?"detachEvent":"removeEventListener",h=e?"on":"",i=[],j=[],k=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),"stopPropagation"in d.prototype||(d.prototype.stopPropagation=function(){this.cancelBubble=!0},d.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in d.prototype||(d.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in d.prototype||(d.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(a,c,d,e){b(a._element,c,d,e)},remove:function(a,b,d,e){c(a._element,b,d,e)},addToElement:b,removeFromElement:c,useAttachEvent:e}}();w.prototype={preventDefault:b,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}},ub.indexOfElement=vb.indexOfElement=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.selector===a||!c.selector&&c._element===a)return b}return-1},ub.get=function(a){return"string"==typeof a?xb[a]:this[this.indexOfElement(a)]},vb.get=function(a){return this[this.indexOfElement(a)]},V.prototype=Hb,W.prototype={setOnEvents:function(a,b){if("drop"===a){var c=b.ondrop||b.onDrop||b.drop,d=b.ondragenter||b.onDropEnter||b.dragenter,e=b.ondragleave||b.onDropLeave||b.dragleave;"function"==typeof c&&(this.ondrop=c),"function"==typeof d&&(this.ondragenter=d),"function"==typeof e&&(this.ondragleave=e)}else{var f=b.onstart||b.onStart||b.start,g=b.onmove||b.onMove||b.move,h=b.onend||b.onEnd||b.end,i=b.oninertiastart||b.onInertiaStart||b.inertiastart;a="on"+a,"function"==typeof f&&(this[a+"start"]=f),"function"==typeof g&&(this[a+"move"]=g),"function"==typeof h&&(this[a+"end"]=h),"function"==typeof i&&(this[a+"inertiastart"]=i)}return this},draggable:function(a){return a instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",a),this):"boolean"==typeof a?(this.options.draggable=a,this):null===a?(delete this.options.draggable,this):this.options.draggable},dropzone:function(a){if(a instanceof Object)return this.options.dropzone=!0,this.setOnEvents("drop",a),this.accept(a.accept),(this.selector?yb:vb).push(this),Rb||this.selector||(this.rect=this.getRect()),this;if("boolean"==typeof a){if(a)(this.selector?yb:vb).push(this),Rb||this.selector||(this.rect=this.getRect());else{var b=this.selector?yb:vb,c=b.indexOf(this);-1!==c&&b.splice(c,1)}return this.options.dropzone=a,this}return null===a?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(a,b,c){var d,e,f=g(a),h=p(b,c);return f.x+=h.x,f.y+=h.y,Rb&&(this.rect=this.getRect()),this.rect?(d=f.x>this.rect.left&&f.x<this.rect.right,e=f.y>this.rect.top&&f.y<this.rect.bottom,d&&e):!1},dropChecker:function(a){return"function"==typeof a?(this.dropCheck=a,this):this.dropCheck},accept:function(a){return c(a)?(this.options.accept=a,this):"string"==typeof a?(Y.querySelector(a),this.options.accept=a,this):null===a?(delete this.options.accept,this):this.options.accept},resizable:function(a){return a instanceof Object?(this.options.resizable=!0,this.setOnEvents("resize",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.resizeAxis=a.axis:null===a.axis&&(this.options.resizeAxis=Hb.resizeAxis),this):"boolean"==typeof a?(this.options.resizable=a,this):this.options.resizable},resizeable:b,squareResize:function(a){return"boolean"==typeof a?(this.options.squareResize=a,this):null===a?(delete this.options.squareResize,this):this.options.squareResize},gesturable:function(a){return a instanceof Object?(this.options.gesturable=!0,this.setOnEvents("gesture",a),this):"boolean"==typeof a?(this.options.gesturable=a,this):null===a?(delete this.options.gesturable,this):this.options.gesturable},gestureable:b,autoScroll:function(b){var d=Hb.autoScroll;if(b instanceof Object){var e=this.options.autoScroll;return e===d&&(e=this.options.autoScroll={margin:d.margin,distance:d.distance,interval:d.interval,container:d.container}),e.margin=this.validateSetting("autoScroll","margin",b.margin),e.speed=this.validateSetting("autoScroll","speed",b.speed),e.container=c(b.container)||b.container instanceof a.Window?b.container:d.container,this.options.autoScrollEnabled=!0,this.options.autoScroll=e,this}return"boolean"==typeof b?(this.options.autoScrollEnabled=b,this):null===b?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1
},snap:function(a){var b=Hb.snap;if(a instanceof Object){var c=this.options.snap;return c===b&&(c={}),c.mode=this.validateSetting("snap","mode",a.mode),c.endOnly=this.validateSetting("snap","endOnly",a.endOnly),c.actions=this.validateSetting("snap","actions",a.actions),c.range=this.validateSetting("snap","range",a.range),c.paths=this.validateSetting("snap","paths",a.paths),c.grid=this.validateSetting("snap","grid",a.grid),c.gridOffset=this.validateSetting("snap","gridOffset",a.gridOffset),c.anchors=this.validateSetting("snap","anchors",a.anchors),this.options.snapEnabled=!0,this.options.snap=c,this}return"boolean"==typeof a?(this.options.snapEnabled=a,this):null===a?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},inertia:function(a){var b=Hb.inertia;if(a instanceof Object){var c=this.options.inertia;return c===b&&(c=this.options.inertia={resistance:b.resistance,minSpeed:b.minSpeed,endSpeed:b.endSpeed,actions:b.actions,zeroResumeDelta:b.zeroResumeDelta}),c.resistance=this.validateSetting("inertia","resistance",a.resistance),c.minSpeed=this.validateSetting("inertia","minSpeed",a.minSpeed),c.endSpeed=this.validateSetting("inertia","endSpeed",a.endSpeed),c.actions=this.validateSetting("inertia","actions",a.actions),c.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",a.zeroResumeDelta),this.options.inertiaEnabled=!0,this.options.inertia=c,this}return"boolean"==typeof a?(this.options.inertiaEnabled=a,this):null===a?(delete this.options.inertiaEnabled,delete this.options.inertia,this):this.options.inertiaEnabled?this.options.inertia:!1},getAction:function(a){var b,c,d,e=this.getRect(),f=g(a),h=this.options;return Vb.resize&&h.resizable&&(b="y"!==h.resizeAxis&&f.x>e.right-Mb,c="x"!==h.resizeAxis&&f.y>e.bottom-Mb),Tb=(b?"x":"")+(c?"y":""),d=Tb?"resize"+Tb:Vb.drag&&h.draggable?"drag":null,Vb.gesture&&(a.touches&&a.touches.length>=2||db&&kb.length>=2)&&!Qb&&!Sb&&(d="gesture"),d},actionChecker:function(a){return"function"==typeof a?(this.getAction=a,this):null===a?(delete this.options.getAction,this):this.getAction},getRect:function(){return this.selector&&!c(this._element)&&(this._element=Y.querySelector(this.selector)),j(this._element)},rectChecker:function(a){return"function"==typeof a?(this.getRect=a,this):null===a?(delete this.options.getRect,this):this.getRect},styleCursor:function(a){return"boolean"==typeof a?(this.options.styleCursor=a,this):null===a?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(a){return a instanceof Object||/^parent$|^self$/.test(a)?(this.options.origin=a,this):null===a?(delete this.options.origin,this):this.options.origin},deltaSource:function(a){return"page"===a||"client"===a?(this.options.deltaSource=a,this):null===a?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(a){if(void 0===a)return this.options.restrict;if(a instanceof Object){var b={};(a.drag instanceof Object||/^parent$|^self$/.test(a.drag))&&(b.drag=a.drag),(a.resize instanceof Object||/^parent$|^self$/.test(a.resize))&&(b.resize=a.resize),(a.gesture instanceof Object||/^parent$|^self$/.test(a.gesture))&&(b.gesture=a.gesture),"boolean"==typeof a.endOnly&&(b.endOnly=a.endOnly),this.options.restrictEnabled=!0,this.options.restrict=b}else null===a&&(delete this.options.restrict,delete this.options.restrictEnabled);return this},validateSetting:function(a,b,d){var e=Hb[a],f=this.options[a];if(void 0!==e&&void 0!==e[b]){if("objectTypes"in e&&e.objectTypes.test(b))return d instanceof Object?d:b in f&&f[b]instanceof Object?f[b]:e[b];if("arrayTypes"in e&&e.arrayTypes.test(b))return d instanceof Array?d:b in f&&f[b]instanceof Array?f[b]:e[b];if("stringTypes"in e&&e.stringTypes.test(b))return"string"==typeof d?d:b in f&&"string"==typeof f[b]?f[b]:e[b];if("numberTypes"in e&&e.numberTypes.test(b))return"number"==typeof d?d:b in f&&"number"==typeof f[b]?f[b]:e[b];if("boolTypes"in e&&e.boolTypes.test(b))return"boolean"==typeof d?d:b in f&&"boolean"==typeof f[b]?f[b]:e[b];if("elementTypes"in e&&e.elementTypes.test(b))return c(d)?d:b in f&&c(f[b])?f[b]:e[b]}return null},element:function(){return this._element},fire:function(a){if(!a||!a.type||-1===Yb.indexOf(a.type))return this;for(var b,c,d=0,e=0,f="on"+a.type;3>d;)try{switch(d){case $b.directBind:if(a.type in this._iEvents){for(b=this._iEvents[a.type],c=b.length;c>e&&!a.immediatePropagationStopped;e++)b[e](a);break}break;case $b.onevent:"function"==typeof this[f]&&this[f](a);break;case $b.globalBind:if(a.type in Zb&&(b=Zb[a.type]))for(c=b.length;c>e&&!a.immediatePropagationStopped;e++)b[e](a)}if(a.propagationStopped)break;e=0,d++}catch(g){Z.error("Error thrown from "+a.type+" listener"),Z.error(g),e++,d===$b.onevent&&d++}return this},on:function(a,b,c){if("wheel"===a&&(a=Xb),-1!==Yb.indexOf(a))a in this._iEvents?-1===this._iEvents[a].indexOf(b)&&this._iEvents[a].push(b):this._iEvents[a]=[b];else if(this.selector){Ab[a]||(Ab[a]={});var d=Ab[a];d[this.selector]||(d[this.selector]=[]),d[this.selector].push([b,c?!0:!1]),hc.add(ec,a,c?S:R,c)}else hc.add(this,a,b,c);return this},off:function(a,b,c){var d,e=-1;if(c=c?!0:!1,"wheel"===a&&(a=Xb),-1!==Yb.indexOf(a))d=this._iEvents[a],d&&-1!==(e=d.indexOf(b))&&this._iEvents[a].splice(e,1);else if(this.selector){var f=Ab[a];if(f&&(d=f[this.selector])){for(e=0;e<d.length&&d[e][1]!==c;e++);e<d.length&&d.splice(e,1)}}else hc.remove(this._element,b,c);return this},set:function(a){return a&&"object"==typeof a||(a={}),this.options=new V(a),this.draggable("draggable"in a?a.draggable:this.options.draggable),this.dropzone("dropzone"in a?a.dropzone:this.options.dropzone),this.resizable("resizable"in a?a.resizable:this.options.resizable),this.gesturable("gesturable"in a?a.gesturable:this.options.gesturable),"autoScroll"in a&&this.autoScroll(a.autoScroll),this},unset:function(){return hc.remove(this,"all"),"string"==typeof this.selector?delete xb[this.selector]:(hc.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null),wb.splice(wb.indexOf(this.element()))),this.dropzone(!1),ub.splice(ub.indexOf(this),1),U}},W.prototype.gestureable=W.prototype.gesturable,W.prototype.resizeable=W.prototype.resizable,U.isSet=function(a){return-1!==ub.indexOfElement(a)},U.on=function(a,b,c){return-1!==Yb.indexOf(a)?Zb[a]?-1===Zb[a].indexOf(b)&&Zb[a].push(b):Zb[a]=[b]:hc.add(ec,a,b,c),U},U.off=function(a,b,c){if(-1===Yb.indexOf(a))hc.remove(ec,a,b,c);else{var d;a in Zb&&-1!==(d=Zb[a].indexOf(b))&&Zb[a].splice(d,1)}return U},U.simulate=function(a,c,d){var e,f,g={};if("resize"===a&&(a="resizexy"),!(a in Ub))return U;if(d)for(e in d)d.hasOwnProperty(e)&&(g[e]=d[e]);else f=Cb._element instanceof $?c.getBoundingClientRect():f=c.getClientRects()[0],"drag"===a?(g.pageX=f.left+f.width/2,g.pageY=f.top+f.height/2):(g.pageX=f.right,g.pageY=f.bottom);return g.target=g.currentTarget=c,g.preventDefault=g.stopPropagation=b,C(g,a),U},U.enableDragging=function(a){return null!==a&&void 0!==a?(Vb.drag=a,U):Vb.drag},U.enableResizing=function(a){return null!==a&&void 0!==a?(Vb.resize=a,U):Vb.resize},U.enableGesturing=function(a){return null!==a&&void 0!==a?(Vb.gesture=a,U):Vb.gesture},U.eventTypes=Yb,U.debug=function(){return{target:Cb,dragging:Qb,resizing:Sb,gesturing:Pb,prepared:Wb,prevCoords:gb,downCoords:ib,pointerIds:kb,pointerMoves:lb,addPointer:G,removePointer:H,recordPointers:I,inertia:sb,downTime:mb,downEvent:nb,prevEvent:ob,Interactable:W,IOptions:V,interactables:ub,dropzones:vb,pointerIsDown:Nb,defaultOptions:Hb,actions:Ub,dragMove:J,resizeMove:K,gestureMove:L,pointerUp:Q,pointerDown:C,pointerMove:F,pointerHover:P,events:hc,globalEvents:Zb,delegatedEvents:Ab}},U.getTouchAverage=l,U.getTouchBBox=m,U.getTouchDistance=n,U.getTouchAngle=o,U.getElementRect=j,U.margin=function(a){return"number"==typeof a?(Mb=a,U):Mb},U.styleCursor=function(a){return"boolean"==typeof a?(Hb.styleCursor=a,U):Hb.styleCursor},U.autoScroll=function(b){var d=Hb.autoScroll;return b instanceof Object?(Hb.autoScrollEnabled=!0,"number"==typeof b.margin&&(d.margin=b.margin),"number"==typeof b.speed&&(d.speed=b.speed),d.container=c(b.container)||b.container instanceof a.Window?b.container:d.container,U):"boolean"==typeof b?(Hb.autoScrollEnabled=b,U):Hb.autoScrollEnabled?d:!1},U.snap=function(a){var b=Hb.snap;return a instanceof Object?(Hb.snapEnabled=!0,"string"==typeof a.mode&&(b.mode=a.mode),"boolean"==typeof a.endOnly&&(b.endOnly=a.endOnly),"number"==typeof a.range&&(b.range=a.range),a.actions instanceof Array&&(b.actions=a.actions),a.anchors instanceof Array&&(b.anchors=a.anchors),a.grid instanceof Object&&(b.grid=a.grid),a.gridOffset instanceof Object&&(b.gridOffset=a.gridOffset),U):"boolean"==typeof a?(Hb.snapEnabled=a,U):{enabled:Hb.snapEnabled,mode:b.mode,actions:b.actions,grid:b.grid,gridOffset:b.gridOffset,anchors:b.anchors,paths:b.paths,range:b.range,locked:Ib.locked,x:Ib.x,y:Ib.y,realX:Ib.realX,realY:Ib.realY,dx:Ib.dx,dy:Ib.dy}},U.inertia=function(a){var b=Hb.inertia;return a instanceof Object?(Hb.inertiaEnabled=!0,"number"==typeof a.resistance&&(b.resistance=a.resistance),"number"==typeof a.minSpeed&&(b.minSpeed=a.minSpeed),"number"==typeof a.endSpeed&&(b.endSpeed=a.endSpeed),"boolean"==typeof a.zeroResumeDelta&&(b.zeroResumeDelta=a.zeroResumeDelta),a.actions instanceof Array&&(b.actions=a.actions),U):"boolean"==typeof a?(Hb.inertiaEnabled=a,U):{enabled:Hb.inertiaEnabled,resistance:b.resistance,minSpeed:b.minSpeed,endSpeed:b.endSpeed,actions:b.actions,zeroResumeDelta:b.zeroResumeDelta}},U.supportsTouch=function(){return Lb},U.currentAction=function(){return Qb&&"drag"||Sb&&"resize"||Pb&&"gesture"||null},U.stop=function(a){if(Qb||Sb||Pb){Kb.stop(),zb=[],Cb.options.styleCursor&&(Y.documentElement.style.cursor=""),Cb._gesture&&Cb._gesture.stop(),T();for(var b=0;b<yb.length;b++)yb._elements=[];a&&"function"==typeof a.preventDefault&&a.preventDefault()}return kb&&kb.length&&(kb.splice(0),lb.splice(0)),Nb=Ib.locked=Qb=Sb=Pb=!1,Wb=ob=null,U},U.dynamicDrop=function(a){return"boolean"==typeof a?(Qb&&Rb!==a&&!a&&q(vb),Rb=a,U):Rb},U.deltaSource=function(a){return"page"===a||"client"===a?(Hb.deltaSource=a,this):Hb.deltaSource},U.restrict=function(a){var b=Hb.restrict;return void 0===a?Hb.restrict:(a instanceof Object?((a.drag instanceof Object||/^parent$|^self$/.test(a.drag))&&(b.drag=a.drag),(a.resize instanceof Object||/^parent$|^self$/.test(a.resize))&&(b.resize=a.resize),(a.gesture instanceof Object||/^parent$|^self$/.test(a.gesture))&&(b.gesture=a.gesture),"boolean"==typeof a.endOnly&&(b.endOnly=a.endOnly)):null===a&&(b.drag=b.resize=b.gesture=null,b.endOnly=!1),this)},db?(hc.add(ec,"pointerup",z),hc.add(ec,"pointerdown",B),hc.add(ec,"MSGestureChange",F),hc.add(ec,"MSGestureEnd",Q),hc.add(ec,"MSInertiaStart",Q),hc.add(ec,"pointerover",N),hc.add(ec,"pointerout",O),hc.add(ec,"pointermove",I),hc.add(ec,"pointerup",I),hc.add(ec,"pointercancel",I),hc.add(ec,"pointerup",function(){Qb||Sb||Pb||(Nb=!1)}),Bb=new cb,Bb.target=Y.documentElement):(hc.add(ec,"mouseup",z),hc.add(ec,"touchend",z),hc.add(ec,"mousedown",B),hc.add(ec,"mousemove",F),hc.add(ec,"mouseup",Q),hc.add(ec,"mouseover",N),hc.add(ec,"mouseout",O),hc.add(ec,"touchstart",B),hc.add(ec,"touchmove",F),hc.add(ec,"touchend",Q),hc.add(ec,"touchcancel",Q)),hc.add(dc,"blur",Q);try{a.frameElement&&(gc._element=a.frameElement.ownerDocument,hc.add(gc,"mouseup",Q),hc.add(gc,"touchend",Q),hc.add(gc,"touchcancel",Q),hc.add(gc,"pointerup",Q),hc.add(fc,"blur",Q))}catch(ic){U.windowParentError=ic}hc.add(ec,"selectstart",function(a){(Qb||Sb||Pb)&&a.preventDefault()}),ac in Element.prototype&&"function"==typeof Element.prototype[ac]||(Element.prototype[ac]=X=function(a,b){b=b||this.parentNode.querySelectorAll(a);for(var c=b.length,d=0;c>d;d++)if(b[d]===this)return!0;return!1}),function(){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)bc=a[c[d]+"RequestAnimationFrame"],cc=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];bc||(bc=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),cc||(cc=function(a){clearTimeout(a)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=U),exports.interact=U):a.interact=U}(this);var PLUGIN_NAME="WORD_SEARCH",isSingle=!1,countCorrect=0,countWrong=0,singleAnsweredCounter=0;$(document).ready(function(){$(function(){FastClick.attach(document.body)});var a=parent.getUrlVars(document);a.isSingle&&(isSingle=!0,PLUGIN_NAME="SINGLE"),isSingle?initializeWordLists(a.listID1):(parent.isTeacher||$(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"WordList":processWordList(c.data);break;case"WordTaken":processWordTaken(c.data)}}}),parent.pluginToServer(PLUGIN_NAME,"StudentOpen",{}))});var wordStatus;!function($,undefined){function Arms(){this.arms=null,this.deduceArm=function(a,b){this.returnToNormal();var c=$(a).parent().children().index(a);switch(this.arms=new Array,b){case 0:this.arms=$(a).prevAll();break;case 1:this.arms=$(a).nextAll();break;case 2:var d=this.arms;$(a).parent().prevAll().each(function(){d.push($(this).children().get(c))});break;case 3:var e=this.arms;$(a).parent().nextAll().each(function(){e.push($(this).children().get(c))});break;case 4:var f=this.arms,g=c;$(a).parent().prevAll().each(function(){f.push($(this).children().get(++g))});break;case 5:var h=this.arms,i=c;$(a).parent().prevAll().each(function(){h.push($(this).children().get(--i))});break;case 6:var j=this.arms,k=c;$(a).parent().nextAll().each(function(){j.push($(this).children().get(++k))});break;case 7:var l=this.arms,m=c;$(a).parent().nextAll().each(function(){l.push($(this).children().get(--m))})}for(var n=1;n<this.arms.length;n++)Visualizer.arm(this.arms[n])},this.glowTo=function(a){for(var b=$(this.arms).index(a),c=1;c<this.arms.length;c++)b>=c?Visualizer.glow(this.arms[c]):Visualizer.arm(this.arms[c])},this.returnToNormal=function(){if(this.arms)for(var a=1;a<this.arms.length;a++)Visualizer.restore(this.arms[a])},this.clean=function(){$(this.arms).each(function(){Visualizer.clean(this)})}}function Hotzone(){this.elems=null,this.createZone=function(a){this.elems=new Array;var b=$(a),c=b.parent().children().index(b),d=b.parent().prev().children().get(c),e=b.parent().next().children().get(c);this.elems.push(b.prev()[0],b.next()[0]),this.elems.push(d,e,$(d).next()[0],$(d).prev()[0],$(e).next()[0],$(e).prev()[0]),$(this.elems).each(function(){null!=$(this)&&Visualizer.arm(this)})},this.index=function(a){return $(this.elems).index(a)},this.setChosen=function(a){for(var b=0;b<this.elems.length;b++)Visualizer.arm(this.elems[b]);-1!=a&&Visualizer.glow(this.elems[a])},this.returnToNormal=function(){for(var a=0;a<this.elems.length;a++)Visualizer.restore(this.elems[a])},this.clean=function(){$(this.elems).each(function(){Visualizer.clean(this)})}}function Root(){this.root=null,this.setRoot=function(a){this.root=a,Visualizer.glow(this.root)},this.returnToNormal=function(){Visualizer.restore(this.root)},this.isSameCell=function(a){return $(this.root).is($(a))},this.clean=function(){Visualizer.clean(this.root)}}function Cell(){this.DEFAULT="-",this.isHighlighted=!1,this.value=this.DEFAULT,this.parentGrid=null,this.isUnwritten=function(){return this.value==this.DEFAULT},this.isSelected=!1,this.isSelecting=!0,this.td=null}function Grid(){this.cells=null,this.directions=["LeftDiagonal","Horizontal","RightDiagonal","Vertical"],this.initializeGrid=function(a){this.cells=new Array(a);for(var b=0;a>b;b++){this.cells[b]=new Array(a);for(var c=0;a>c;c++){var d=new Cell;d.parentgrid=this,this.cells[b][c]=d}}},this.getCell=function(a,b){return this.cells[a][b]},this.createHotZone=function(a){{var b=a;new Array,b.parent().children().index(b)}},this.size=function(){return this.cells.length},this.put=function(row,col,word){var populator=eval("new "+eval("this.directions["+Math.floor(4*Util.mathRandom())+"]")+"Populator(row,col,word, this)"),isPlaced=populator.populate();if(!isPlaced)for(var x=0;x<this.directions.length;x++){var populator2=eval("new "+eval("this.directions["+x+"]")+"Populator(row,col,word, this)"),isPlaced2=populator2.populate();if(isPlaced2)break}},this.fillGrid=function(){for(var a=0;a<this.size();a++)for(var b=0;b<this.size();b++)this.cells[a][b].isUnwritten()&&(this.cells[a][b].value=String.fromCharCode(Math.floor(65+26*Util.mathRandom())))}}function HorizontalPopulator(a,b,c,d){this.grid=d,this.row=a,this.col=b,this.word=c,this.size=this.grid.size(),this.cells=this.grid.cells,this.populate=function(){if(this.willWordFit())this.writeWord();else for(var a=0;a<this.size;a++){var b=(this.row+a)%this.size,d=this.findContigousSpace(b,c);if(-1==d){var e=this.isWordOverlapPossible(b,c);if(-1==e)continue;this.row=b,this.col=e,this.writeWord();break}this.row=b,this.col=d,this.writeWord();break}return c.isPlaced},this.writeWord=function(){for(var a=c.chars,b=0;b<c.size;b++){var d=new Cell;d.value=a[b],this.cells[this.row][this.col+b]=d,c.containedIn(d),c.isPlaced=!0}},this.isWordOverlapPossible=function(){return-1},this.willWordFit=function(){for(var d=!1,e=0,f=this.word.chars,g=b;g<this.size&&(this.cells[a][g].isUnwritten()||this.cells[a][g]==f[g]);g++)if(e++,e==c.size){d=!0;break}return d},this.findContigousSpace=function(a,b){for(var c=-1,d=0,e=b.chars,f=0;f<this.size;f++)if(this.cells[a][f].isUnwritten()||this.cells[a][f]==e[f]){if(d++,d==b.size){c=f-(b.size-1);break}}else d=0;return c}}function VerticalPopulator(a,b,c,d){this.grid=d,this.row=a,this.col=b,this.word=c,this.size=this.grid.size(),this.cells=this.grid.cells,this.populate=function(){if(this.willWordFit())this.writeWord();else for(var a=0;a<this.size;a++){var b=(this.col+a)%this.size,d=this.findContigousSpace(b,c);if(-1==d){var e=this.isWordOverlapPossible(b,c);if(-1==e)continue;this.row=e,this.col=b,this.writeWord();break}this.row=d,this.col=b,this.writeWord();break}return c.isPlaced},this.writeWord=function(){for(var a=c.chars,b=0;b<c.size;b++){var d=new Cell;d.value=a[b],this.cells[this.row+b][this.col]=d,c.containedIn(d),c.isPlaced=!0}},this.isWordOverlapPossible=function(){return-1},this.willWordFit=function(){for(var d=!1,e=0,f=this.word.chars,g=a;g<this.size&&(this.cells[g][b].isUnwritten()||f[g]==this.cells[g][b].value);g++)if(e++,e==c.size){d=!0;break}return d},this.findContigousSpace=function(a,b){for(var c=-1,d=0,e=b.chars,f=0;f<this.size;f++)if(this.cells[f][a].isUnwritten()||e[f]==this.cells[f][a].value){if(d++,d==b.size){c=f-(b.size-1);break}}else d=0;return c}}function LeftDiagonalPopulator(a,b,c,d){this.grid=d,this.row=a,this.col=b,this.word=c,this.size=this.grid.size(),this.cells=this.grid.cells,this.populate=function(){if(this.willWordFit())this.writeWord();else{var a=this.findContigousSpace(this.row,this.col,c);if(1!=a[0])a:for(var b=0,d=this.size-c.size;d>=0;d--)for(var e=0;2>e;e++){var f=this.findContigousSpace(0==e?d:b,0==e?b:d,c);if(1==f[0]){this.row=f[1],this.col=f[2],this.writeWord();break a}}else this.row=a[1],this.col=a[2],this.writeWord()}return c.isPlaced},this.writeWord=function(){for(var a=c.chars,b=this.row,d=this.col,e=0;e<c.size;e++){var f=new Cell;f.value=a[e],this.cells[b++][d++]=f,c.containedIn(f),c.isPlaced=!0}},this.isWordOverlapPossible=function(){return-1},this.willWordFit=function(){for(var a=!1,b=0,d=this.word.chars,e=this.row,f=this.col,g=0;f<this.grid.size()&&e<this.grid.size()&&(this.cells[e][f].isUnwritten()||this.cells[e][f]==d[g++]);){if(b++,b==c.size){a=!0;break}e++,f++}return a},this.findContigousSpace=function(a,b,c){for(var d=!1,e=0,f=c.chars,g=a,h=b;g>0&&h>0;)g--,h--;for(var i=0;;){if(this.cells[g][h].isUnwritten()||this.cells[g][h]==f[i++]){if(e++,e==c.size){d=!0;break}}else e=0;if(h++,g++,h>=this.size||g>=this.size)break}return d&&(g=g-c.size+1,h=h-c.size+1),[d,g,h]}}function RightDiagonalPopulator(a,b,c,d){this.grid=d,this.row=a,this.col=b,this.word=c,this.size=this.grid.size(),this.cells=this.grid.cells,this.populate=function(){if(this.willWordFit())this.writeWord();else{var a=this.findContigousSpace(this.row,this.col,c);if(1!=a[0])a:for(var b=this.size-1,d=this.size-c.size;d>=0;d--)for(var e=0;2>e;e++){var f=this.findContigousSpace(0==e?d:this.size-1-b,0==e?b:this.size-1-d,c);if(1==f[0]){this.row=f[1],this.col=f[2],this.writeWord();break a}}else this.row=a[1],this.col=a[2],this.writeWord()}return c.isPlaced},this.writeWord=function(){for(var a=c.chars,b=this.row,d=this.col,e=0;e<c.size;e++){var f=new Cell;f.value=a[e],this.cells[b++][d--]=f,c.containedIn(f),c.isPlaced=!0}},this.isWordOverlapPossible=function(){return-1},this.willWordFit=function(){for(var a=!1,b=0,d=this.word.chars,e=this.row,f=this.col,g=0;f>=0&&e<this.grid.size()&&(this.cells[e][f].isUnwritten()||this.cells[e][f]==d[g++]);){if(b++,b==c.size){a=!0;break}e++,f--}return a},this.findContigousSpace=function(a,b,c){for(var d=!1,e=0,f=c.chars,g=a,h=b;g>0&&h<this.size-1;)g--,h++;for(var i=0;h>=0&&g<this.grid.size();){if(this.cells[g][h].isUnwritten()||this.cells[g][h]==f[i++]){if(e++,e==c.size){d=!0;break}}else e=0;g++,h--}return d&&(g=g-c.size+1,h=h+c.size-1),[d,g,h]}}function Model(){this.grid=null,this.wordList=null,this.init=function(a,b){this.grid=a,this.wordList=b;for(var c=0;c<this.wordList.size();c++)a.put(Util.random(this.grid.size()),Util.random(this.grid.size()),this.wordList.get(c))}}function Word(a){this.value=a.toUpperCase(),this.originalValue=this.value,this.isFound=!1,this.cellsUsed=new Array,this.isPlaced=!1,this.row=-1,this.col=-1,this.size=-1,this.chars=null,this.init=function(){this.chars=this.value.split(""),this.size=this.chars.length},this.init(),this.containedIn=function(a){this.cellsUsed.push(a)},this.checkIfSimilar=function(a){return this.originalValue==a||this.value==a?(this.isFound=!0,!0):!1}}function WordList(){this.words=new Array,this.loadWords=function(a){var b=this.words;$(a).each(function(){b.push(new Word(this))})},this.add=function(a){if(10*util.mathRandom()>5){for(var b="",c=a.size-1;c>=0;c--)b+=a.value.charAt(c);a.value=b,a.init()}this.words[this.words.length]=a},this.size=function(){return this.words.length},this.get=function(a){return this.words[a]},this.isWordPresent=function(a){for(var b=0;b<this.words.length;b++)if(this.words[b].checkIfSimilar(a))return b;return-1}}var seed=window.randomSeed;$.widget("ryanf.wordsearchwidget",$.ui.mouse,{options:{wordlist:null,gridsize:10,startSeed:5},_mapEventToCell:function(a){var b=Math.ceil((a.pageX-this._cellX)/this._cellWidth),c=Math.ceil((a.pageY-this._cellY)/this._cellHeight),d=$("#rf-tablegrid tr:nth-child("+c+") td:nth-child("+b+")");return d},_create:function(){seed=this.options.startSeed,this.model=GameWidgetHelper.prepGrid(this.options.gridsize,this.options.wordlist),this.startedAt=new Root,this.hotzone=new Hotzone,this.arms=new Arms,document.gameWordTaken=this.gameWordTaken,GameWidgetHelper.renderGame(this.element[0],this.model),this.options.distance=0,this._mouseInit();var a=$("#rf-tablegrid tr:first td:first");this._cellWidth=a.outerWidth(),this._cellHeight=a.outerHeight(),this._cellX=a.offset().left,this._cellY=a.offset().top},destroy:function(){return this.hotzone.clean(),this.arms.clean(),this.startedAt.clean(),this._mouseDestroy(),this},_mouseStart:function(a){var b=$(a.target).parents("div").attr("id");"rf-searchgamecontainer"==b&&(this.startedAt.setRoot(a.target),this.hotzone.createZone(a.target))},_mouseDrag:function(a){if(a.target=this._mapEventToCell(a),this.startedAt.isSameCell(a.target))return this.arms.returnToNormal(),void this.hotzone.setChosen(-1);if($(a.target).hasClass("rf-armed")||$(a.target).hasClass("rf-glowing")){var b=this.hotzone.index(a.target);-1!=b?(this.hotzone.setChosen(b),this.arms.deduceArm(this.startedAt.root,b)):this.arms.glowTo(a.target)}},_mouseStop:function(){var a="";$(".rf-glowing, .rf-highlight",this.element[0]).each(function(){var b=$.data(this,"cell");a+=b.value});var b=this.model.wordList.isWordPresent(a);-1!=b&&(console.log(b),window.sendWord(b,!0),$(".rf-glowing, .rf-highlight",this.element[0]).each(function(){Visualizer.select(this),$.data(this,"selected","true")}),GameWidgetHelper.signalWordFound(b)),this.hotzone.returnToNormal(),this.startedAt.returnToNormal(),this.arms.returnToNormal()},gameWordTaken:function(a){console.log("FOUND"+a);var b=document.model.wordList.get(a);$(b.cellsUsed).each(function(){Visualizer.select($(this.td),!0)}),GameWidgetHelper.signalWordFound(a)}}),$.extend($.ryanf.wordsearchwidget,{version:"0.0.1"});var Visualizer={glow:function(a){$(a).removeClass("rf-armed").removeClass("rf-selected").addClass("rf-glowing")},arm:function(a){$(a).removeClass("rf-glowing").addClass("rf-armed")},restore:function(a){$(a).removeClass("rf-armed").removeClass("rf-glowing"),null!=a&&"true"==$.data(a,"selected")&&$(a).addClass("rf-selected")},select:function(a,b){$(a).removeClass("rf-armed").removeClass("rf-glowing").animate({opacity:"20"},10,"linear",function(){console.log(b),b&&$(a).addClass("word-taken"),$(a).removeClass("rf-highlight").addClass("rf-selected").animate({opacity:"show"},10,"linear")})},highlight:function(a){$(a).removeClass("rf-armed").removeClass("rf-selected").addClass("rf-highlight")},signalWordFound:function(a){$(a).css("background","yellow").animate({opacity:"hide"},1e3,"linear",function(){$(a).css("background","white"),$(a).addClass("rf-foundword").animate({opacity:"show"},1e3,"linear")})},clean:function(a){$(a).removeClass("rf-armed").removeClass("rf-glowing").removeClass("rf-selected"),$.removeData($(a),"selected")}},Util={random:function(a){var b=1e4*Math.sin(seed++);return b-=Math.floor(b),Math.floor(b*a)},log:function(a){$("#logger").append(a)},mathRandom:function(){var a=1e4*Math.sin(seed++);return a-=Math.floor(a)}},GameWidgetHelper={prepGrid:function(a,b){var c=new Grid;c.initializeGrid(a);var d=new WordList;d.loadWords(b);var e=new Model;return document.model=e,e.init(c,d),c.fillGrid(),e},renderGame:function(a,b){for(var c=b.grid,d=c.cells,e="<div id='rf-searchgamecontainer'><table id='rf-tablegrid' cellspacing=0 cellpadding=0 class='rf-tablestyle'>",f=0;f<c.size();f++){e+="<tr>";for(var g=0;g<c.size();g++)e+="<td  class='rf-tgrid'>"+d[f][g].value+"</td>";e+="</tr>"}e+="</table></div>",$(a).append(e);var h=0,i=0;$("tr","#rf-tablegrid").each(function(){$("td",this).each(function(){var a=d[h][i++];$.data(this,"cell",a),a.td=this}),i=0,h++});var j="<div id='rf-wordcontainer'><ul>";$(b.wordList.words).each(function(){j+="<li class=rf-p"+this.isPlaced+">"+this.originalValue+"</li>"}),j+="</ul></div>",$(a).append(j)},signalWordFound:function(a){var b=$("li").get(a);Visualizer.signalWordFound(b)}}}(jQuery);
//# sourceMappingURL=wordSearchStudent.min.js.map