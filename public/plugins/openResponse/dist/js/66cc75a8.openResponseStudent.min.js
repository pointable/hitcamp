function processResetActivity(a){{var b=a.timeToStart;millisToStart(b)}ResetActivity(a)}function ResetActivity(){submitted=!1,drawn=!1,canvas.clear(),canvas.isDrawingMode=!0,$("#buttonSubmit").html("Submit"),$("#buttonSubmit").addClass("btn-success"),$("#buttonSubmit").removeClass("btn-disabled"),$("#buttonReset").addClass("btn-default"),$("#buttonReset").removeClass("btn-disabled"),$("#choices-area").removeClass("answer-submitted"),$("#choices-area").removeClass("answer-wrong"),$("#choices-area").removeClass("answer-correct")}function nextChar(a){return String.fromCharCode(a.charCodeAt(0)+1)}function processSetActivityResult(){}function processMarkedAnswer(a){a.isCorrect?($("#choices-area").addClass("answer-correct"),$("#choices-area").removeClass("answer-wrong"),$("#choices-area").removeClass("answer-submitted"),parent.Messenger().post({message:"Your submission is correct!",type:"success",id:PLUGIN_NAME,hideAfter:10,showCloseButton:!0})):($("#choices-area").addClass("answer-wrong"),$("#choices-area").removeClass("answer-correct"),$("#choices-area").removeClass("answer-submitted"),parent.Messenger().post({message:"Your submission is not correct!",type:"error",id:PLUGIN_NAME,hideAfter:10,showCloseButton:!0}))}function processRepeatAnswer(){submitted=!1,drawn=!1,canvas.isDrawingMode=!0,$("#buttonSubmit").html("Submit"),$("#buttonSubmit").addClass("btn-success"),$("#buttonSubmit").removeClass("btn-disabled"),$("#buttonReset").addClass("btn-default"),$("#buttonReset").removeClass("btn-disabled"),$("#choices-area").removeClass("answer-submitted"),$("#choices-area").removeClass("answer-wrong"),$("#choices-area").removeClass("answer-correct"),parent.Messenger().post({message:"Modify and resubmit!",type:"error",id:PLUGIN_NAME,hideAfter:10,showCloseButton:!0})}function processSetStudentAnswer(a){console.log(a),submitted=!0,canvas.isDrawingMode=!1;var b=a.drawingData;$("#buttonSubmit").html("Submitted"),$("#buttonSubmit").addClass("btn-disabled"),$("#buttonSubmit").removeClass("btn-success"),$("#buttonReset").addClass("btn-disabled"),$("#buttonReset").removeClass("btn-default"),$("#choices-area").removeClass(),$("#choices-area").addClass(a.marked?a.marked.isCorrect?"answer-correct":"answer-wrong":"answer-submitted"),fabric.loadSVGFromString(b,function(a,b){var c=fabric.util.groupSVGElements(a,b);c.selectable=!1,canvas.add(c).centerObject(c).renderAll(),c.setCoords()})}function millisToStart(a){var b=a,c=(new Date).valueOf()+parent.document.timeDifference,d=b-c;return d}function initializeChoices(a){switch($("#buttonSubmit").removeClass("btn-disabled"),a.pollType){case"FreeDrawing":break;case"Number":break;case"ShortText":break;case"LongText":}}function initCanvas(){canvas=new fabric.Canvas("c",{isDrawingMode:!0}),canvas.selection=!1,document.canvas=canvas,canvas.on("path:created",function(){drawn=!0;var a=_.size(canvas._objects)-1;canvas.item(a).selectable=!1}),fabric.Object.prototype.transparentCorners=!1,canvas.freeDrawingBrush&&(canvas.freeDrawingBrush.color=PEN_COLOR,canvas.freeDrawingBrush.width=PEN_WIDTH,canvas.freeDrawingBrush.shadowBlur=1),$("#divInsertFrame").on("scroll",canvas.calcOffset.bind(canvas)),canvas.calcOffset(),canvas.renderAll()}var PLUGIN_NAME="OPEN_RESPONSE",submitted=!1,canvas,eraserMode=!1;$(document).ready(function(){$(function(){FastClick.attach(document.body)}),parent.isTeacher||($(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"ResetActivity":processResetActivity(c.data);break;case"SetActivityResult":processSetActivityResult(c.data);break;case"MarkedAnswer":processMarkedAnswer(c.data);break;case"RepeatAnswer":processRepeatAnswer(c.data);break;case"SetStudentAnswer":processSetStudentAnswer(c.data)}}}),$(document).on("click",'button[id^="buttonReset"]',function(a){a.preventDefault(),submitted||canvas.clear()}),$("#buttonEraser").on("click",function(a){a.preventDefault(),eraserMode=!eraserMode,eraserMode?($("#buttonEraser").addClass("btn-success"),canvas.freeDrawingBrush.color=ERASER_COLOR,canvas.freeDrawingBrush.width=ERASER_WIDTH):($("#buttonEraser").removeClass("btn-success"),canvas.freeDrawingBrush.color=PEN_COLOR,canvas.freeDrawingBrush.width=PEN_WIDTH)}),$("#buttonSubmit").on("click",function(a){if(a.preventDefault(),!submitted&&drawn){submitted=!0,canvas.isDrawingMode=!1;var b;b=isDemo?demoDrawing:canvas.toSVG();var c={drawingData:b,meta:{points:10}};parent.pluginToServer(PLUGIN_NAME,"AnswerSubmitted",c),$(a.target).html("Submitted"),$(a.target).addClass("btn-disabled"),$(a.target).removeClass("btn-success"),$("#buttonReset").addClass("btn-disabled"),$("#buttonReset").removeClass("btn-default"),$("#choices-area").addClass("answer-submitted")}}),initCanvas()),parent.pluginToServer(PLUGIN_NAME,"StudentOpen",{})});var drawn=!1,PEN_COLOR="black",PEN_WIDTH="2",ERASER_COLOR="white",ERASER_WIDTH="30",demoDrawing,isDemo=!1;
//# sourceMappingURL=openResponseStudent.min.js.map