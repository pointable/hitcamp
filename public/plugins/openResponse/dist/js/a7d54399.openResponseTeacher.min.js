function updatePluginStatus(a){var b=!1;a.pluginName===PLUGIN_NAME&&a.active&&(b=!0),updateButtonLaunch(b)}function updateButtonLaunch(a){isActive=a;var b=$("#buttonLaunch");a?(b.text("End "+PLUGIN_TITLE),b.removeClass("btn-success"),b.addClass("btn-danger")):(b.text("Launch "+PLUGIN_TITLE),b.removeClass("btn-danger"),b.addClass("btn-success"))}function getPollType(){var a="",b=$(".js-poll-type .radio input[type='radio']:checked");return b.length>0&&(a=b.val()),a}function processAnswerSubmitted(a){var b=a.drawingData;b=b.replace("<svg ",'<svg viewBox="0 0 620 620"');var c=$("#student_drawing_template").html(),d=$("#showName").is(":checked"),e=_.template(c,{data:{drawingData:b,studentName:a.studentName,studentID:a.studentID,isVisible:d}});$("#submissions").append(e),submissionCounter++,$("#counter").html(submissionCounter)}function processStudentAnswersAll(a){submissionCounter=_.size(a.studentAnswers),$("#counter").html(submissionCounter),$("#submissions").append(""),_.each(a.studentAnswers,function(a){var b=a.drawingData;b=b.replace("<svg ",'<svg viewBox="0 0 620 620"');var c=$("#showName").is(":checked"),d=$("#student_drawing_template").html(),e=_.template(d,{data:{drawingData:b,studentName:a.studentName,studentID:a.studentID,isVisible:c}});$("#submissions").append(e),a.marked&&$("#student-answer-"+a.studentID).addClass(a.marked.isCorrect?"answer-correct":"answer-wrong")})}function processMarkedAnswer(a){var b=a.studentID,c=a.isCorrect;c?($("#student-answer-"+b).addClass("answer-correct"),$("#student-answer-"+b).removeClass("answer-wrong")):($("#student-answer-"+b).addClass("answer-wrong"),$("#student-answer-"+b).removeClass("answer-correct"))}function processRepeatAnswer(a){var b=a.studentID,c=$("#student-answer-"+b)[0];c.parentNode.removeChild(c),submissionCounter--,$("#counter").html(submissionCounter)}function processResetActivity(){$("#submissions").html(""),submissionCounter=0,$("#counter").html(submissionCounter)}function processActivityEnded(){$("#buttonLaunch").text("Launch Open Response"),$("#buttonLaunch").removeClass("btn-danger"),$("#buttonLaunch").addClass("btn-success")}var PLUGIN_NAME="OPEN_RESPONSE",PLUGIN_TITLE="Open Response",isActive=!1,pollType,numberOfChoices;google.setOnLoadCallback(function(){$(document).ready(function(){$(function(){FastClick.attach(document.body)}),parent.isTeacher&&(parent.pluginToServer(PLUGIN_NAME,"TeacherOpen",{}),parent.document.plugin&&parent.document.plugin.pluginName===PLUGIN_NAME&&updateButtonLaunch(!0),$(document).on("PluginStatus",function(a,b){if(parent){var c=b.detail;switch(c.type){case"UpdatePluginStatus":updatePluginStatus(c)}}}),$(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"StudentJoin":break;case"AnswerSubmitted":processAnswerSubmitted(c.data);break;case"StudentAnswersAll":processStudentAnswersAll(c.data);case"MarkedAnswer":processMarkedAnswer(c.data);break;case"RepeatAnswer":processRepeatAnswer(c.data);break;case"ResetActivity":processResetActivity(c.data);break;case"ActivityEnded":processActivityEnded(c.data)}}})),$(document).on("click",'button[id^="buttonLaunch"]',function(){var a=!1;if(isActive)parent.pluginToServer("PLUGIN_HANDLER","ExitPlugin",{pluginName:PLUGIN_NAME}),a=!1;else{var b=getPollType(),c={numberOfChoices:numberOfChoices,pollType:b};$("#submissions").html(""),$("#counter").html(""),submissionCounter=0,parent.pluginToServer(PLUGIN_NAME,"StartActivity",c),a=!0}updateButtonLaunch(a)}),$(document).on("click",'button[id^="buttonReset"]',function(){var a=getPollType();dataToSend={numberOfChoices:numberOfChoices,pollType:a},parent.pluginToServer(PLUGIN_NAME,"ResetActivity",dataToSend),$("#submissions").html(""),submissionCounter=0,$("#counter").html("")}),$(document).on("click",".button-correct, .button-wrong",function(a){a.preventDefault();var b=$(a.target).closest(".student-answer")[0].id,c=b.replace("student-answer-",""),d=!1;$(a.target).hasClass("button-correct")||$(a.target).parent().hasClass("button-correct")?(d=!0,$("#student-answer-"+c).addClass("answer-correct"),$("#student-answer-"+c).removeClass("answer-wrong")):($("#student-answer-"+c).addClass("answer-wrong"),$("#student-answer-"+c).removeClass("answer-correct")),dataToSend={studentID:c,isCorrect:d},parent.pluginToServer(PLUGIN_NAME,"MarkAnswer",dataToSend)}),$(document).on("click",".button-repeat",function(a){a.preventDefault();var b=$(a.target).closest(".student-answer")[0].id,c=b.replace("student-answer-","");$("#student-answer-"+c).removeClass("answer-wrong"),$("#student-answer-"+c).removeClass("answer-correct"),dataToSend={studentID:c},parent.pluginToServer(PLUGIN_NAME,"RepeatAnswer",dataToSend),submissionCounter--,$("#counter").html(submissionCounter),elementAnswer=$(a.target).closest(".student-answer")[0],elementAnswer.parentNode.removeChild(elementAnswer)}),$(document).on("click",".student-answer",function(a){if(!$(a.target).hasClass("btn")&&!$(a.target).hasClass("glyphicon")){var b=$(a.target).id;b||(b=$(a.target).closest(".student-answer")[0].id);var c=b.replace("student-answer-",""),d=!1;$("#student-answer-"+c).hasClass("selected")&&(d=!0),_.each($("#submissions").children(".student-answer"),function(a){$(a).removeClass("selected")}),d||($("#student-answer-"+c).addClass("selected"),$("html, body").animate({scrollTop:parseInt($("#student-answer-"+c).offset().top)},100))}}),$("#showName").click(function(){var a=this.checked;a?$(".caption").removeClass("invisible"):$(".caption").addClass("invisible")})})});var submissionCounter=0;
//# sourceMappingURL=openResponseTeacher.min.js.map