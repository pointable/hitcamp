function sendWord(a,b,c){if(b?countCorrect++:countWrong++,isSingle){studentAnswers=[],studentAnswers.push({choice:c,isCorrect:b});var d={wordID:a,studentID:b?parent.document.socketID:""};setTimeout(function(){$("#buttonNextWord").removeClass("disabled"),processRevealAnswer(d),b&&(e.meta={points:10,stats:{engagement:{value:10,max:10}}}),parent.pluginToServer(PLUGIN_NAME,"StudentAnswer",e)},500);var e={wordID:a,isCorrect:b}}else{var e={wordID:a,isCorrect:b,choice:c};parent.pluginToServer(PLUGIN_NAME,"StudentAnswer",e)}}function processNextWord(a){currentWord=a.currentWord;var b;if(isSingle)b=500;else{var c=a.timeToStart,d=(new Date).valueOf()+parent.document.timeDifference;b=c-d}setTimeout(function(){$("#currentWord").html(currentWord.word),answered=!1},b),$("#category1").html(a.category1),$("#category2").html(a.category2),$("#currentWord").html("?"),$("#inner-dropzone1").removeClass("selected"),$("#inner-dropzone1").removeClass("answered"),$("#inner-dropzone1").removeClass("answer-wrong"),$("#inner-dropzone1").removeClass("answer-correct"),$("#inner-dropzone2").removeClass("selected"),$("#inner-dropzone2").removeClass("answered"),$("#inner-dropzone2").removeClass("answer-wrong"),$("#inner-dropzone2").removeClass("answer-correct")}function processAnswer(a){answered=!0;var b=!1;currentWord.category===a&&(b=!0),sendWord(currentWord.wordID,b,a)}function processAnswerResponse(a){var b=a.answer,c=$("#inner-dropzone"+b.choice);c.addClass("answered"),c.addClass(b.isCorrect?"answer-correct":"answer-wrong")}function processRevealAnswer(a){answered=!0;var b;if(b=isSingle?studentAnswers[0]:_.findWhere(a.studentAnswers,{studentID:parent.document.socketID}),!b){var c=$("#inner-dropzone"+currentWord.category);return void c.addClass("answer-correct")}var d=$("#inner-dropzone"+b.choice);if(d.addClass("answered"),b.isCorrect)d.addClass("answer-correct");else{d.addClass("answer-wrong");var c=$("#inner-dropzone"+currentWord.category);c.addClass("answer-correct")}}function singleInitializeWordLists(a,b){var c=JSON.parse(parent.$("#data-session").html()),d=c.wordLists;if(wordList1=_.findWhere(d,{_id:a}),wordList2=_.findWhere(d,{_id:b}),wordList1&&wordList2){wordStatus=[],studentAnswers=[];var e=0;_.each(wordList1.words,function(a){var b={};b.word=a,b.isAnswered=!1,b.studentID=null,b.category=1,b.wordID=e++,wordStatus.push(b)}),_.each(wordList2.words,function(a){var b={};b.word=a,b.isAnswered=!1,b.studentID=null,b.category=2,b.wordID=e++,wordStatus.push(b)}),wordStatus=_.sample(wordStatus,_.size(wordStatus));var f={currentWord:wordStatus[currentWordIndex],category1:wordList1.title,category2:wordList2.title,timeToStart:currentWordStartTime};processNextWord(f)}}function singleNextWord(){if(currentWordIndex++,!wordStatus[currentWordIndex])return $("#buttonNextWord").html("Completed"),$("#buttonNextWord").addClass("disabled"),void processActivityComplete();studentAnswers=[],currentWordStartTime=(new Date).valueOf()+1e3;var a={currentWord:wordStatus[currentWordIndex],category1:wordList1.title,category2:wordList2.title,timeToStart:currentWordStartTime};processNextWord(a),$("#buttonNextWord").addClass("disabled")}function processActivityComplete(){var a=$("#templateResults").html(),b=_.template(a,{title:"Results",countCorrect:countCorrect,countWrong:countWrong});parent.bootbox.alert(b)}var PLUGIN_NAME="WORD_ATTACK",currentWord,answered=!0,isSingle=!1,countCorrect=0,countWrong=0,currentWordIndex=0,wordStatus={},currentWordStartTime,studentAnswers=[],wordList1={},wordList2={};$(document).ready(function(){$(function(){FastClick.attach(document.body)});var a=parent.getUrlVars(document);a.isSingle&&(isSingle=!0,PLUGIN_NAME="SINGLE"),isSingle?(singleInitializeWordLists(a.listID1,a.listID2),$(document).on("click",'button[id^="buttonNextWord"]',function(){answered&&singleNextWord()}),$("#buttonNextWord").css("visibility","visible")):(parent.isTeacher||($(document).on("ServerToPlugin"+PLUGIN_NAME,function(a,b){if(parent){var c=b.detail;switch(c.pluginMessageType){case"NextWord":processNextWord(c.data);break;case"ActivityComplete":processActivityComplete(c.data);break;case"AnswerResponse":processAnswerResponse(c.data);break;case"RevealAnswer":processRevealAnswer(c.data)}}}),$(document).on("click",'button[id^="buttonTriggerSpin"]',function(){})),parent.pluginToServer(PLUGIN_NAME,"StudentOpen",{})),$("#inner-dropzone1").click(function(){answered||($("#inner-dropzone1").addClass("selected"),$("#inner-dropzone2").removeClass("selected"),processAnswer(1))}),$("#inner-dropzone2").click(function(){answered||($("#inner-dropzone2").addClass("selected"),$("#inner-dropzone1").removeClass("selected"),processAnswer(2))})});
//# sourceMappingURL=wordAttackStudent.min.js.map