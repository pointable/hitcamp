google.load("visualization","1",{packages:["corechart","table"]}),google.setOnLoadCallback(function(){}),function(){"use strict";app=app||{},app.Classroom=Backbone.Model.extend({idAttribute:"_id",url:function(){return"/classrooms/"+this.model.get("path")+"/configure/"}}),app.HeaderView=Backbone.View.extend({el:"#header",template:_.template($("#tmpl-header").html()),initialize:function(){this.model=app.mainHeaderView.model,this.listenTo(this.model,"change",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes))}}),app.MainHeaderView=Backbone.View.extend({el:".page .container",initialize:function(){app.mainHeaderView=this;var a=$("#data-record").html();this.model=new app.Classroom(JSON.parse(a)),app.headerView=new app.HeaderView}}),$(document).ready(function(){app.mainHeaderView=new app.MainHeaderView})}(),function(){"use strict";var a={labels:[],datasets:[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",data:[]}]};app=app||{},app.Stats=Backbone.Model.extend({idAttribute:"_id",url:function(){return"/classrooms/"+this.model.get("path")+"/configure/"}}),app.StatsView=Backbone.View.extend({el:"#stats",template:_.template($("#tmpl-stats").html()),initialize:function(){this.model=app.mainView.model,this.listenTo(this.model,"change",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes));{var a=$("#myChart").get(0).getContext("2d"),b=this.model.get("students"),c=app.processChartData(b),d=10,e=_.max(b,function(a){return a.score});new Chart(a).Bar(c,{scaleOverride:!0,scaleSteps:d,scaleStepWidth:Math.ceil(e.score/d),scaleStartValue:0})}app.drawTable(b)}}),app.NoStudentsView=Backbone.View.extend({el:"#stats",template:_.template($("#tmpl-no-students").html()),initialize:function(){this.render()},render:function(){this.$el.html(this.template())}}),app.processChartData=function(b){var c=a;return c.labels=[],c.datasets[0].data=[],_.each(b,function(a){c.labels.push(a.name),c.datasets[0].data.push(a.score)}),console.log(c),c},app.MainView=Backbone.View.extend({el:".page .container",initialize:function(){app.mainView=this;var a=$("#data-stats").html(),b=JSON.parse(a),c=this.sortData(b.students);b.students=c,console.log(b),b.students.length>0?(this.model=new app.Stats(b),app.statsView=new app.StatsView):app.noStudentsView=new app.NoStudentsView},sortData:function(a){var b=_.sortBy(a,function(a){return a.score});return b}}),app.drawTable=function(a){var b=new google.visualization.DataTable;b.addColumn("string","Student"),b.addColumn("number","Score");var c=[];_.each(a,function(a){b=a.score,b||(b=0);var b=parseInt(b);c.push([a.name,b])}),console.log(c),b.addRows(c);var d=new google.visualization.Table(document.getElementById("table_div"));d.draw(b,{showRowNumber:!0,width:500})},$(document).ready(function(){app.mainView=new app.MainView})}();
//# sourceMappingURL=indexReports.min.js.map