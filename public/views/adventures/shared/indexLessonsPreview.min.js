function getPath(){return window.classroomPath}!function(){"use strict";app=app||{},app.Signup=Backbone.Model.extend({url:"/"+getPath()+"/signup",defaults:{errors:[],errfor:{},username:"",pin:"",password:""}}),app.SignupView=Backbone.View.extend({el:"#signup",template:_.template($("#tmpl-signup").html()),events:{"submit form":"preventSubmit",'keypress [name="password"]':"signupOnEnter","click .btn-signup":"signup"},initialize:function(){this.model=new app.Signup,this.listenTo(this.model,"sync",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes))},preventSubmit:function(a){a.preventDefault()},signupOnEnter:function(a){13===a.keyCode&&"password"===$(a.target).attr("name")&&(a.preventDefault(),this.signup())},signup:function(){this.$el.find(".btn-signup").attr("disabled",!0),this.model.url=getPath()+"/signup",this.model.save({username:this.$el.find('[name="username"]').val(),pin:this.$el.find('[name="pin"]').val(),password:this.$el.find('[name="password"]').val()},{success:function(a,b){b.success?location.href="/"+getPath():a.set(b)}})}}),$(document).ready(function(){})}(),function(){"use strict";app=app||{},app.Login=Backbone.Model.extend({url:"/"+getPath+"/login",teacherLoginURL:"/"+getPath+"/teacher",defaults:{errors:[],errfor:{},username:"",password:""}}),app.LoginView=Backbone.View.extend({el:"#login",template:_.template($("#tmpl-login").html()),events:{"submit form":"preventSubmit",'keypress [name="password"]':"loginOnEnter"},initialize:function(){this.model=new app.Login,this.listenTo(this.model,"sync",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes)),this.$el.find('[name="username"]').focus()},preventSubmit:function(a){a.preventDefault()},loginOnEnter:function(a){13===a.keyCode&&"password"===$(a.target).attr("name")&&(a.preventDefault(),this.login())},loginGuest:function(){location.href="/"+getPath()+"/guest"},login:function(){this.$el.find(".btn-login").attr("disabled",!0),this.model.url="/"+getPath()+"/login",this.model.save({username:this.$el.find('[name="username"]').val(),password:this.$el.find('[name="password"]').val()},{success:function(a,b){b.success?location.href="/"+getPath():a.set(b)}})}}),$(document).ready(function(){window.idLesson=$("#idLesson").html(),"true"===$("#is-teacher").html()?$("#btn-import").click(function(a){a.preventDefault(),$.ajax({url:"/adventures/edit/"+window.idLesson+"/clone",type:"POST",data:"import=true",success:function(a){a.success?location.href="/adventures/edit/"+a.idLesson+"/":alert("Error! Import unsuccessful")}})}):(app.loginView=new app.LoginView,app.signupView=new app.SignupView)})}();
//# sourceMappingURL=indexLessonsPreview.min.js.map