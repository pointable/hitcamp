/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

function FastClick(e){var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(FastClick.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}define("apps/config/marionette/region/dialog",["jquery","underscore","marionette","bootstrap"],function(e,t,n){return n.Region.Dialog=n.Region.extend({el:"#dialog-region",constructor:function(){Backbone.Marionette.Region.prototype.constructor.apply(this,arguments),this.on("show",this.showModal,this)},showModal:function(t){console.log("showModal"),e("#dialog-region").show(),this.listenTo(t,"dialog:close",function(){console.log("dialog:close"),this.hideModal()})},hideModal:function(){console.log("hideModal"),e("#dialog-region").hide(),this.$el.modal("hide"),e("body").removeClass("modal-open"),e(".modal-backdrop").remove(),this.stopListening(),this.destroy()},closeDialog:function(){this.stopListening(),this.destroy(),this.$el.dialog("destroy")}}),n.Region.Dialog}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!apps/camp/show/templates/camp_layout.html",[],function(){return'<div id="classrooms-panel" class="classrooms-panel-green">\n\n</div>\n\n<div id="adventures-panel" class="adventures-panel-blue">\n</div>\n\n<div class="btn-group home-guide-introduction" style="" data-intro="New to Hit.Camp? Click this now!">      \n  <button type="button" class="btn btn-success js-launch-guide"><i class="fa fa-play"></i> Launch Hit.Camp Teacher\'s Tutorial</button>\n</div>\n<div id="tips" class="home-tips js-tips">\n  <span class="btn"><i class="fa fa-info"></i></span>  \n</div>\n\n'}),define("apps/camp/show/campShow_view",["app","text!apps/camp/show/templates/camp_layout.html","bootstrap"],function(e,t){return e.module("CampApp.ShowCamp.View",function(e,n,r,i,s,o){e.Camp=i.LayoutView.extend({className:"camp-wrapper row",regions:{adventuresRegion:"#adventures-panel",classroomsRegion:"#classrooms-panel"},template:o.template(t),initialize:function(){},triggers:{"click .js-new":"activity:new","click .js-tips":"tips:show","click .js-launch-guide":"tips:launchguide"},onRender:function(){},onShow:function(){}})}),e.CampApp.ShowCamp.View}),define("apps/camp/show/campShow_controller",["app","apps/camp/show/campShow_view","bootbox","chardinJs","bootstrap"],function(e,t,n){return e.module("CampApp.ShowCamp",function(e,n,r,i,s,o){function a(e){u.setHandler("activities",function(){return e})}var u=new r.Wreqr.RequestResponse;e.Controller={showCamp:function(e){_view.showCampView()}},_view={showCampView:function(){var e=new t.Camp;e.on("show",function(){n.trigger("classrooms:list",e.classroomsRegion),n.trigger("adventures:list",e.adventuresRegion)}),n.mainRegion.show(e),e.on("tips:show",function(){s("#classrooms-panel").scrollTop(0),s("#adventures-panel").scrollTop(0),s("#adventures-panel").addClass("guide-mode"),s("#classrooms-panel").addClass("guide-mode"),s("body").one("chardinJs:stop",function(){s("#adventures-panel").removeClass("guide-mode"),s("#classrooms-panel").removeClass("guide-mode")}),setTimeout(function(){s("body").chardinJs("start")},400)}),e.on("tips:launchguide",function(){s("body").chardinJs("stop"),setTimeout(function(){s(".adventure-guide").css("display","block")},600)})}}}),e.CampApp.ShowCamp.Controller}),define("apps/camp/camp_app",["app"],function(e){e.module("CampApp",function(e,t,n,r,i,s){e.onStart=function(){console.log("Starting CampApp")},e.onStop=function(){console.log("Stopping CampApp")}}),e.module("Router.CampApp",function(e,t,n,r,i,s){e.Router=r.AppRouter.extend({appRoutes:{classrooms:"showCamp"}}),CampAPI={showCamp:function(e){require(["apps/camp/show/campShow_controller"],function(e){e.showCamp()})}},t.on("camp:show",function(){CampAPI.showCamp()}),t.addInitializer(function(){new e.Router({controller:CampAPI})})})}),define("text!apps/dialog/show/templates/dialog.html",[],function(){return'<div class="modal-dialog">\r\n  <div class="modal-content">\r\n    <div class="modal-header">\r\n      <button type="button" class="close js-close" data-dismiss="modal" aria-hidden="true">&times;</button>\r\n      <h4 class="modal-title" id="myModalLabel">Modal title</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n      <iframe scrolling="yes" id="frameDoc" src="<%= resourceUrl %>" frameborder="0"></iframe>  \r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n'}),define("apps/dialog/show/dialogShow_view",["app","text!apps/dialog/show/templates/dialog.html"],function(e,t){return e.module("DialogApp.Show.View",function(e,n,r,i,s,o){e.Dialog=i.ItemView.extend({template:o.template(t)})}),e.DialogApp.Show.View}),define("apps/dialog/show/dialogShow_controller",["app","apps/dialog/show/dialogShow_view","bootstrap"],function(e,t){return e.module("DialogApp.Show",function(e,n,r,i,s,o){e.Controller={showDialog:function(e){var i=new r.Model({resourceUrl:e}),o=new t.Dialog({model:i});n.dialogRegion.show(o),s("#mymodal").modal({})},hideDialog:function(){n.dialogRegion.hideModal()}}}),e.DialogApp.Show.Controller}),define("apps/dialog/dialog_app",["app"],function(e){e.module("Router.ElementsApp",function(e,t,n,r,i,s){DialogAPI={showDialog:function(e){require(["apps/dialog/show/dialogShow_controller"],function(t){t.showDialog(e)})},hideDialog:function(e){require(["apps/dialog/show/dialogShow_controller"],function(e){e.hideDialog()})}},t.on("dialog:show",function(e){DialogAPI.showDialog(e)}),t.on("dialog:hide",function(){DialogAPI.hideDialog()})})}),define("text!apps/header/list/templates/header_template.html",[],function(){return'<div class="container-fluid ">\r\n\r\n  <!-- Collect the nav links, forms, and other content for toggling -->\r\n  <div class="collapse navbar-collapse" id="engage-navbar">\r\n    <ul class="nav navbar-nav">\r\n      <li><a href="#" class="js-nav-activities js-guide-am-map">Adventure Map</a></li>\r\n      <li><a href="#" class="js-nav-list step1 js-guide-am-wordlist">Word Lists</a></li>      \r\n    </ul>\r\n\r\n    <ul class="nav navbar-nav navbar-right js-guide-assign" >\r\n      <li class="dropdown keep-open">\r\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Classrooms Assigned to this Adventure<b class="caret"></b></a>\r\n        <ul class="dropdown-menu">\r\n          <li>      \r\n            <ul class="list-group checked-list-box" style="width:250px;">              \r\n              <% _.each(classrooms, function(classroom) { %> \r\n              <li class="list-group-item" data-checked=\'<%= (lesson._id === classroom.lesson)? "true":"false" %>\' \r\n                  id="<%= classroom._id %>"><%= classroom.name %>\r\n                <a class="btn btn-sm btn-success pull-right edit" style="margin-top:-5px;position:absolute;right:5px" \r\n                   value=\'<%- classroom._id %>\' href=\'/<%- classroom.path %>\' onclick="event.stopPropagation();">\r\n                  Launch\r\n                </a>\r\n              </li>\r\n              <% }); %> \r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n  </div><!-- /.navbar-collapse -->\r\n</div><!-- /.container-fluid -->\r\n\r\n'}),define("text!apps/header/list/templates/questionHeader_template.html",[],function(){return'  <div class="container-fluid ">\r\n    <!-- Brand and toggle get grouped for better mobile display -->\r\n    <div class="navbar-header">\r\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#engage-navbar">\r\n        <span class="sr-only">Toggle navigation</span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n      </button>\r\n      <a class="navbar-brand" href="#">Engage</a>\r\n    </div>\r\n\r\n    <!-- Collect the nav links, forms, and other content for toggling -->\r\n    <div class="collapse navbar-collapse" id="engage-navbar">\r\n      <ul class="nav navbar-nav">\r\n        <li><a href="#" class="js-activities">Lesson</a></li>\r\n        <li><a href="#" class="js-list">Lists</a></li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li><a class="btn-engage">                \r\n            <i class="fa fa-user fa-1x"></i> Sign Out</a></li>\r\n        </li>\r\n      </ul>\r\n    </div><!-- /.navbar-collapse -->\r\n  </div><!-- /.container-fluid -->\r\n'}),define("apps/header/list/headerList_view",["app","text!apps/header/list/templates/header_template.html","text!apps/header/list/templates/questionHeader_template.html"],function(e,t,n){return e.module("HeaderApp.List.View",function(e,r,i,s,o,u){e.Header=s.ItemView.extend({template:u.template(t),className:"navbar navbar-default margin0",attributes:{role:"navigation"},id:"engage-header-navbar",triggers:{"click .js-home":"header:home","click .js-start-lesson":"header:lesson:start","click .js-rename":"header:lessontitle:rename","click .js-nav-list":"wordLists:list","click .js-nav-activities":"activities:list","click .js-guide":"show:guide"},initialize:function(){},events:{"click #LessonTitle":"lessonTitleClick","click .js-move":"activitiesMove"},onShow:function(){function n(){console.log("donetyping")}var e,t=3e3;o("#LessonTitle").keyup(function(){clearTimeout(e),o("#LessonTitle").val&&(e=setTimeout(n,t))})},lessonTitleClick:function(){o("#LessonTitle").css("background-color","white")},activitiesMove:function(e){o(e.target).parent().toggleClass("active"),o(e.target).parent().hasClass("active")?this.trigger("activities:move",e.target):this.trigger("activities:stopmove",e.target)}}),e.QuestionHeader=s.ItemView.extend({template:u.template(n),className:"navbar navbar-default margin0",attributes:{role:"navigation"},id:"QuestionHeader",triggers:{"click .js-home":"header:home","click .js-delete":"header:element:delete","click .js-new":"header:element:new","click .js-rename":"header:lessontitle:rename","click .js-nav-list":"wordLists:list","click .js-nav-activities":"activities:list"},initialize:function(){},events:{"click #LessonTitle":"lessonTitleClick"}})}),e.HeaderApp.List.View}),define("apps/header/list/headerList_controller",["app","apps/header/list/headerList_view","bootbox"],function(e,t,n){return e.module("HeaderApp.List",function(e,r,i,s,o,u){e.Controller={listHeader:function(e){var s=e,u=JSON.parse(o("#data-results").html()),a=u.lessonName,f=u;document.lessonID=f._id;var l=JSON.parse(o("#data-classrooms").html()),c=l,h=new i.Model({lessonName:a,classrooms:c,lesson:f}),p=new t.Header({model:h});r.headerRegion.show(p),this.updateClassroomList(c);if(typeof e=="undefined"||e==="null")s="activities";o(".js-nav-"+s).parent().addClass("active"),p.on("header:home",function(){console.log("going home")}),p.on("header:lessontitle:rename",function(e){console.log("Rename lesson Title"),n.prompt("Rename Lesson",function(t){if(t===null)return;e.model.set("lessonTitle",t),e.view.$("#inner-lesson-title").html(t),console.log(e),console.log(t)})}),p.on("wordLists:list",function(e){r.trigger("wordLists:list")}),p.on("activities:list",function(e){r.trigger("activities:listAdventures")}),p.on("activities:move",function(e){console.log("Move"),console.log(e),r.trigger("activities:move")}),p.on("activities:stopmove",function(e){console.log("Move"),console.log(e),r.trigger("activities:stopmove")})},listQuestionHeader:function(){console.log("list Question Header");var e=new i.Model({test:"test"}),s=new t.QuestionHeader({model:e});r.headerRegion.show(s),s.on("header:home",function(){console.log("going home")}),s.on("header:lessontitle:rename",function(e){console.log("Rename lesson Title"),n.prompt("Rename Lesson",function(t){if(t===null)return;e.model.set("lessonTitle",t),e.view.$("#inner-lesson-title").html(t),console.log(e),console.log(t)})}),s.on("header:element:delete",function(){console.log("alert box for delete"),n.confirm("Delete Element",function(e){console.log(e)})}),s.on("header:element:new",function(){console.log("Create new element")}),s.on("wordLists:list",function(e){r.trigger("wordLists:list")}),s.on("activities:list",function(e){r.trigger("activities:listAdventures")})},headerViewCommon:function(){},updateClassroomList:function(e){o(".list-group.checked-list-box .list-group-item").each(function(){function s(){var s=t.is(":checked");e.data("state",s?"on":"off"),e.find(".state-icon").removeClass().addClass("state-icon "+i[e.data("state")].icon),s?e.addClass(r+n+" active"):e.removeClass(r+n+" active")}function u(){e.data("checked")==1&&t.prop("checked",!t.is(":checked")),s(),e.find(".state-icon").length==0&&e.prepend('<span class="state-icon '+i[e.data("state")].icon+'"></span>')}var e=o(this),t=o('<input type="checkbox" class="hidden" />'),n=e.data("color")?e.data("color"):"primary",r=e.data("style")=="button"?"btn-":"list-group-item-",i={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};e.css("cursor","pointer"),e.append(t),e.on("click",function(){t.prop("checked",!t.is(":checked")),t.triggerHandler("change"),s();var e=t.is(":checked");console.log(this.id),console.log(e);var n="undefined";e&&(n=document.lessonID),o.ajax({url:"/classrooms/"+this.id+"/",type:"PUT",data:"idLesson="+n,success:function(e){console.log(e)}})}),t.on("change",function(){s()}),u()}),o("#get-checked-data").on("click",function(e){e.preventDefault();var t={},n=0;o("#check-list-box li.active").each(function(e,r){t[n]=o(r).text(),n++}),o("#display-json").html(JSON.stringify(t,null,"	"))})}}}),e.HeaderApp.List.Controller}),define("apps/header/header_app",["app"],function(e){e.module("HeaderApp",function(e,t,n,r,i,s){HeaderAPI={listHeader:function(e){require(["apps/header/list/headerList_controller"],function(t){t.listHeader(e)})},listQuestionHeader:function(){require(["apps/header/list/headerList_controller"],function(e){e.listQuestionHeader()})}},t.on("header:list",function(e){console.log("header:list"),HeaderAPI.listHeader(e)}),t.on("header:list:questionHeader",function(){console.log("header:list"),HeaderAPI.listQuestionHeader()})})}),define("text!apps/classrooms/list/templates/classrooms_item.html",[],function(){return'\n\n<div class="classroom-area js-activate"\n     <% if ( isFirst === true ){ %>\n     data-intro="<b>Classroom</b><br> Create and share the Classroom address to your students" data-position="top"\n  <% } %>\n  >\n\n  <div class="classroom-title-wrapper">\n    <div class="classroom-name camp-adventure-font text-center">\n      <img class="classroom-icon" height="183" width="200" src="../webappCamp/images/globetrotter_1234.png">\n      <span ><%= name %></span>\n    </div>\n    <div class="classroom-address text-center" title="Classroom URL">\n      <div class="address-link"><%= (window.location.hostname.indexOf(\'hit.camp\')!=-1)?window.location.hostname:\'hit.camp\' %>/<%= path %></div><br>\n    </div>\n    <div class="text-center action-panel">\n      <div class="btn-group classroom-actions">\n        <a href="../<%= path %>" class="btn btn-success js-launch" title="Launch Classroom">Launch Classroom</a>        \n        <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">\n          <span class="caret"></span>\n          <span class="sr-only">Toggle Dropdown</span>\n        </button>\n        <ul class="dropdown-menu " role="menu">\n          <li><a href="/<%= path %>/teststudents/1_2"  class="js-preview"><i class="fa fa-search"></i> Preview with Test Student</a></li>  \n          <li><a href="/classrooms/<%= path %>/reports" class="js-reports"><i class="fa fa-bar-chart-o"></i> View Reports</a></li>\n          <li><a href="/classrooms/<%= path %>/students" class="js-students"><i class="fa fa-users "></i> Manage Students</a></li>\n          <li><a href="/classrooms/<%= path %>/configure" class="js-edit"><i class="fa fa-cog"></i> Configure Classroom</a></li>  \n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <% if (  lesson ){ %>\n  <div class="classroom-map-wrapper">\n  <% } else { %>\n  <div class="classroom-map-wrapper" style="visibility:hidden;">\n  <% } %>\n      <!--<div class="text-center current-adventure"><span class="camp-adventure-font">Assigned Adventure:</span></div>-->   \n\n    <div class="classroom-map-holder adventure-blue-glow " title="Current Adventure" >\n      <img class="classroom-thumbtack" src="../webappCamp/images/thumbtack.png"  height="20" width="20">\n      <img class="classroom-map" src="<%= backgroundThumbnailURL %>"  height="91" width="100">\n      <div class="shadow1"></div>\n      <div class="shadow2"></div>\n      <div class="shadow3"></div>\n      <div class="shadow4"></div>\n    </div>          \n    <div class="text-center current-adventure"\n         <% if ( isFirst === true ){ %>\n         data-intro="Adventure currently assigned" data-position="bottom"\n         <% } %>\n         ><span class="camp-adventure-font"><%= lessonName %></span></div>   \n    </div>\n\n  </div>\n\n\n\n\n'}),define("text!apps/classrooms/list/templates/classrooms_layout.html",[],function(){return'\n<div class="classrooms-fixed-header">\n  <div class="classrooms-header row">\n    <span class="classrooms-title camp-adventure-font-style">Classrooms</span>\n  </div>\n\n</div>\n\n<div class="row classrooms-toolbar text-center">\n  <a class="btn btn-new-classrooms camp-normal-font js-new" title="Add New Classroom">\n    <i class="fa fa-plus fa-2x"></i></a>\n</div>\n\n<div id=\'classrooms-container\' class="row"></div>'}),define("apps/classrooms/list/classroomsList_view",["app","text!apps/classrooms/list/templates/classrooms_item.html","text!apps/classrooms/list/templates/classrooms_layout.html","bootstrap"],function(e,t,n){return e.module("ClassroomsApp.ListClassrooms.View",function(e,r,i,s,o,u){e.Classroom=s.ItemView.extend({className:"classroom-wrapper js-show-adventure",template:u.template(t),events:{"click .js-launch":"launchClassroomClicked","click .js-preview":"previewClassroomClicked","click .js-reports":"showReportClicked","click .js-students":"manageStudentsClicked","click .js-edit":"editClassroomClicked"},triggers:{"click .js-activate":"classroom:activate"},modelEvents:{"change:selected":"selectedChanged","change:backgroundThumbnailURL":"imageChanged"},initialize:function(){this.style.select(this)},selectedChanged:function(e,t){this.style.select(this)},imageChanged:function(e,t){this.render();var n=o(this.el).find(".classroom-map-holder"),r=o(this.el).find(".classroom-map-holder").next();n.addClass("animated swing"),r.addClass("animated swing")},onShow:function(){o(".dropdown-toggle").dropdown()},onRender:function(){o(".dropdown-toggle").dropdown(),this.style.select(this)},style:{select:function(e){var t=e.model.get("selected");t?e.$el.find(".classroom-title-wrapper").addClass("classroom-selected"):e.$el.find(".classroom-title-wrapper").removeClass("classroom-selected")}},launchClassroomClicked:function(e){e.preventDefault(),this.trigger("classroom:launch",this)},previewClassroomClicked:function(e){e.preventDefault(),location.href=o(e.target).attr("href")},showReportClicked:function(e){e.preventDefault(),location.href=this.model.url()+"/reports/"},manageStudentsClicked:function(e){e.preventDefault(),location.href=this.model.url()+"/students/"},editClassroomClicked:function(e){e.preventDefault(),location.href=this.model.url()+"/configure/"}}),e.Classrooms=s.CompositeView.extend({className:"classroomsLayout-wrapper",template:u.template(n),childView:e.Classroom,childViewContainer:"#classrooms-container",collectionEvents:{add:"classroomAdded"},classroomAdded:function(e){e.setSelected(),this.attachHtml=function(e,t,n){e.$el.find("#classrooms-container").prepend(t.el)}},initialize:function(){},triggers:{"click .js-new":"classroom:new"},onRender:function(){console.log("####Classrooms are rendered")},onShow:function(){o(".dropdown-toggle").dropdown()}})}),e.ClassroomsApp.ListClassrooms.View}),define("entities/classroom/classroom_model",["jquery","underscore","backbone","app","entities/classroom/classroom_collection"],function(e,t,n,r,i){function s(){var t=JSON.parse(e("#data-results").html()),n=t._id;return n}Classroom=n.Model.extend({idAttribute:"_id",url:function(){return"/classrooms"+(this.isNew()?"":"/"+this.get("path"))},fullPath:function(){return location.protocol+"//"+location.host+"/"+this.get("path")},parse:function(e){return this.set("_id",e._id),e},defaults:{_id:undefined,data:"",name:"",path:"",PIN:"",isComplete:"",lesson:"",isLocked:!1,isFirst:!1,backgroundThumbnailURL:"about:blank",lessonName:""},initialize:function(e){},clear:function(){console.log("destroy"),this.destroy()},setSelected:function(){this.collection.selectElement(this)}});var o={getClassroomEntity:function(t){var n=new Classroom({_id:t}),r=e.Deferred();return n.fetch({success:function(e){r.resolve(e),console.log("success")},error:function(e){r.resolve(undefined),console.log("fail")}}),r.promise()}};return r.reqres.setHandler("classroom:entity",function(e){return o.getClassroomEntity(e)}),r.reqres.setHandler("classroom:entity:new",function(){return new Classroom}),Classroom}),define("entities/classroom/classroom_collection",["jquery","underscore","backbone","app","entities/classroom/classroom_model"],function(e,t,n,r,i){ClassroomCollection=n.Collection.extend({model:i,url:"/classrooms",comparator:"name",parse:function(e){return e.data},initialize:function(e,t){},selectElement:function(e){t.each(this.models,function(e){e.set("selected",!1)},this),e.set("selected",!0)},remaining:function(){return this.without.apply(this,this.selected())}});var s=JSON.parse(e("#data-results").html()),o={getClassroomEntities:function(t){var n={},r=new ClassroomCollection(n),i=e.Deferred();return r.fetch({success:function(e){i.resolve(e)}}),i.promise()},getClassroomEntitiesFromHTML:function(){var e=new ClassroomCollection(s.data);return e}};return r.reqres.setHandler("classroom:entities",function(){return o.getClassroomEntities()}),r.reqres.setHandler("classroom:entities:html",function(){return o.getClassroomEntitiesFromHTML()}),ClassroomCollection}),define("entities/adventure/adventure_model",["jquery","underscore","backbone","app"],function(e,t,n,r){Adventure=n.Model.extend({idAttribute:"_id",url:function(){return"/adventures/edit"+(this.isNew()?"":"/"+this.id)},parse:function(e){return this.set("_id",e._id),e},defaults:{_id:undefined,data:"",lessonName:"",isComplete:"",backgroundThumbnailURL:"about:blank",isLocked:!1,isFirst:!1},initialize:function(e){this.set("path",this.url()),this.on("change:_id",function(){this.set("path",this.url())})},clear:function(){console.log("destroy"),this.destroy()},setSelected:function(){this.collection.selectElement(this)}});var i={getAdventureEntity:function(t){var n=new Adventure({_id:t}),r=e.Deferred();return n.fetch({success:function(e){r.resolve(e),console.log("success")},error:function(e){r.resolve(undefined),console.log("fail")}}),r.promise()}};return r.reqres.setHandler("adventure:entity",function(e){return i.getAdventureEntity(e)}),r.reqres.setHandler("adventure:entity:new",function(){return new Adventure}),Adventure}),define("entities/adventure/adventure_collection",["jquery","underscore","backbone","app","entities/adventure/adventure_model"],function(e,t,n,r,i){AdventureCollection=n.Collection.extend({model:i,url:"/adventures/edit",comparator:"lessonName",parse:function(e){return e.data},initialize:function(e,t){},selectElement:function(e){t.each(this.models,function(e){e.set("selected",!1)},this),e.set("selected",!0)},remaining:function(){return this.without.apply(this,this.selected())}});var s=JSON.parse(e("#data-lessons").html()),o={getAdventureEntities:function(t){var n={},r=new AdventureCollection(n),i=e.Deferred();return r.fetch({success:function(e){i.resolve(e)}}),i.promise()},getAdventureEntitiesFromHTML:function(){var e=new AdventureCollection(s);return e}};return r.reqres.setHandler("adventure:entities",function(){return o.getAdventureEntities()}),r.reqres.setHandler("adventure:entities:html",function(){return o.getAdventureEntitiesFromHTML()}),AdventureCollection}),define("apps/classrooms/list/classroomsList_controller",["app","apps/classrooms/list/classroomsList_view","bootbox","bootstrap"],function(e,t,n){return e.module("ClassroomsApp.ListClassrooms",function(e,r,i,s,o,u){function a(e,i){e.at(0).set("isFirst",!0),r.reqres.setHandler("classrooms",function(){return e});var s=new t.Classrooms({collection:e});i.show(s),e.at(0).setSelected(),s.on("classroom:new",function(){function t(i){n.prompt({title:"New Classroom Name: ( Minimum 6 characters )",value:i,callback:function(i){if(i===null){console.log("empty");return}require(["entities/classroom/classroom_model"],function(){var s=r.request("classroom:entity:new");s.set("name",i),console.log("classroom %O",s),e.create(s,{wait:!0,success:function(e,t){console.log("success message",t)},error:function(e,r){n.alert(r.responseJSON.errors[0],function(){t(i)})}})})}})}t("")}),s.on("childview:classroom:launch",function(e){location.href=e.model.get("path")}),s.on("childview:classroom:activate",function(e){e.model.setSelected();var t=r.request("adventures"),n=t.get(e.model.get("lesson"));n.setSelected()})}function f(e){reqres.setHandler("activities",function(){return e})}e.Controller={listClassrooms:function(e){require(["entities/classroom/classroom_collection"],function(){var t=r.request("classroom:entities:html");require(["entities/adventure/adventure_collection"],function(){var n=r.request("adventure:entities:html");u.each(t.models,function(e){var t=e.get("lesson");if(t!==""&&typeof t!="undefined"){var r=n.get(t);typeof r!="undefined"&&(e.set("backgroundThumbnailURL",r.get("backgroundThumbnailURL")),e.set("lessonName",r.get("lessonName")))}else e.set("backgroundThumbnailURL","about:blank"),e.set("lessonName","")}),a(t,e)})})}}}),e.ClassroomsApp.ListClassrooms.Controller}),define("apps/classrooms/classrooms_app",["app"],function(e){e.module("ClassroomsApp",function(e,t,n,r,i,s){e.onStart=function(){console.log("Starting ClassroomsApp")},e.onStop=function(){console.log("Stopping ClassroomsApp")}}),e.module("Router.ClassroomsApp",function(e,t,n,r,i,s){e.Router=r.AppRouter.extend({appRoutes:{}}),ClassroomsAPI={listClassrooms:function(e){require(["apps/classrooms/list/classroomsList_controller"],function(t,n){t.listClassrooms(e)})}},t.on("classrooms:list",function(e){ClassroomsAPI.listClassrooms(e)}),t.addInitializer(function(){new e.Router({controller:ClassroomsAPI})})})}),define("text!apps/adventures/list/templates/adventures_item.html",[],function(){return'<div>\n  <div class="adventure-area " >\n\n    <div class="adventure-map-holder adventure-blue-glow js-activate "  \n           <% if ( isFirst === true ){ %>\n           data-intro="<b>Adventure</b><br>Prepare a lesson by creating an Adventure with your existing teaching resources" data-position="bottom"\n      <% } %>\n      >\n      <img class="adventure-map center-block" src="<%= backgroundThumbnailURL %>"  height="183" width="200" >\n      <!--    <div class="shadow1"></div>\n          <div class="shadow2"></div>\n          <div class="shadow3"></div>\n          <div class="shadow4"></div>-->\n    </div>\n    <div class="adventure-name text-center">\n      <span class="camp-adventure-font-black adventure-item-title"><%= lessonName %>\n        <% if ( isLocked === true ) { %> \n        <i class="fa fa-lock"></i>\n        <% } %>\n      </span>\n    </div>  \n  </div>\n  <div class="text-center">\n    <div class="btn-group adventure-actions">\n      <% if ( isLocked !== true ) { %>    \n      <a href="<%= path %>" class="btn btn-default js-edit"> Edit Adventure</a>\n      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n        <span class="caret"></span>\n        <span class="sr-only">Toggle Dropdown</span>\n      </button>\n\n      <ul class="dropdown-menu " role="menu">\n        <li><a href="#" class="js-share"><i class="fa fa-share-alt "></i> Share...</a></li>\n        <li><a href="#" class="js-duplicate"><i class="fa fa-copy "></i> Duplicate</a></li>\n        <li><a href="#" class="js-delete"><i class="fa fa-trash-o "></i> Delete</a></li>       \n      </ul>\n      <% } else { %>\n      <button type="button" class="btn btn-default js-duplicate"><i class="fa fa-copy "></i> Duplicate</button>\n      <% } %>\n    </div>\n  </div>\n</div>'}),define("text!apps/adventures/list/templates/adventures_layout.html",[],function(){return'<div class="adventures-header-wrapper">\n  <div class="adventures-header row">\n    <span class="adventures-title camp-adventure-font-style">Adventures</span>\n  </div>\n\n\n</div>\n<div class="row adventures-toolbar">\n  <a class="btn btn-new-adventure camp-normal-font js-new" title="Add Adventure (Lesson Plan)">\n    <i class="fa fa-plus fa-2x"></i>\n  </a>\n\n</div>\n<!--<div class="text-center camp-adventure-font-black adventure-subheader">Assign an Adventure to your classroom</div>-->\n<div id=\'adventures-container\' class="row">\n\n  <!--  <div class="adventure-wrapper js-empty-adventure col-md-4 col-lg-3">\n      <div class="adventure-area">\n        <div class="adventure-map-holder adventure-map-empty js-empty">\n          <div class="adventure-text-empty">Select Empty Adventure</div>\n          <i class="fa fa-question fa-2x adventure-icon-empty"></i>\n        </div>\n        <div class="adventure-name text-center"><span class="camp-adventure-font-style"></span></div>  \n      </div>\n    </div>-->\n</div>'}),define("apps/adventures/list/adventuresList_view",["app","text!apps/adventures/list/templates/adventures_item.html","text!apps/adventures/list/templates/adventures_layout.html","bootstrap"],function(e,t,n){return e.module("AdventuresApp.ListAdventures.View",function(e,r,i,s,o,u){e.Adventure=s.ItemView.extend({className:"adventure-wrapper col-md-4 col-lg-3 col-sm-12 col-xs-12",template:u.template(t),events:{"click .js-edit":"editAdventureClicked","click .js-share":"shareAdventureClicked","click .js-duplicate":"duplicateAdventureClicked","click .js-delete":"deleteAdventureClicked"},triggers:{"click .js-activate":"adventure:activate","click .js-empty":"adventure:empty"},modelEvents:{"change:selected":"selectedChanged"},initialize:function(){this.style.select(this)},selectedChanged:function(e,t){this.style.select(this)},onShow:function(){o(".dropdown-toggle").dropdown()},style:{select:function(e){var t=e.model.get("selected");t?e.$el.find(".adventure-map-holder").addClass("adventure-selected"):e.$el.find(".adventure-map-holder").removeClass("adventure-selected")}},editAdventureClicked:function(e){e.preventDefault(),this.trigger("adventure:edit",this)},shareAdventureClicked:function(e){e.preventDefault(),this.trigger("adventure:share",this)},duplicateAdventureClicked:function(e){e.preventDefault(),this.trigger("adventure:duplicate",this)},deleteAdventureClicked:function(e){e.preventDefault(),this.trigger("adventure:delete",this)}}),e.Adventures=s.CompositeView.extend({className:"adventuresLayout-wrapper",template:u.template(n),childView:e.Adventure,childViewContainer:"#adventures-container",initialize:function(){},triggers:{"click .js-new":"adventure:new"},onRender:function(){console.log("####Adventures are rendered")},onShow:function(){}})}),e.AdventuresApp.ListAdventures.View}),define("apps/adventures/list/adventuresList_controller",["app","apps/adventures/list/adventuresList_view","bootbox","bootstrap"],function(e,t,n){return e.module("AdventuresApp.ListAdventures",function(e,r,i,s,o,u){function f(e,i){e.at(0).set("isFirst",!0),r.reqres.setHandler("adventures",function(){return e});var s=new t.Adventures({collection:e});i.show(s),require(["entities/classroom/classroom_collection"],function(){var t=r.request("classroom:entities:html"),n=e.get(t.at(0).get("lesson"));typeof n!="undefined"&&n.setSelected()}),s.on("adventure:new",function(){n.prompt("New Adventure Name: ",function(t){if(t===null){console.log("empty");return}require(["entities/adventure/adventure_model"],function(){var i=r.request("adventure:entity:new");i.set("lessonName",t),console.log("adventure %O",i),e.create(i,{at:0},{wait:!0,success:function(e){console.log("success %O :",e)},error:function(e,t){console.log("fail : %O",t),n.alert(t.responseJSON.error)}})}),console.log(t)})});var u={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return u.Android()||u.BlackBerry()||u.iOS()||u.Opera()||u.Windows()}};s.on("childview:adventure:edit",function(e){var t=navigator.userAgent.indexOf("Chrome")>-1,r=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Firefox")>-1,s=navigator.userAgent.indexOf("Safari")>-1,o=navigator.userAgent.indexOf("Presto")>-1,a=navigator.userAgent.indexOf("PhantomJS")>-1;t&&s&&(s=!1);var f=u.any();if((f||!t)&&!a){var l="<b>Alert! </b><br> The Adventure Editor for the private beta is optimized for <b>Chrome</b> on the desktop<br> There may be missing features in the Adventure Editor with your web browser.";n.confirm(l,function(t){t&&(location.href=e.model.url())})}else location.href=e.model.url()}),s.on("childview:adventure:share",function(e){var t=e.model.get("shortID");t||(t=e.model.get("_id"));var r=location.href+"a/"+t,i=e.model.get("lessonName"),s='<input type="text" id="share-url" name="shareURL" value="'+r+'" readonly style="width:100%" onclick="this.select();">',o='<a href="'+r+'" target="_blank"> Open Link</a>',u='<a href="https://www.facebook.com/sharer/sharer.php?u='+r+'" target="_blank"> Facebook</a>',a='<a href="http://twitter.com/share?text=Check out this Adventure - '+e.model.get("lessonName")+"&url="+r+"&hashtags=hitcamp"+'" target="_blank">  Twitter</a>';n.alert("<b>Share Adventure: </b>"+i+"<br><br> Link to share: <br>"+s+o+"<br><br> Share via "+u+" or "+a)}),s.on("childview:adventure:duplicate",function(t){o.ajax({url:"/adventures/edit/"+t.model.get("_id")+"/clone",type:"POST",data:"",success:function(t){r.trigger("adventures:list:web"),e.fetch({data:""})}})}),s.on("childview:adventure:delete",function(e){var t="Delete "+e.model.get("lessonName")+" ?";n.confirm(t,function(t){if(!t)return;e.model.destroy()})}),s.on("childview:adventure:activate",function(e){var t=r.request("classrooms"),i=t.findWhere({selected:!0}),s=e.model.get("_id"),u=i.get("lesson"),a=e.model.get("lessonName"),f;s!==u?f="Assign <b>"+a+"</b> to <b>"+i.get("name")+"</b>?":f="Unassigned <b>"+a+"</b> from <b>"+i.get("name")+"</b>?",n.confirm(f,function(t){t&&(s!==u?(o.ajax({url:"/classrooms/"+i.get("_id")+"/",type:"PUT",data:"idLesson="+e.model.get("_id"),success:function(t){i.set({backgroundThumbnailURL:e.model.get("backgroundThumbnailURL"),lesson:e.model.id,lessonName:a})}}),e.model.setSelected()):(o.ajax({url:"/classrooms/"+i.get("_id")+"/",type:"PUT",data:"idLesson=",success:function(e){i.set({backgroundThumbnailURL:"about:blank",lesson:""})}}),e.model.set("selected",!1)))})})}function l(e){a.setHandler("activities",function(){return e})}var a=new i.Wreqr.RequestResponse;e.Controller={listAdventures:function(e){require(["entities/adventure/adventure_collection"],function(){var t=r.request("adventure:entities:html");f(t,e)})},listAdventuresWeb:function(e){var t=r.request("adventure:entities");o.when(t).done(function(t){f(t,e)})}}}),e.AdventuresApp.ListAdventures.Controller}),define("apps/adventures/adventures_app",["app"],function(e){e.module("AdventuresApp",function(e,t,n,r,i,s){e.onStart=function(){console.log("Starting AdventuresApp")},e.onStop=function(){console.log("Stopping AdventuresApp")}}),e.module("Router.AdventuresApp",function(e,t,n,r,i,s){e.Router=r.AppRouter.extend({appRoutes:{}}),AdventuresAPI={listAdventures:function(e){require(["apps/adventures/list/adventuresList_controller"],function(t,n){t.listAdventures(e)})},listAdventuresWeb:function(e){require(["apps/adventures/list/adventuresList_controller"],function(t){t.listAdventuresWeb(e)})}},t.on("adventures:list",function(e){AdventuresAPI.listAdventures(e)}),t.on("adventures:list:web",function(e){AdventuresAPI.listAdventuresWeb(e)}),t.addInitializer(function(){new e.Router({controller:AdventuresAPI})})})}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},FastClick.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,r,i,s,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t,n;if(typeof window.ontouchstart=="undefined")return!0;n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(!FastClick.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return e.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(e){return new FastClick(e)},typeof define!="undefined"&&define.amd?define("libs/fastclick/fastclick",[],function(){return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("app",["marionette","apps/config/marionette/region/dialog"],function(e,t){var n=new e.Application;return n.addRegions({mainRegion:"#main-region",dialogRegion:t}),n.navigate=function(e,t){t||(t={}),Backbone.history.navigate(e,t)},n.getCurrentRoute=function(){return Backbone.history.fragment},n.on("start",function(){Backbone.history&&(require(["apps/camp/camp_app","apps/dialog/dialog_app","apps/header/header_app","apps/classrooms/classrooms_app","apps/adventures/adventures_app"],function(){Backbone.history.start(),n.getCurrentRoute()===""&&(n.trigger("camp:show"),require(["libs/fastclick/fastclick"],function(){FastClick.attach(document.body)}))}),console.log("CampManager has started"))}),n}),requirejs.config({paths:{jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min","jquery-ui":"//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","backbone.syphon":"//cdnjs.cloudflare.com/ajax/libs/backbone.syphon/0.4.1/backbone.syphon.min",json2:"//cdnjs.cloudflare.com/ajax/libs/json2/20130526/json2.min",marionette:"//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/2.0.2/backbone.marionette.min",text:"../../tools/libs/require/text",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min",bootbox:"//cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.2.0/bootbox.min",chardinJs:"//cdnjs.cloudflare.com/ajax/libs/chardin.js/0.1.2/chardinjs.min"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery","json2"],exports:"Backbone"},marionette:{deps:["backbone"],exports:"Marionette"},bootstrap:["jquery"],"backbone.syphon":["backbone"],bootbox:{deps:["bootstrap","jquery"],exports:"bootbox"},"jquery-ui":{exports:"$",deps:["jquery"]},chardinJs:{deps:["jquery"],exports:"chardinJs"}}}),require(["app"],function(e){e.start()}),define("require_main",function(){});